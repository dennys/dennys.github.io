<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0">
    <channel>
        <title>Checkmarx - Tag - Dennys Diary</title>
        <link>https://dennys.github.io/tags/checkmarx/</link>
        <description>Checkmarx - Tag - Dennys Diary</description>
        <generator>Hugo -- gohugo.io</generator><language>en</language><copyright>This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.</copyright><lastBuildDate>Sat, 15 Jan 2022 00:00:00 &#43;0800</lastBuildDate><atom:link href="https://dennys.github.io/tags/checkmarx/" rel="self" type="application/rss+xml" /><item>
    <title>GitLab Checkmarx integration</title>
    <link>https://dennys.github.io/2022/01/gitlab-checkmarx-integration/</link>
    <pubDate>Sat, 15 Jan 2022 00:00:00 &#43;0800</pubDate>
    <author>Dennys</author>
    <guid>https://dennys.github.io/2022/01/gitlab-checkmarx-integration/</guid>
    <description><![CDATA[<p>
</p>
<h2 id="purpose">Purpose</h2>
<p>When we commit code to <a href="https://gitlab.com/" target="_blank" rel="noopener noreffer">GitLab</a>, we want GitLab sends the code to [Checkmarx] (<a href="https://checkmarx.com/" target="_blank" rel="noopener noreffer">https://checkmarx.com/</a>) to scan. (the next step is to integrate the scan result to SonarQube)</p>
<h2 id="procedure">Procedure</h2>
<p>You can reference official document: <a href="https://checkmarx.atlassian.net/wiki/spaces/SD/pages/1929937052/GitLab&#43;Integration" target="_blank" rel="noopener noreffer">https://checkmarx.atlassian.net/wiki/spaces/SD/pages/1929937052/GitLab+Integration</a></p></p>
<ol>
<li>Edit .gitlab-ci.yml</li>
</ol>
<!-- wp:code -->
<pre class="wp-block-code"><code>include: 'https://raw.githubusercontent.com/checkmarx-ltd/cx-flow/develop/templates/gitlab/v3/Checkmarx.gitlab-ci.yml'

variables:
    CX_PROJECT: ProjectXXX #The project name you want to show in Checkmarx
</code></pre>
<!-- /wp:code -->
<ol start="2">
<li>Edit GitLab CI/CD variables</li>
</ol>
<p>Please remember to set GITLAB_URL and GITLAB_TOKEN, then Checkmarx will create GitLab issue for Checkmarx issues.</p>
<p><a href="https://dennys.files.wordpress.com/2022/01/image-4.png"></a></p>
<ol start="3">
<li>Trigger build - Checkmarx analysis will be triggered when you create a merge request or you commit to master stream directly.</li>
</ol>
<p>Suggest to use pure English for CX_TEAM, if you use non English (ex: Chinese), you can check the log and find it cannot find the team.</p>
<pre><code>2022-01-12 02:51:22.748  INFO 11 --- [main] c.c.s.s.CxService [x4DNMhOL] : Found team /CxServer/Team1 with ID 16
</code></pre>
<p>During the analysis, you can check the status from Checkmarx, it takes long time to analyze.</p>
<p><a href="https://dennys.files.wordpress.com/2022/01/image-6.png"></a></p>
<p>After the analysis, you can check the result in Checkmarx.</p>
<p>You can also check it from GitLab, it generates 1 report in merge request and it will create issues by category. The following is the reqport of merge request.</p>
<p><a href="https://dennys.files.wordpress.com/2022/01/image-7.png"></a></p>
<p>In the above report, there are 5 issues, it will creates 5 issues by file/by category.</p>
<p><a href="https://dennys.files.wordpress.com/2022/01/image-8.png"></a></p>
<p>In the issue, it shows the detail vulnerability information.</p>
<p><a href="https://dennys.files.wordpress.com/2022/01/image-9.png"></a></p>
]]></description>
</item>
<item>
    <title>GitLab Checkmarx SonarQube integration</title>
    <link>https://dennys.github.io/2022/01/gitlab-checkmarx-sonarqube-integration/</link>
    <pubDate>Sat, 15 Jan 2022 00:00:00 &#43;0800</pubDate>
    <author>Dennys</author>
    <guid>https://dennys.github.io/2022/01/gitlab-checkmarx-sonarqube-integration/</guid>
    <description><![CDATA[<p>

</p>
<p>image.png</p>
<p>image.png</p>
<h2 id="purpose">Purpose</h2>
<p>When we commit code to <a href="https://gitlab.com/" target="_blank" rel="noopener noreffer">GitLab</a>, we want GitLab to trigger these actions automatically:</p>
<ol>
<li><a href="https://gitlab.com/" target="_blank" rel="noopener noreffer">GitLab</a> sends the code to <a href="https://checkmarx.com/" target="_blank" rel="noopener noreffer">Checkmarx</a> to scan.</li>
<li><a href="https://gitlab.com/" target="_blank" rel="noopener noreffer">GitLab</a> triggers <a href="https://www.sonarqube.org/" target="_blank" rel="noopener noreffer">SonarQube</a> to sacn.</li>
<li><a href="https://www.sonarqube.org/" target="_blank" rel="noopener noreffer">SonarQube</a> integrate <a href="https://checkmarx.com/" target="_blank" rel="noopener noreffer">Checkmarx</a>&rsquo;s report.</li>
</ol>
<h2 id="procedure">Procedure</h2>
<p>You can reference the official document: <a href="https://checkmarx.atlassian.net/wiki/spaces/SD/pages/169246832/SonarQube&#43;Plugin&#43;v8.5.0&#43;and&#43;up" target="_blank" rel="noopener noreffer">https://checkmarx.atlassian.net/wiki/spaces/SD/pages/169246832/SonarQube+Plugin+v8.5.0+and+up</a></p>
<ol>
<li>Download the plugin from <a href="https://checkmarx.com/plugins/">here</a>, it only supports SonarQube LTS version (for now, it&rsquo;s 8.x)</li>
<li>Configurea Quality Gate/Profiles of SonarQube for Checkmarx&rsquo;s rules.</li>
<li>Use GitLab to trigger Checkmarx scan and record the project name of Checkmarx.</li>
<li>Configure Checkmarx data in SonarQube, you can reference <a href="https://checkmarx.atlassian.net/wiki/spaces/SD/pages/169345207/Configuring+a+Project+for+the+Checkmarx+SonarQube+Plugin+v8.5.0+and+up">here</a>.</li>
<li>Trigger GitLab CI again, you will see the following log in your SonarQube job</li>
</ol>
<!-- wp:code -->
<pre class="wp-block-code"><code>INFO: Sensor Import Checkmarx scan results to SonarQube &#91;checkmarx]
INFO: Retrieving Checkmarx scan results for current module &#91;Checkmarx plugin version: 2021.2.1]
INFO: Getting Checkmarx configuration data from sonar Database.
INFO: Resolving Cx setting: checkmarx.server.project_name
INFO: Forced authentication is enabled: Sonar credentials must be provided
INFO: Sonar server token is provided
INFO: Checkmarx credentials migration not needed
INFO: Sonar server token is provided
INFO: Resolving Cx setting: checkmarx.server.project_name
INFO: Forced authentication is enabled: Sonar credentials must be provided
INFO: Checkmarx server version &#91;9.2.0.41015]. Hotfix &#91;24].
INFO: Logging into the Checkmarx service.
INFO: Connecting to https://your.checkmarx.server/
INFO: Initializing Cx client &#91;2020.2.4.NO.SCA]
INFO: Checkmarx server version &#91;9.2.0.41015]. Hotfix &#91;24].
INFO: Logging into the Checkmarx service.
INFO: full team path: \CxServer\\Team1
INFO: preset name: All
INFO: ---------------------------------Get Last CxSAST Results:--------------------------------
INFO: Waiting for server to generate xml report. 4990 seconds left to timeout
INFO: Checkmarx High vulnerabilities: 3
INFO: Checkmarx New-High vulnerabilities: 0
INFO: Checkmarx Medium vulnerabilities: 23
INFO: Checkmarx New-Medium vulnerabilities: 1
INFO: Checkmarx Low vulnerabilities: 142
INFO: Checkmarx New-Low vulnerabilities: 7
INFO: Checkmarx scan link: https://your.checkmarx.server//CxWebClient/ViewerMain.aspx?scanId=1000157&amp;ProjectID=67</code></pre>
<!-- /wp:code -->
<ol start="6">
<li>You can see the Checkmarx issues in SonarQube now.</li>
</ol>
]]></description>
</item>
</channel>
</rss>
