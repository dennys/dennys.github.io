[{"body":"Family :man::woman: :girl::girl::girl: Job :man_technologist:\nLike :dog: :cat:\nHave :rabbit: :rabbit2:\n","link":"https://dennys.github.io/en/about/","section":"","tags":null,"title":"About"},{"body":"","link":"https://dennys.github.io/en/tags/.net/","section":"tags","tags":null,"title":".NET"},{"body":"","link":"https://dennys.github.io/en/categories/","section":"categories","tags":null,"title":"Categories"},{"body":"","link":"https://dennys.github.io/en/","section":"","tags":null,"title":"Dennys Diary"},{"body":"","link":"https://dennys.github.io/en/categories/devops/","section":"categories","tags":null,"title":"DevOps"},{"body":"","link":"https://dennys.github.io/en/tags/gitlab/","section":"tags","tags":null,"title":"GitLab"},{"body":"","link":"https://dennys.github.io/en/categories/it/","section":"categories","tags":null,"title":"IT"},{"body":"","link":"https://dennys.github.io/en/posts/","section":"posts","tags":null,"title":"Posts"},{"body":"","link":"https://dennys.github.io/en/tags/","section":"tags","tags":null,"title":"Tags"},{"body":"Precondition You already have a GitLab (GitLab Saas or GitLab self managed). This document is for .NET 4.X, if you want to build .NET core or .NET 5/6/7/..., you can use docker to run GitLab Runner.\nStep 1 - Install Git client Download and install Git for Windows. Portable version is ok, but because Git Runner is a Windows service, please add git.exe into PATH.\nStep 2 - prepare .NET build environment Download and install Visual Studio. (Please let me know if I can build a .NET build environment without Visual Studio, thanks.)\nStep 3 - Install GitLab Runner Download GitLab Runner\nRename gitlab-runner-windows-amd64.exe to gitlab-runner.exe\nGet the token to run GitLab Runner Generate GitLab Runner configuration file (config.toml)\nRun the command 1gitlab-runner.exe register --url https://gitlab.com/ --registration-token $REGISTRATION_TOKEN Modify config.toml\nBecause Gitlab Runner doesn't suppoer Windows shell after version 13, you need to use PowerShell. If you use Power Shell, please open config.toml and rename 'pwsh' to 'powershell'. (If you use Power Shell Core, you don't need to do anything) If you use a portable Git, you need to modify $env:Path of PowerShell. If you find your log is garbled (ex: your Windows server is not English version), please add chcp 65001 to change the encoding to UTF-8. Register GitLab Runner as a Windows service and start it.\nRun the command gitlab-runner install to install as a Windows service. Run the command gitlab-runner start to start the service. config.toml sample =\u0026gt; remember, if you modify the file, please execute gitlab-runner.exe restart to restart GitLab runner.\n1concurrent = 1 2check_interval = 0 3 4[session_server] 5 session_timeout = 1800 6 7[[runners]] 8 name = \u0026#34;GitLab Runner 007\u0026#34; 9 url = \u0026#34;https://gitlab.com/\u0026#34; 10 token = \u0026#34;******************\u0026#34; 11 executor = \u0026#34;shell\u0026#34; 12 shell = \u0026#34;powershell\u0026#34; 13 pre_clone_script = \u0026#34;\u0026#34;\u0026#34; 14 chcp 65001 15 $env:Path += \u0026#34;;C:\\\\Gitlab\\\\PortableGit\\\\cmd\u0026#34; 16 \u0026#34;\u0026#34;\u0026#34; 17 [runners.custom_build_dir] 18 [runners.cache] 19 [runners.cache.s3] 20 [runners.cache.gcs] 21 [runners.cache.azure] If you always see the Credential Helper Selector, please choose \u0026quot;no helper\u0026quot; and \u0026quot;Always use this from now on\u0026quot;.\nStep 4 - Write .gitlab-ci.yml Edit .gitlab-ci.yml, the following is a sample: 1stages: 2 - build 3 - test 4 5build: 6 stage: build 7 script: 8 - \u0026#34;dotnet build\u0026#34; 9 artifacts: 10 paths: 11 - .\\test 12 13test: 14 stage: test 15 script: 16 - \u0026#34;dotnet test\u0026#34; Step 5 - Start to build/test/deploy code (local machine) Change directory to the location of .gitlab-ci.yml and execute this command\n1gitlab-runner.exe exec shell build Step 6 - Start to test CI/CD (local machine) If everything is ok, you can commit .gitlab-ci.yml and GitLab should run it automatically.\nSAST (Static Application Security Testing) GitLab can check your source code for known vulnerabilities, unfortunately, it only support Linux container, Windows containers are not yet supported. (reference: https://docs.gitlab.com/ee/user/application_security/sast/)\n","link":"https://dennys.github.io/en/posts/202203/gitlab-dotnet4-ci-cd/","section":"posts","tags":["GitLab",".NET","CI/CD"],"title":"Use GitLab to do .NET 4.X CI/CD"},{"body":"","link":"https://dennys.github.io/en/tags/ifttt/","section":"tags","tags":null,"title":"IFTTT"},{"body":"Requirement I want to have a daily mail including currency exchange rate information.\nMail subject: include the exchange rate in the mail subject. Mail content: Has some links to banks' exchange rate page. Include some exchange rate history chart. Solution Use ifttt.com\nCreate a new Applet on IFTTT Add a new \u0026quot;If This\u0026quot; Choose \u0026quot;finance\u0026quot; service Choose \u0026quot;Today's exchange rate report\u0026quot; Choose the input/output currency and trigger time. Add a new \u0026quot;Then That\u0026quot; Choose a \u0026quot;gmail\u0026quot; service If you just want to send yourself an email, you can click the right button. If you want to send to several recipients, you can click left button. This is an example to send your self an email. 9.1 This is my email body\nAs of {{CheckTime}}, 1 {{InputCurrency}} equals {{ExchangeRate}} {{OutputCurrency}}.\u0026lt;br\u0026gt;\r\u0026lt;br\u0026gt;\rvia {{InfoUrl}}\r\u0026lt;b\u0026gt;美元匯率:\u0026lt;/b\u0026gt;\r\u0026lt;ul\u0026gt;\u0026lt;li\u0026gt;\r\u0026lt;a href=\"https://rate.bot.com.tw/xrt?Lang=zh-TW\"\u0026gt;即時\u0026lt;/a\u0026gt;(台銀)\u0026amp;nbsp;\r\u0026lt;a href=\"https://rate.bot.com.tw/xrt/quote/day/USD\"\u0026gt;當日\u0026lt;/a\u0026gt;(台銀)\u0026amp;nbsp;\r\u0026lt;a href=\"https://www.xe.com/currencycharts/?from=USD\u0026amp;to=TWD\u0026amp;view=1W\"\u0026gt;1周\u0026lt;/a\u0026gt;(XE)\u0026amp;nbsp;\r\u0026lt;a href=\"https://www.xe.com/currencycharts/?from=USD\u0026amp;to=TWD\u0026amp;view=1M\"\u0026gt;1個月\u0026lt;/a\u0026gt;(XE)\u0026amp;nbsp;\r\u0026lt;a href=\"https://rate.bot.com.tw/xrt/quote/ltm/USD\"\u0026gt;3個月\u0026lt;/a\u0026gt;(台銀)\u0026amp;nbsp;\r\u0026lt;a href=\"https://rate.bot.com.tw/xrt/quote/l6m/USD\"\u0026gt;6個月\u0026lt;/a\u0026gt;(台銀)\r\u0026lt;/li\u0026gt;\u0026lt;li\u0026gt;\r\u0026lt;a href=\"https://rate.bot.com.tw/xrt/quote/l1y/USD\"\u0026gt;1年\u0026lt;/a\u0026gt;(台銀)\u0026amp;nbsp;\r\u0026lt;a href=\"https://www.esunbank.com.tw/bank/personal/deposit/rate/forex/exchange-rate-chart?Currency=USD/TWD\"\u0026gt;1年\u0026lt;/a\u0026gt;(玉山)\u0026amp;nbsp;\r\u0026lt;a href=\"https://www.xe.com/currencycharts/?from=USD\u0026amp;to=TWD\u0026amp;view=1Y\"\u0026gt;1年\u0026lt;/a\u0026gt;(XE)\u0026amp;nbsp;\r\u0026lt;a href=\"https://rate.bot.com.tw/xrt/quote/l3y/USD\"\u0026gt;3年\u0026lt;/a\u0026gt;(台銀)\u0026amp;nbsp;\r\u0026lt;a href=\"https://www.xe.com/currencycharts/?from=USD\u0026amp;to=TWD\u0026amp;view=5Y\"\u0026gt;5年\u0026lt;/a\u0026gt;(XE)\u0026amp;nbsp;\r\u0026lt;a href=\"https://www.xe.com/currencycharts/?from=USD\u0026amp;to=TWD\u0026amp;view=10Y\"\u0026gt;10年\u0026lt;/a\u0026gt;(XE)\u0026amp;nbsp;\r\u0026lt;a href=\"https://fxtop.com/en/historical-exchange-rates.php?A=1\u0026amp;C1=USD\u0026amp;C2=TWD\u0026amp;DD1=\u0026amp;MM1=\u0026amp;YYYY1=\u0026amp;B=1\u0026amp;P=\u0026amp;I=1\u0026amp;DD2=03\u0026amp;MM2=03\u0026amp;YYYY2=2099\u0026amp;btnOK=Go%21\"\u0026gt;1983~現在\u0026lt;/a\u0026gt;(FXTOP)\u0026amp;nbsp;\r\u0026lt;/li\u0026gt;\u0026lt;li\u0026gt;\r\u0026lt;a href=\"https://historical.findrate.tw/USD/\"\u0026gt;1個月+1年+10年\u0026lt;/a\u0026gt;(FindRate)\r\u0026lt;/li\u0026gt;\u0026lt;/ul\u0026gt;\u0026lt;br/\u0026gt;\r\u0026lt;b\u0026gt;2022/1/1~2022/12/31:\u0026lt;/b\u0026gt;\u0026lt;br/\u0026gt;\r\u0026lt;img src=\"https://fxtop.com/php/imggraph.php?C1=USD\u0026amp;C2=TWD\u0026amp;A=1\u0026amp;DD1=\u0026amp;MM1=01\u0026amp;YYYY1=2022\u0026amp;DD2=\u0026amp;MM2=12\u0026amp;YYYY2=2022\u0026amp;LANG=en\u0026amp;CJ=0\u0026amp;MM1Y=1\u0026amp;LARGE=\u0026amp;TR=OFF\"\u0026gt;\u0026lt;br/\u0026gt;\r\u0026lt;b\u0026gt;2021/1/1~2022/12/31:\u0026lt;/b\u0026gt;\u0026lt;br/\u0026gt;\r\u0026lt;img src=\"https://fxtop.com/php/imggraph.php?C1=USD\u0026amp;C2=TWD\u0026amp;A=1\u0026amp;DD1=\u0026amp;MM1=01\u0026amp;YYYY1=2021\u0026amp;DD2=\u0026amp;MM2=12\u0026amp;YYYY2=2022\u0026amp;LANG=en\u0026amp;CJ=0\u0026amp;MM1Y=1\u0026amp;LARGE=\u0026amp;TR=OFF\"\u0026gt;\u0026lt;br/\u0026gt;\r\u0026lt;b\u0026gt;2020/1/1~2022/12/31:\u0026lt;/b\u0026gt;\u0026lt;br/\u0026gt;\r\u0026lt;img src=\"https://fxtop.com/php/imggraph.php?C1=USD\u0026amp;C2=TWD\u0026amp;A=1\u0026amp;DD1=\u0026amp;MM1=01\u0026amp;YYYY1=2020\u0026amp;DD2=\u0026amp;MM2=12\u0026amp;YYYY2=2022\u0026amp;LANG=en\u0026amp;CJ=0\u0026amp;MM1Y=1\u0026amp;LARGE=\u0026amp;TR=OFF\"\u0026gt;\u0026lt;br/\u0026gt;\r\u0026lt;b\u0026gt;2000/1/1~2022/12/31:\u0026lt;/b\u0026gt;\u0026lt;br/\u0026gt;\r\u0026lt;img src=\"https://fxtop.com/php/imggraph.php?C1=USD\u0026amp;C2=TWD\u0026amp;A=1\u0026amp;DD1=\u0026amp;MM1=01\u0026amp;YYYY1=2000\u0026amp;DD2=\u0026amp;MM2=12\u0026amp;YYYY2=2022\u0026amp;LANG=en\u0026amp;CJ=0\u0026amp;MM1Y=1\u0026amp;LARGE=\u0026amp;TR=OFF\"\u0026gt;\u0026lt;br/\u0026gt;\rMail result IFTTT applet location This is my IFTTT applet: https://ifttt.com/applets/SxPJ2fpv-\nAbout the exchange rate history chart I only find 2 websites provides exchange rate chart to embed in the mail content.\nhttps://fxtop.com/, it provides PNG format chart, I already include it in my IFTTT applet. https://www.currencyconverterrate.com/, it provides SVG format chart (ex: https://www.currencyconverterrate.com/currencycharts/usd/usd-twd-exchange-rates-history-chart-7-day.svg), but I cannot find a solution to show SVG in gmail. If you find a solution, please let me know, thanks. ","link":"https://dennys.github.io/en/posts/202203/use-ifttt-to-send-currency-exchange-rate-mail-daily/","section":"posts","tags":["IFTTT"],"title":"Use IFTTT to send currency exchange rate mail daily"},{"body":"Requirement I want to have a daily mail including currency exchange rate information.\nSolution use https://wise.com (no need to register an account)\nConnect to https://wise.com/tools/exchange-rate-alerts/ Input the currency exchange rate you want to know and your email address. Mail result You will receive the mail daily.\n","link":"https://dennys.github.io/en/posts/202203/use-wise-to-send-currency-exchange-rate-mail-daily/","section":"posts","tags":[],"title":"Use WISE to send currency exchange rate mail daily"},{"body":"","link":"https://dennys.github.io/en/tags/checkmarx/","section":"tags","tags":null,"title":"Checkmarx"},{"body":"\rPurpose When we commit code to GitLab, we want GitLab sends the code to Checkmarx to scan. (the next step is to integrate the scan result to SonarQube)\nProcedure You can reference official document: https://checkmarx.atlassian.net/wiki/spaces/SD/pages/1929937052/GitLab+Integration\nEdit .gitlab-ci.yml 1include: \u0026#39;https://raw.githubusercontent.com/checkmarx-ltd/cx-flow/develop/templates/gitlab/v3/Checkmarx.gitlab-ci.yml\u0026#39; 2 3variables: 4 CX_PROJECT: ProjectXXX #The project name you want to show in Checkmarx Edit GitLab CI/CD variables Please remember to set GITLAB_URL and GITLAB_TOKEN, then Checkmarx will create GitLab issue for Checkmarx issues.\nTrigger build - Checkmarx analysis will be triggered when you create a merge request or you commit to master stream directly. Suggest to use pure English for CX_TEAM, if you use non English (ex: Chinese), you can check the log and find it cannot find the team.\n12022-01-12 02:51:22.748 INFO 11 --- [main] c.c.s.s.CxService [x4DNMhOL] : Found team /CxServer/Team1 with ID 16 During the analysis, you can check the status from Checkmarx, it takes long time to analyze.\nAfter the analysis, you can check the result in Checkmarx.\nYou can also check it from GitLab, it generates 1 report in merge request and it will create issues by category. The following is the reqport of merge request.\nIn the above report, there are 5 issues, it will creates 5 issues by file/by category.\nIn the issue, it shows the detail vulnerability information.\n","link":"https://dennys.github.io/en/posts/202201/gitlab-checkmarx-integration/","section":"posts","tags":["GitLab","Checkmarx"],"title":"GitLab Checkmarx integration"},{"body":"\rPurpose When we commit code to GitLab, we want GitLab to trigger these actions automatically:\nGitLab sends the code to Checkmarx to scan. GitLab triggers SonarQube to sacn. SonarQube integrate Checkmarx's report. Procedure You can reference the official document: https://checkmarx.atlassian.net/wiki/spaces/SD/pages/169246832/SonarQube+Plugin+v8.5.0+and+up\nDownload the plugin from here, it only supports SonarQube LTS version (for now, it's 8.x) Configurea Quality Gate/Profiles of SonarQube for Checkmarx's rules. Use GitLab to trigger Checkmarx scan and record the project name of Checkmarx. Configure Checkmarx data in SonarQube, you can reference here. Trigger GitLab CI again, you will see the following log in your SonarQube job 1INFO: Sensor Import Checkmarx scan results to SonarQube [checkmarx] 2INFO: Retrieving Checkmarx scan results for current module [Checkmarx plugin version: 2021.2.1] 3INFO: Getting Checkmarx configuration data from sonar Database. 4INFO: Resolving Cx setting: checkmarx.server.project_name 5INFO: Forced authentication is enabled: Sonar credentials must be provided 6INFO: Sonar server token is provided 7INFO: Checkmarx credentials migration not needed 8INFO: Sonar server token is provided 9INFO: Resolving Cx setting: checkmarx.server.project_name 10INFO: Forced authentication is enabled: Sonar credentials must be provided 11INFO: Checkmarx server version [9.2.0.41015]. Hotfix [24]. 12INFO: Logging into the Checkmarx service. 13INFO: Connecting to https://your.checkmarx.server/ 14INFO: Initializing Cx client [2020.2.4.NO.SCA] 15INFO: Checkmarx server version [9.2.0.41015]. Hotfix [24]. 16INFO: Logging into the Checkmarx service. 17INFO: full team path: \\CxServer\\\\Team1 18INFO: preset name: All 19INFO: ---------------------------------Get Last CxSAST Results:-------------------------------- 20INFO: Waiting for server to generate xml report. 4990 seconds left to timeout 21INFO: Checkmarx High vulnerabilities: 3 22INFO: Checkmarx New-High vulnerabilities: 0 23INFO: Checkmarx Medium vulnerabilities: 23 24INFO: Checkmarx New-Medium vulnerabilities: 1 25INFO: Checkmarx Low vulnerabilities: 142 26INFO: Checkmarx New-Low vulnerabilities: 7 27INFO: Checkmarx scan link: https://your.checkmarx.server//CxWebClient/ViewerMain.aspx?scanId=1000157\u0026amp;ProjectID=67 You can see the Checkmarx issues in SonarQube now. ","link":"https://dennys.github.io/en/posts/202201/gitlab-checkmarx-sonarqube-integration/","section":"posts","tags":["GitLab","Checkmarx","SonarQube"],"title":"GitLab Checkmarx SonarQube integration"},{"body":"","link":"https://dennys.github.io/en/tags/sonarqube/","section":"tags","tags":null,"title":"SonarQube"},{"body":"","link":"https://dennys.github.io/en/tags/ci/cd/","section":"tags","tags":null,"title":"CI/CD"},{"body":"","link":"https://dennys.github.io/en/series/","section":"series","tags":null,"title":"Series"}]