[{"body":"This site uses Utterances to manage comments. If you want to contact me, you can leave a message here. Because Utterances is based on GitHub, you need to login GitHub, thanks.\n","link":"https://dennys.github.io/en/comments/","section":"","tags":null,"title":"Comments"},{"body":"Family üëÄ\nüë®üë© üëßüëßüëß Job üë®‚Äçüíª\nLike üê∂ üê±\nHave üê∞ üêá\n","link":"https://dennys.github.io/en/about/","section":"","tags":null,"title":"About"},{"body":"","link":"https://dennys.github.io/en/categories/","section":"categories","tags":null,"title":"Categories"},{"body":"","link":"https://dennys.github.io/en/","section":"","tags":null,"title":"Dennys Diary"},{"body":"","link":"https://dennys.github.io/en/categories/devops/","section":"categories","tags":null,"title":"DevOps"},{"body":"","link":"https://dennys.github.io/en/doc/","section":"doc","tags":null,"title":"Docs"},{"body":"","link":"https://dennys.github.io/en/tags/dotnet/","section":"tags","tags":null,"title":"dotNET"},{"body":"","link":"https://dennys.github.io/en/tags/gitlab/","section":"tags","tags":null,"title":"GitLab"},{"body":"","link":"https://dennys.github.io/en/categories/it/","section":"categories","tags":null,"title":"IT"},{"body":"","link":"https://dennys.github.io/en/tags/","section":"tags","tags":null,"title":"Tags"},{"body":"\rRemind\rThis is for .NET 4.8 or below only!!\rPrecondition You already have a GitLab (GitLab Saas or GitLab self managed). This document is for .NET 4.X, if you want to build .NET core or .NET 5/6/7/..., you can use docker to run GitLab Runner.\nProcedure Step 1 - Prepare .NET build environment First, you need to prepare an environment to build .NET application. The easiest solution is to install Visual Studio. (Please let me know if I can build a .NET build environment without Visual Studio, thanks.) But it's strange, MSBuild.exe is not included in PATH after the installatioin. Please put C:\\Program Files\\Microsoft Visual Studio\\2022\\Community\\MSBuild\\Current\\Bin into your PATH. Step 2 - Install Git client Download and install Git for Windows. Portable version is ok, but because Git Runner is a Windows service, please add git.exe into PATH.\nStep 3 - Install GitLab Runner Download GitLab Runner for Windows.\nRename gitlab-runner-windows-amd64.exe to gitlab-runner.exe.\nGet the token to run GitLab Runner.\nGenerate GitLab Runner configuration file (config.toml) and run the command to register.\n1gitlab-runner.exe register --url https://gitlab.com/ --registration-token $REGISTRATION_TOKEN Modify config.toml\nBecause Gitlab Runner doesn't suppoer Windows shell after version 13, you need to use PowerShell, you have 2 options: If you use Power Shell, please open config.toml and rename 'pwsh' to 'powershell'. If you use Power Shell Core, you don't need to do anything. If you find your log is garbled (ex: your Windows server is not English version), please add chcp 65001 to change the encoding to UTF-8. If you use a portable Git, you need to modify $env:Path in config.toml. (comment line 7 and uncomment line 8) 1[[runners]] 2name = \u0026#34;Windows Runner 01 (not docker)\u0026#34; 3url = \u0026#34;https://gitlab.com/\u0026#34; 4token = \u0026#34;******************\u0026#34; 5executor = \u0026#34;shell\u0026#34; 6shell = \u0026#34;powershell\u0026#34; 7pre_clone_script = \u0026#34; chcp 65001\\n $OutputEncoding = [console]::InputEncoding = [console]::OutputEncoding = New-Object System.Text.UTF8Encoding\\n \u0026#34; 8# pre_clone_script = \u0026#34; chcp 65001\\n $env:Path = \\\u0026#34;C:\\\\Gitlab\\\\PortableGit\\\\cmd;$env:Path\\\u0026#34;\\n\\t $OutputEncoding = [console]::InputEncoding = [console]::OutputEncoding = New-Object System.Text.UTF8Encoding\\n \u0026#34; 9pre_build_script = \u0026#34; chcp 65001\\n \u0026#34; 10[runners.custom_build_dir] 11[runners.cache] 12 [runners.cache.s3] 13 [runners.cache.gcs] 14 [runners.cache.azure] Register GitLab Runner as a Windows service and start it.\nRun the command gitlab-runner install to install as a Windows service. Run the command gitlab-runner start to start the service. remember, if you modify the file, please execute gitlab-runner.exe restart to restart GitLab runner.\nIf you always see the Credential Helper Selector, please choose \u0026quot;no helper\u0026quot; and \u0026quot;Always use this from now on\u0026quot;.\nStep 4 - Write .gitlab-ci.yml Edit .gitlab-ci.yml, the following is a sample: 1stages: 2 - build 3 - test 4build: 5 stage: build 6 script: 7 - \u0026#34;dotnet build\u0026#34; 8 artifacts: 9 paths: 10 - .\\test 11test: 12 stage: test 13 script: 14 - \u0026#34;dotnet test\u0026#34; Step 5 - Start to build/test/deploy code (on local machine) Before you start to run CI/CD on your GitLab, you can try it in your local machine. It's easier to debug in local environment. Please change directory to the location of .gitlab-ci.yml and execute this command. 1C:\\Gitlab\\builds\\j5AFD9Qz\\0\\gis\\commission_moi_dtm\u0026gt; gitlab-runner.exe exec shell build 2Runtime platform arch=amd64 os=windows pid=13728 revision=e91107dd version=14.5.2 3Running with gitlab-runner 14.5.2 (e91107dd) 4Preparing the \u0026#34;shell\u0026#34; executor 5Using Shell executor... 6executor not supported job=1 project=0 referee=metrics 7Preparing environment 8Running on GITRUNNER01... 9DEPRECATION: CMD shell is deprecated and will no longer be supported 10Getting source from Git repository 11Fetching changes... 12Initialized empty Git repository in C:/Gitlab/builds/j5AFD9Qz/0/gis/**********/builds/0/project-0/.git/ 13Created fresh repository. 14Checking out 1ff057d4 as HEAD... 15... Step 6 - Start to test CI/CD (on GitLab) If everything is ok, you can commit .gitlab-ci.yml and GitLab should run it automatically.\nSAST (Static Application Security Testing) GitLab can check your source code for known vulnerabilities, unfortunately, it only support Linux container, Windows containers are not yet supported. (reference: https://docs.gitlab.com/ee/user/application_security/sast/)\n","link":"https://dennys.github.io/en/doc/devops/gitlab-dotnet4-ci-cd/","section":"doc","tags":["GitLab","dotNET","CI/CD"],"title":"Use GitLab to do .NET 4.8 CI/CD"},{"body":"","link":"https://dennys.github.io/en/tags/ifttt/","section":"tags","tags":null,"title":"IFTTT"},{"body":"","link":"https://dennys.github.io/en/tags/software/","section":"tags","tags":null,"title":"Software"},{"body":"Requirement I want to have a daily mail including currency exchange rate information.\nMail subject: include the exchange rate in the mail subject. Mail content: Has some links to banks' exchange rate page. Include some exchange rate history chart. Solution Use ifttt.com\nCreate a new Applet on IFTTT\nAdd a new \u0026quot;If This\u0026quot;\nChoose \u0026quot;finance\u0026quot; service\nChoose \u0026quot;Today's exchange rate report\u0026quot;\nChoose the input/output currency and trigger time.\nAdd a new \u0026quot;Then That\u0026quot;\nChoose a \u0026quot;gmail\u0026quot; service\nIf you just want to send yourself an email, you can click the right button. If you want to send to several recipients, you can click left button.\nThis is an example to send your self an email.\nThis is my email body\n1As of {{CheckTime}}, 1 {{InputCurrency}} equals {{ExchangeRate}} {{OutputCurrency}}.\u0026lt;br\u0026gt; 2\u0026lt;br\u0026gt; 3via {{InfoUrl}} 4 5\u0026lt;b\u0026gt;ÁæéÂÖÉÂåØÁéá:\u0026lt;/b\u0026gt; 6\u0026lt;ul\u0026gt;\u0026lt;li\u0026gt; 7\u0026lt;a href=\u0026#34;https://rate.bot.com.tw/xrt?Lang=zh-TW\u0026#34;\u0026gt;Âç≥ÊôÇ\u0026lt;/a\u0026gt;(Âè∞ÈäÄ)\u0026amp;nbsp; 8\u0026lt;a href=\u0026#34;https://rate.bot.com.tw/xrt/quote/day/USD\u0026#34;\u0026gt;Áï∂Êó•\u0026lt;/a\u0026gt;(Âè∞ÈäÄ)\u0026amp;nbsp; 9\u0026lt;a href=\u0026#34;https://www.xe.com/currencycharts/?from=USD\u0026amp;to=TWD\u0026amp;view=1W\u0026#34;\u0026gt;1Âë®\u0026lt;/a\u0026gt;(XE)\u0026amp;nbsp; 10\u0026lt;a href=\u0026#34;https://www.xe.com/currencycharts/?from=USD\u0026amp;to=TWD\u0026amp;view=1M\u0026#34;\u0026gt;1ÂÄãÊúà\u0026lt;/a\u0026gt;(XE)\u0026amp;nbsp; 11\u0026lt;a href=\u0026#34;https://rate.bot.com.tw/xrt/quote/ltm/USD\u0026#34;\u0026gt;3ÂÄãÊúà\u0026lt;/a\u0026gt;(Âè∞ÈäÄ)\u0026amp;nbsp; 12\u0026lt;a href=\u0026#34;https://rate.bot.com.tw/xrt/quote/l6m/USD\u0026#34;\u0026gt;6ÂÄãÊúà\u0026lt;/a\u0026gt;(Âè∞ÈäÄ) 13\u0026lt;/li\u0026gt;\u0026lt;li\u0026gt; 14\u0026lt;a href=\u0026#34;https://rate.bot.com.tw/xrt/quote/l1y/USD\u0026#34;\u0026gt;1Âπ¥\u0026lt;/a\u0026gt;(Âè∞ÈäÄ)\u0026amp;nbsp; 15\u0026lt;a href=\u0026#34;https://www.esunbank.com.tw/bank/personal/deposit/rate/forex/exchange-rate-chart?Currency=USD/TWD\u0026#34;\u0026gt;1Âπ¥\u0026lt;/a\u0026gt;(ÁéâÂ±±)\u0026amp;nbsp; 16\u0026lt;a href=\u0026#34;https://www.xe.com/currencycharts/?from=USD\u0026amp;to=TWD\u0026amp;view=1Y\u0026#34;\u0026gt;1Âπ¥\u0026lt;/a\u0026gt;(XE)\u0026amp;nbsp; 17\u0026lt;a href=\u0026#34;https://rate.bot.com.tw/xrt/quote/l3y/USD\u0026#34;\u0026gt;3Âπ¥\u0026lt;/a\u0026gt;(Âè∞ÈäÄ)\u0026amp;nbsp; 18\u0026lt;a href=\u0026#34;https://www.xe.com/currencycharts/?from=USD\u0026amp;to=TWD\u0026amp;view=5Y\u0026#34;\u0026gt;5Âπ¥\u0026lt;/a\u0026gt;(XE)\u0026amp;nbsp; 19\u0026lt;a href=\u0026#34;https://www.xe.com/currencycharts/?from=USD\u0026amp;to=TWD\u0026amp;view=10Y\u0026#34;\u0026gt;10Âπ¥\u0026lt;/a\u0026gt;(XE)\u0026amp;nbsp; 20\u0026lt;a href=\u0026#34;https://fxtop.com/en/historical-exchange-rates.php?A=1\u0026amp;C1=USD\u0026amp;C2=TWD\u0026amp;DD1=\u0026amp;MM1=\u0026amp;YYYY1=\u0026amp;B=1\u0026amp;P=\u0026amp;I=1\u0026amp;DD2=03\u0026amp;MM2=03\u0026amp;YYYY2=2099\u0026amp;btnOK=Go%21\u0026#34;\u0026gt;1983~ÁèæÂú®\u0026lt;/a\u0026gt;(FXTOP)\u0026amp;nbsp; 21\u0026lt;/li\u0026gt;\u0026lt;li\u0026gt; 22\u0026lt;a href=\u0026#34;https://historical.findrate.tw/USD/\u0026#34;\u0026gt;1ÂÄãÊúà+1Âπ¥+10Âπ¥\u0026lt;/a\u0026gt;(FindRate) 23\u0026lt;/li\u0026gt;\u0026lt;/ul\u0026gt;\u0026lt;br/\u0026gt; 24 25\u0026lt;b\u0026gt;2022/1/1~2022/12/31:\u0026lt;/b\u0026gt;\u0026lt;br/\u0026gt; 26\u0026lt;img src=\u0026#34;https://fxtop.com/php/imggraph.php?C1=USD\u0026amp;C2=TWD\u0026amp;A=1\u0026amp;DD1=\u0026amp;MM1=01\u0026amp;YYYY1=2022\u0026amp;DD2=\u0026amp;MM2=12\u0026amp;YYYY2=2022\u0026amp;LANG=en\u0026amp;CJ=0\u0026amp;MM1Y=1\u0026amp;LARGE=\u0026amp;TR=OFF\u0026#34;\u0026gt;\u0026lt;br/\u0026gt; 27\u0026lt;b\u0026gt;2021/1/1~2022/12/31:\u0026lt;/b\u0026gt;\u0026lt;br/\u0026gt; 28\u0026lt;img src=\u0026#34;https://fxtop.com/php/imggraph.php?C1=USD\u0026amp;C2=TWD\u0026amp;A=1\u0026amp;DD1=\u0026amp;MM1=01\u0026amp;YYYY1=2021\u0026amp;DD2=\u0026amp;MM2=12\u0026amp;YYYY2=2022\u0026amp;LANG=en\u0026amp;CJ=0\u0026amp;MM1Y=1\u0026amp;LARGE=\u0026amp;TR=OFF\u0026#34;\u0026gt;\u0026lt;br/\u0026gt; 29\u0026lt;b\u0026gt;2020/1/1~2022/12/31:\u0026lt;/b\u0026gt;\u0026lt;br/\u0026gt; 30\u0026lt;img src=\u0026#34;https://fxtop.com/php/imggraph.php?C1=USD\u0026amp;C2=TWD\u0026amp;A=1\u0026amp;DD1=\u0026amp;MM1=01\u0026amp;YYYY1=2020\u0026amp;DD2=\u0026amp;MM2=12\u0026amp;YYYY2=2022\u0026amp;LANG=en\u0026amp;CJ=0\u0026amp;MM1Y=1\u0026amp;LARGE=\u0026amp;TR=OFF\u0026#34;\u0026gt;\u0026lt;br/\u0026gt; 31\u0026lt;b\u0026gt;2000/1/1~2022/12/31:\u0026lt;/b\u0026gt;\u0026lt;br/\u0026gt; 32\u0026lt;img src=\u0026#34;https://fxtop.com/php/imggraph.php?C1=USD\u0026amp;C2=TWD\u0026amp;A=1\u0026amp;DD1=\u0026amp;MM1=01\u0026amp;YYYY1=2000\u0026amp;DD2=\u0026amp;MM2=12\u0026amp;YYYY2=2022\u0026amp;LANG=en\u0026amp;CJ=0\u0026amp;MM1Y=1\u0026amp;LARGE=\u0026amp;TR=OFF\u0026#34;\u0026gt;\u0026lt;br/ Mail sample IFTTT applet location This is my IFTTT applet: https://ifttt.com/applets/SxPJ2fpv-\nAbout the exchange rate history chart I only find 2 websites provides exchange rate chart to embed in the mail content.\nhttps://fxtop.com/, it provides PNG format chart, I already include it in my IFTTT applet. https://www.currencyconverterrate.com/, it provides SVG format chart (ex: https://www.currencyconverterrate.com/currencycharts/usd/usd-twd-exchange-rates-history-chart-7-day.svg), but I cannot find a solution to show SVG in gmail. If you find a solution, please let me know, thanks. ","link":"https://dennys.github.io/en/doc/ifttt/ifttt-send-currency-exchange-rate-mail/","section":"doc","tags":["IFTTT"],"title":"Use IFTTT to send currency exchange rate mail daily"},{"body":"Requirement I want to have a daily mail including currency exchange rate information.\nSolution use https://wise.com (no need to register an account)\nConnect to https://wise.com/tools/exchange-rate-alerts/ Input the currency exchange rate you want to know and your email address. Mail result You will receive the mail daily.\n","link":"https://dennys.github.io/en/doc/software/wise-send-currency-exchange-rate-mail/","section":"doc","tags":["Software"],"title":"Use WISE to send currency exchange rate mail daily"},{"body":"","link":"https://dennys.github.io/en/tags/checkmarx/","section":"tags","tags":null,"title":"Checkmarx"},{"body":"\rPurpose Checkmarx is a good tool to do code analysis, but there are 2 pain points during the flow.\nCheckmarx can integrate SCM like GitHub/GitLab/..., but it cannot be triggered by by a code commit, it can only schedule the job to run the scan. (If I don't commit code, I don't want to waste resource to scan the code.) Checkmarx has a build-in issue tracking system, but I think most people prefer to use their issue tracking system in their Git or JIRA or ... What we want is to integrate Checkmarx scan into GitLab's CI/CD flow including\nWhen we commit code to GitLab, it will trigger Checkmarx to scan automatically. After the scan, Checkmarx will create issues in GitLab. Procedure GitLab admin configuration You need to set some global variables in GitLab CI/CD admin (Menu-\u0026gt;Admin-\u0026gt;Settings-\u0026gt;CI/CD-\u0026gt;Variables). You need to set CHECKMARX_XXX and CX_TEAM variables to integrate Checkmarx. And if you want Checkmarx to create GitLab issue, please also set GITLAB_URL and GITLAB_TOKEN. (You can reference here for the detail) GitLab project configuration It's very easy to enable Checkmarx analysis in your GitLab jobs, you just need to edit your .gitlab-ci.yml and to include Checkmarx's yml into it (line 1). And you also need to assign the Checkmarx's project name in this yml file (line 4).\n1include: \u0026#39;https://raw.githubusercontent.com/checkmarx-ltd/cx-flow/develop/templates/gitlab/v3/Checkmarx.gitlab-ci.yml\u0026#39; 2 3variables: 4 CX_PROJECT: ProjectXXX #The project name you want to show in Checkmarx Then you can try to commit code to trigger a CI/CD flow, Checkmarx analysis will be triggered in 2 conditions:\nWhen you create a merge request in GitLab. When you commit code to master stream directly. The following is a log sample, please check line 20, you can see the variables you defined in GitLab.\n1Running with gitlab-runner 14.5.2 (e91107dd) 2 on Runner in PC vYY9jCrR 3Preparing the \u0026#34;docker\u0026#34; executor 400:06 5Using Docker executor with image checkmarx/cx-flow ... 6Pulling docker image checkmarx/cx-flow ... 7Using docker image sha256:22f48d49aa64275d09b1650c359c0a9b1ab9fa771efa01fba4af89f511b93481 for checkmarx/cx-flow with digest checkmarx/cx-flow@sha256:2b2a2f09680e6c3ba21b00cf8ab4005baa133f0eeeaeb406f09b01a832fffb67 ... 8Preparing environment 900:01 10Running on runner-vyy9jcrr-project-33-concurrent-0 via 435566b8ed7c... 11Getting source from Git repository 1200:14 13Fetching changes... 14 15...... 16 17 18Executing \u0026#34;step_script\u0026#34; stage of the job script 19Using docker image sha256:22f48d49aa64275d09b1650c359c0a9b1ab9fa771efa01fba4af89f511b93481 for checkmarx/cx-flow with digest checkmarx/cx-flow@sha256:2b2a2f09680e6c3ba21b00cf8ab4005baa133f0eeeaeb406f09b01a832fffb67 ... 20$ ${CX_FLOW_EXE} --scan --app=\u0026#34;${CI_PROJECT_NAME}\u0026#34; --namespace=\u0026#34;${CI_PROJECT_NAMESPACE}\u0026#34; --repo-name=\u0026#34;${CI_PROJECT_NAME}\u0026#34; --repo-url=\u0026#34;${CI_REPOSITORY_URL}\u0026#34; --cx-team=\u0026#34;${CX_TEAM}\u0026#34; --cx-project=\u0026#34;${CX_PROJECT}\u0026#34; --branch=\u0026#34;${CI_COMMIT_BRANCH}\u0026#34; --spring.profiles.active=\u0026#34;${CX_FLOW_ENABLED_VULNERABILITY_SCANNERS}\u0026#34; --f=. ${PARAMS} 21SLF4J: Class path contains multiple SLF4J bindings. 22SLF4J: Found binding in [jar:file:/app/cx-flow.jar!/BOOT-INF/lib/logback-classic-1.2.3.jar!/org/slf4j/impl/StaticLoggerBinder.class] 23SLF4J: Found binding in [jar:file:/app/cx-flow.jar!/BOOT-INF/lib/log4j-slf4j-impl-2.17.1.jar!/org/slf4j/impl/StaticLoggerBinder.class] 24SLF4J: See http://www.slf4j.org/codes.html#multiple_bindings for an explanation. 25SLF4J: Actual binding is of type [ch.qos.logback.classic.util.ContextSelectorStaticBinder] 26 ___ ___ _ 27 / __\\_ __ / __\\ | _____ __ 28 / / \\ \\/ /____ / _\\ | |/ _ \\ \\ /\\ / / 29/ /___ \u0026gt; \u0026lt;_____/ / | | (_) \\ V V / 30\\____//_/\\_\\ \\/ |_|\\___/ \\_/\\_/ 312022-01-21 06:44:09.841 WARN 11 --- [ main] o.s.b.StartupInfoLogger [] : InetAddress.getLocalHost().getHostName() took 5006 milliseconds to respond. Please verify your network configuration. 322022-01-21 06:44:14.858 INFO 11 --- [ main] c.c.f.CxFlowApplication [] : Starting CxFlowApplication with PID 11 (/app/cx-flow.jar started by root in /builds/*********) 332022-01-21 06:44:14.858 INFO 11 --- [ main] c.c.f.CxFlowApplication [] : The following profiles are active: sast 342022-01-21 06:44:18.305 INFO 11 --- [ main] ptablePropertiesBeanFactoryPostProcessor [] : Post-processing PropertySource instances 352022-01-21 06:44:18.464 INFO 11 --- [ main] c.u.j.EncryptablePropertySourceConverter [] : Converting PropertySource configurationProperties [org.springframework.boot.context.properties.source.ConfigurationPropertySourcesPropertySource] to AOP Proxy 362022-01-21 06:44:18.467 INFO 11 --- [ main] c.u.j.EncryptablePropertySourceConverter [] : Converting PropertySource commandLineArgs [org.springframework.core.env.SimpleCommandLinePropertySource] to EncryptableEnumerablePropertySourceWrapper 372022-01-21 06:44:18.467 INFO 11 --- [ main] c.u.j.EncryptablePropertySourceConverter [] : Converting PropertySource systemProperties [org.springframework.core.env.PropertiesPropertySource] to EncryptableMapPropertySourceWrapper 382022-01-21 06:44:18.468 INFO 11 --- [ main] c.u.j.EncryptablePropertySourceConverter [] : Converting PropertySource systemEnvironment [org.springframework.boot.env.SystemEnvironmentPropertySourceEnvironmentPostProcessor$OriginAwareSystemEnvironmentPropertySource] to EncryptableSystemEnvironmentPropertySourceWrapper 392022-01-21 06:44:18.468 INFO 11 --- [ main] c.u.j.EncryptablePropertySourceConverter [] : Converting PropertySource random [org.springframework.boot.env.RandomValuePropertySource] to EncryptablePropertySourceWrapper 402022-01-21 06:44:18.469 INFO 11 --- [ main] c.u.j.EncryptablePropertySourceConverter [] : Converting PropertySource applicationConfig: [classpath:/application-sast.yml] [org.springframework.boot.env.OriginTrackedMapPropertySource] to EncryptableMapPropertySourceWrapper 412022-01-21 06:44:18.469 INFO 11 --- [ main] c.u.j.EncryptablePropertySourceConverter [] : Converting PropertySource applicationConfig: [classpath:/application.yml] [org.springframework.boot.env.OriginTrackedMapPropertySource] to EncryptableMapPropertySourceWrapper 422022-01-21 06:44:18.607 INFO 11 --- [ main] c.u.j.f.DefaultLazyPropertyFilter [] : Property Filter custom Bean not found with name \u0026#39;encryptablePropertyFilter\u0026#39;. Initializing Default Property Filter 432022-01-21 06:44:18.620 INFO 11 --- [ main] c.u.j.r.DefaultLazyPropertyResolver [] : Property Resolver custom Bean not found with name \u0026#39;encryptablePropertyResolver\u0026#39;. Initializing Default Property Resolver 442022-01-21 06:44:18.629 INFO 11 --- [ main] c.u.j.d.DefaultLazyPropertyDetector [] : Property Detector custom Bean not found with name \u0026#39;encryptablePropertyDetector\u0026#39;. Initializing Default Property Detector 452022-01-21 06:44:18.934 WARN 11 --- [ main] j.p.spi [] : javax.persistence.spi::No valid providers found. 462022-01-21 06:44:18.938 INFO 11 --- [ main] trationDelegate$BeanPostProcessorChecker [] : Bean \u0026#39;org.hibernate.validator.internal.constraintvalidators.bv.NotBlankValidator\u0026#39; of type [org.hibernate.validator.internal.constraintvalidators.bv.NotBlankValidator] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying) 472022-01-21 06:44:18.942 INFO 11 --- [ main] trationDelegate$BeanPostProcessorChecker [] : Bean \u0026#39;org.hibernate.validator.internal.constraintvalidators.bv.NotNullValidator\u0026#39; of type [org.hibernate.validator.internal.constraintvalidators.bv.NotNullValidator] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying) 482022-01-21 06:44:18.944 INFO 11 --- [ main] trationDelegate$BeanPostProcessorChecker [] : Bean \u0026#39;flowProperties\u0026#39; of type [com.checkmarx.flow.config.FlowProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying) 492022-01-21 06:44:18.947 INFO 11 --- [ main] trationDelegate$BeanPostProcessorChecker [] : Bean \u0026#39;flowAsyncConfig\u0026#39; of type [com.checkmarx.flow.config.FlowAsyncConfig$$EnhancerBySpringCGLIB$$9e6d5344] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying) 502022-01-21 06:44:22.959 INFO 11 --- [ main] o.s.w.s.s.SaajSoapMessageFactory [] : Creating SAAJ 1.3 MessageFactory with SOAP 1.1 Protocol 512022-01-21 06:44:23.569 INFO 11 --- [ main] o.s.s.c.ThreadPoolTaskExecutor [] : Initializing ExecutorService 522022-01-21 06:44:23.571 INFO 11 --- [ main] o.s.s.c.ThreadPoolTaskExecutor [] : Initializing ExecutorService \u0026#39;scanRequest\u0026#39; 532022-01-21 06:44:23.576 INFO 11 --- [ main] o.s.s.c.ThreadPoolTaskExecutor [] : Initializing ExecutorService 542022-01-21 06:44:23.577 INFO 11 --- [ main] o.s.s.c.ThreadPoolTaskExecutor [] : Initializing ExecutorService \u0026#39;webHook\u0026#39; 552022-01-21 06:44:23.790 INFO 11 --- [ main] c.c.f.CxFlowRunner [] : =======BUILD INFO======= 562022-01-21 06:44:23.791 INFO 11 --- [ main] c.c.f.CxFlowRunner [] : Version: cx-flow-1.6.29 572022-01-21 06:44:23.792 INFO 11 --- [ main] c.c.f.CxFlowRunner [] : Time: 2022-01-07T12:45:49.239Z 582022-01-21 06:44:23.793 INFO 11 --- [ main] c.c.f.CxFlowRunner [] : ======================= 592022-01-21 06:44:25.426 INFO 11 --- [ main] c.c.f.CxFlowApplication [] : Started CxFlowApplication in 32.909 seconds (JVM running for 34.89) 602022-01-21 06:44:25.457 INFO 11 --- [ main] c.c.f.CxFlowRunner [blKXd4Ey] : Using custom bean implementation for bug tracking 612022-01-21 06:44:25.539 INFO 11 --- [ main] c.c.f.s.ScaFilterFactory [blKXd4Ey] : Initializing SCA filters. 622022-01-21 06:44:25.541 INFO 11 --- [ main] c.c.f.CxFlowRunner [blKXd4Ey] : Executing scan process 632022-01-21 06:44:25.551 INFO 11 --- [ main] c.c.f.s.ScaFilterFactory [blKXd4Ey] : Initializing SCA filters. 642022-01-21 06:44:25.571 INFO 11 --- [ main] c.c.f.s.ProjectNameGenerator [blKXd4Ey] : Project name being used: ********* 652022-01-21 06:44:25.573 INFO 11 --- [ main] c.c.f.u.ZipUtils [blKXd4Ey] : Creating zip file /builds/*********/cx.1357f707-5066-486c-b6f5-1d9dc08a4ad9.zip from contents of path . 662022-01-21 06:44:25.573 INFO 11 --- [ main] c.c.f.u.ZipUtils [blKXd4Ey] : Applying exclusions: .jar 672022-01-21 06:44:47.686 INFO 11 --- [ main] c.c.f.u.ZipUtils [blKXd4Ey] : Successfully created /builds/*********/cx.1357f707-5066-486c-b6f5-1d9dc08a4ad9.zip 682022-01-21 06:44:47.688 INFO 11 --- [ main] c.c.f.s.ScanRequestConverter [blKXd4Ey] : Overriding team with /CxServer/TEAM*** 692022-01-21 06:44:47.702 INFO 11 --- [ main] c.c.s.s.CxAuthService [blKXd4Ey] : Logging into Checkmarx https://***.com/cxrestapi/auth/identity/connect/token 702022-01-21 06:44:48.665 INFO 11 --- [ main] c.c.s.s.CxService [blKXd4Ey] : Retrieving Cx teams 712022-01-21 06:44:48.700 INFO 11 --- [ main] c.c.s.s.CxService [blKXd4Ey] : Found team /CxServer/TEAM*** with ID 16 722022-01-21 06:44:48.920 INFO 11 --- [ main] c.c.s.s.CxService [blKXd4Ey] : Creating scan... 732022-01-21 06:44:48.921 INFO 11 --- [ main] c.c.s.s.CxService [blKXd4Ey] : Updating Source details for project Id 67 742022-01-21 06:45:05.838 INFO 11 --- [ main] c.c.s.s.CxService [blKXd4Ey] : Scan will be Full Scan 752022-01-21 06:45:05.840 INFO 11 --- [ main] c.c.s.s.CxService [blKXd4Ey] : Creating Scan for project Id 67 762022-01-21 06:45:06.021 INFO 11 --- [ main] c.c.s.s.CxService [blKXd4Ey] : Scan created with Id 1000207 for project Id 67 772022-01-21 06:45:06.171 INFO 11 --- [ main] jsonLogger [blKXd4Ey] : 782022-01-21 07:22:12.549 INFO 11 --- [ main] jsonLogger [blKXd4Ey] : 792022-01-21 07:22:12.551 INFO 11 --- [ main] c.c.s.s.CxService [blKXd4Ey] : Creating report for xml Id 1000207 802022-01-21 07:22:12.906 INFO 11 --- [ main] c.c.s.s.CxService [blKXd4Ey] : Report with Id 304 created 812022-01-21 07:22:17.908 INFO 11 --- [ main] c.c.s.s.CxService [blKXd4Ey] : Retrieving report status of report Id 304 822022-01-21 07:22:18.965 INFO 11 --- [ main] c.c.s.s.CxAuthService [blKXd4Ey] : Logging into Checkmarx for SOAP token https://***.com/cxrestapi/auth/identity/connect/token 832022-01-21 07:22:19.117 INFO 11 --- [ main] c.c.s.s.CxService [blKXd4Ey] : Retrieving report contents of report Id 304 in XML format 842022-01-21 07:22:19.220 INFO 11 --- [ main] c.c.s.s.CxService [blKXd4Ey] : Report downloaded for report Id 304 852022-01-21 07:22:19.805 INFO 11 --- [ main] c.c.s.s.CxService [blKXd4Ey] : Fetching Scan data for Id 1000207 862022-01-21 07:22:19.820 INFO 11 --- [ main] c.c.s.s.CxService [blKXd4Ey] : Fetching custom fields from project ID 67 872022-01-21 07:22:19.908 INFO 11 --- [ main] c.c.f.s.ResultsService [blKXd4Ey] : Issue tracking is custom bean implementation 882022-01-21 07:22:19.923 INFO 11 --- [ main] c.c.f.c.GitLabIssueTracker [blKXd4Ey] : Initializing GitLab processing 892022-01-21 07:22:20.325 INFO 11 --- [ main] c.c.f.s.CodeBashingService [blKXd4Ey] : not using CodeBashing lessons integration - one or more of the mandatory properties is missing 902022-01-21 07:22:20.325 INFO 11 --- [ main] c.c.f.s.IssueService [blKXd4Ey] : Processing Issues with custom bean GitLab 912022-01-21 07:22:20.325 INFO 11 --- [ main] c.c.f.c.GitLabIssueTracker [blKXd4Ey] : Executing getIssues GitLab API call 922022-01-21 07:22:20.465 INFO 11 --- [ main] c.c.f.s.IssueService [blKXd4Ey] : Issue still exists. Updating issue with key CX Second_Order_SQL_Injection @ ***.cs [master] 932022-01-21 07:22:21.352 INFO 11 --- [ main] c.c.f.c.GitLabIssueTracker [blKXd4Ey] : Finalizing GitLab Processing 942022-01-21 07:22:21.352 INFO 11 --- [ main] c.c.f.s.ResultsService [blKXd4Ey] : ####Checkmarx Scan Results Summary#### 952022-01-21 07:22:21.352 INFO 11 --- [ main] c.c.f.s.ResultsService [blKXd4Ey] : Team: /CxServer/TEAM***, Project: *********, Scan-Id: 1000207 962022-01-21 07:22:21.353 INFO 11 --- [ main] c.c.f.s.ResultsService [blKXd4Ey] : The vulnerabilities found for the scan are: high: 2, medium: 21, low: 156, info: 0 972022-01-21 07:22:21.353 INFO 11 --- [ main] c.c.f.s.ResultsService [blKXd4Ey] : To view results use following link: https://***.com/CxWebClient/ViewerMain.aspx?scanid=1000207\u0026amp;projectid=67 982022-01-21 07:22:21.353 INFO 11 --- [ main] c.c.f.s.ResultsService [blKXd4Ey] : ###################################### 992022-01-21 07:22:21.353 INFO 11 --- [ main] c.c.f.s.ThresholdValidatorImpl [blKXd4Ey] : Checking Thresholds exists. sast thresholds: false. sca thresholds: false 1002022-01-21 07:22:21.353 INFO 11 --- [ main] c.c.f.CxFlowRunner [blKXd4Ey] : Build succeeded. all checks passed 1012022-01-21 07:22:21.353 INFO 11 --- [ main] c.c.f.CxFlowRunner [blKXd4Ey] : Completed Successfully 1022022-01-21 07:22:21.354 INFO 11 --- [ main] c.c.f.CxFlowRunner [blKXd4Ey] : Finished with exit code: 0 1032022-01-21 07:22:21.359 INFO 11 --- [extShutdownHook] o.s.s.c.ThreadPoolTaskExecutor [] : Shutting down ExecutorService \u0026#39;webHook\u0026#39; 1042022-01-21 07:22:21.362 INFO 11 --- [extShutdownHook] o.s.s.c.ThreadPoolTaskExecutor [] : Shutting down ExecutorService \u0026#39;scanRequest\u0026#39; 105Cleaning up project directory and file based variables 10600:05 107Job succeeded During the Checkmarx analysis, you can check the status from it's GUI, it takes long time to analyze.\nAfter the analysis, you can check the result in Checkmarx or GitLab.\nCheck the result in Checkmarx.\nCheck the result in GitLab, it generates 1 report in merge request and it will create several issues by category. The following is the reqport of a merge request. In this report, there are 9 high issues (in 5 categories). The following are the 5 issues created by Checkmarx in GitLab. You can click above issue, it shows the detail vulnerability information. Trouble shooting If you find Checkmarx cannot find your team, please make sure to use English only in CX_TEAM, if you use non English (ex: Chinese or Japanese), you can check the log and find it cannot find the team. 12022-01-12 02:51:22.748 INFO 11 --- [main] c.c.s.s.CxService [x4DNMhOL] : Found team /CxServer/Team1 with ID 16 Reference You can reference official document to do the integration: https://checkmarx.atlassian.net/wiki/spaces/SD/pages/1929937052/GitLab+Integration. Conclusion After this integration, you just need to commit the code and see the result in GitLab. All flows are in GitLab now, you don't need to worry about Checkmarx. Checkmarx provide lots of integration, you can reference https://checkmarx.atlassian.net/wiki/spaces/SD/pages/1339162785/CxSAST+CxSCA+Plugins+and+Integrations. What's next Try to integrate the scan result to SonarQube), you can reference https://dennys.github.io/en/doc/devops/gitlab-checkmarx-sonarqube-integration/. ","link":"https://dennys.github.io/en/doc/devops/gitlab-checkmarx-integration/","section":"doc","tags":["GitLab","Checkmarx"],"title":"GitLab Checkmarx CI/CD Integration"},{"body":"\rPurpose In previous article, we know how to integrate GitLab and Checkmarx. In this article, we want to integrate SonarQube too. When we commit code to GitLab, we want GitLab to trigger these actions automatically:\nGitLab sends the code to Checkmarx to scan. GitLab triggers SonarQube to sacn. SonarQube integrate Checkmarx's report. Procedure You can reference the official document: https://checkmarx.atlassian.net/wiki/spaces/SD/pages/169246832/SonarQube+Plugin+v8.5.0+and+up\nDownload the plugin from here, it only supports SonarQube LTS version (for now, it's 8.x) Configurea Quality Gate/Profiles of SonarQube for Checkmarx's rules. Use GitLab to trigger Checkmarx scan and record the project name of Checkmarx. Configure Checkmarx data in SonarQube, you can reference here. Trigger GitLab CI again, you will see the following log in your SonarQube job 1INFO: Sensor Import Checkmarx scan results to SonarQube [checkmarx] 2INFO: Retrieving Checkmarx scan results for current module [Checkmarx plugin version: 2021.2.1] 3INFO: Getting Checkmarx configuration data from sonar Database. 4INFO: Resolving Cx setting: checkmarx.server.project_name 5INFO: Forced authentication is enabled: Sonar credentials must be provided 6INFO: Sonar server token is provided 7INFO: Checkmarx credentials migration not needed 8INFO: Sonar server token is provided 9INFO: Resolving Cx setting: checkmarx.server.project_name 10INFO: Forced authentication is enabled: Sonar credentials must be provided 11INFO: Checkmarx server version [9.2.0.41015]. Hotfix [24]. 12INFO: Logging into the Checkmarx service. 13INFO: Connecting to https://your.checkmarx.server/ 14INFO: Initializing Cx client [2020.2.4.NO.SCA] 15INFO: Checkmarx server version [9.2.0.41015]. Hotfix [24]. 16INFO: Logging into the Checkmarx service. 17INFO: full team path: \\CxServer\\\\Team1 18INFO: preset name: All 19INFO: ---------------------------------Get Last CxSAST Results:-------------------------------- 20INFO: Waiting for server to generate xml report. 4990 seconds left to timeout 21INFO: Checkmarx High vulnerabilities: 3 22INFO: Checkmarx New-High vulnerabilities: 0 23INFO: Checkmarx Medium vulnerabilities: 23 24INFO: Checkmarx New-Medium vulnerabilities: 1 25INFO: Checkmarx Low vulnerabilities: 142 26INFO: Checkmarx New-Low vulnerabilities: 7 27INFO: Checkmarx scan link: https://your.checkmarx.server//CxWebClient/ViewerMain.aspx?scanId=1000157\u0026amp;ProjectID=67 You can see the Checkmarx issues in SonarQube now. Problem I find some issues are not created in SonarQube and it seems due to the rule is not defined in Checkmarx's SonarQube plugin. I'm still checking it.\n","link":"https://dennys.github.io/en/doc/devops/gitlab-checkmarx-sonarqube-integration/","section":"doc","tags":["GitLab","Checkmarx","SonarQube"],"title":"GitLab Checkmarx SonarQube Integration"},{"body":"","link":"https://dennys.github.io/en/tags/sonarqube/","section":"tags","tags":null,"title":"SonarQube"},{"body":"","link":"https://dennys.github.io/en/tags/ci/cd/","section":"tags","tags":null,"title":"CI/CD"},{"body":"","link":"https://dennys.github.io/en/categories/ci/cd/","section":"categories","tags":null,"title":"CI/CD"},{"body":"","link":"https://dennys.github.io/en/series/","section":"series","tags":null,"title":"Series"}]