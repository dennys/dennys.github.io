[{"body":"","link":"https://dennys.github.io/tw/tags/android/","section":"tags","tags":null,"title":"Android"},{"body":"","link":"https://dennys.github.io/tw/series/android-%E4%BD%BF%E7%94%A8%E5%B0%8F%E6%8A%80%E5%B7%A7/","section":"series","tags":null,"title":"Android 使用小技巧"},{"body":"需求 在上次的文章中, 我們知道預設 Android 的通知是 封存, 然後可以把封存改為刪除, 但沒法兩者同時出現.\n不過看來是沒有辦法, 因此找了幾個其他的 Email App 來試試看.\nK-9 Mail, ( K-9 Mail Joins The Thunderbird Family ) FairEmail Gmail 先回顧一下 Gmail 的部分, 預設是只能封存. 打開 Gmail App, 進入一般設定, 修改預設的電子郵件通知動作, 預設是\u0026quot;封存\u0026quot;, 把它改成刪除. 修改完後, 就可以在收到 Gmail 通知時, 直接刪除信件. K9 在 K9 裡面, 預設就有 回覆, 標示為已讀取, 刪除 這三種可選擇, 但他並沒有提供 封存 這個功能.\nFairEmail 在 FairEmail, 預設是提供 垃圾桶 和 標示已讀 兩種 action. 你可以在 設定 裡面的 通知動作 選擇你想要顯示的動作. 注意, 免費版最多可選擇 3 種. ","link":"https://dennys.github.io/tw/doc/android/android-gmail-notification-actions/","section":"doc","tags":["Android"],"title":"Android 各種 Gmail 的通知動作 (封存, 刪除, ...)"},{"body":"","link":"https://dennys.github.io/tw/categories/","section":"categories","tags":null,"title":"Categories"},{"body":"","link":"https://dennys.github.io/tw/","section":"","tags":null,"title":"Dennys Diary"},{"body":"","link":"https://dennys.github.io/tw/doc/","section":"doc","tags":null,"title":"Docs"},{"body":"","link":"https://dennys.github.io/tw/categories/it/","section":"categories","tags":null,"title":"IT"},{"body":"","link":"https://dennys.github.io/tw/series/","section":"series","tags":null,"title":"Series"},{"body":"","link":"https://dennys.github.io/tw/tags/","section":"tags","tags":null,"title":"Tags"},{"body":"","link":"https://dennys.github.io/tw/tags/software/","section":"tags","tags":null,"title":"Software"},{"body":"","link":"https://dennys.github.io/tw/tags/youtube/","section":"tags","tags":null,"title":"YouTube"},{"body":" 注意 這些工具都不是 Google 官方提供, 有些我也沒用過, 執行前請先三思!!! 整理一下 YouTube 在各平台上的各種加強工具.\nBrowser extension (Chrome, Edge, ...) Enhancer for YouTube 這東西很好用, 但有個奇怪的點是, 他首頁強調的 當游標在播放器上時，使用滑鼠滾輪控制音量 (這功能真的很方便), 預設卻是關閉的, 要自己進去打開才會生效.\nMagic Actions for YouTube 上次更新是 2021/5/2, 而且他有可能會拿走你的所有瀏覽紀錄 (參考: https://robertheaton.com/2020/02/18/dont-let-magic-enhancer-for-youtube-slurp-up-your-browsing-history/)\n用電腦下載 (Linux, macOS, Windows) YouTube 預設是不能讓人下載影片的 (即使是你自己上傳的影片也是一樣), 最有名的就是曾被 GitHub 下架的 youtube-dl 或是 ytl-dp. 使用起來很簡單, 可參考: https://dennys.github.io/tw/doc/software/download-youtube-private-video/\nAndroid 最有名的 Vanced 已經在 2022 年 3 月下架了, 有一堆替代品, 不過看來很多都是基於NewPipe Extractor. 試玩了幾個, 每個人的需求不同, 對我來講比較有感的是這幾個功能:\n官方 YouTube 的全螢幕模式我用不太習慣, 我是比較喜歡按下全螢幕就直接轉成橫向放大. 手勢, 尤其前後快轉真的好用. 下載的時候能自動合併影音, 這還滿方便的, 不然還得另外合併, 而且是在手機上, 會很麻煩. Chromecast, 這個雖然不常用, 但要投影到電視的時候就很方便... 不過現在應該也都直接用 Google TV 了, 好像想不太出應用場合. NewPipe SkyTube LibreTube VueTube GitHub star 20.7K 1.7K 2.8k 2.2k Extractor NewPipe Extractor NewPipe Extractor NewPipe Extractor VueTube-Extractor 外部撥放器 支援 支援 --- --- 帳號登入 無 (設計理念) 無 LibraTube 帳號 Google (計畫中) 訂閱清單匯入 有 (支援 zip) 只收 json, 得轉檔 有(未測試) 好像沒有? 下載影片 有 (影音分開) 有(影音合併) 有(影音合併) 無 手勢 音量/亮度 音量/亮度/前進後退 無 無 Chromecast 無 Extra 版才有 (non-opensource) 無 無 注意 這些 App 除了 NewPipe 以外, 大多都還在 active development, 尤其是 VueTube, 所以功能會一直在調整和加強.\nNewPipe:\n不能 login (這是他的設計理念) Gesture: 可直接調整音量和亮度, 很方便, 但 沒有 快轉倒退 訂閱清單可直接 import Google takeout 的 zip 檔 下載 video/audio 是分開的, 得再合併 NewPipe NewPipe x SponsorBlock\n這個 App 基本上就是 NewPipe, 只是每次 NewPipe 出了新版後, 他會再多上 SponsorBlock 和 Return YouTube Dislike 這兩個功能的 patch. 網站上也有提到, 是因為原來的 NewPipe team 不同意加上這兩個功能, 所以才有這個 fork. SkyTube\n不能 login (有人提了, 但不知道會不會實作 https://github.com/SkyTubeTeam/SkyTube/issues/25) Gesture: 可直接調整音量和亮度, 很方便, 還 有 快轉倒退 訂閱清單 只 收 json 格式, 得找 3rd party 程式來轉檔 下載 video/audio 是合併的 (但下載的過程中只能從通知看到進度) SkyTube Extra: 有包含 closed-source, third-party library, 但 支援 Chromecast LibreTube\n下載 video/audio 是合併的 (但下載的過程中只能從通知看到進度) Gesture: 看來是不會支援 (參考: https://github.com/libre-tube/LibreTube/issues/381) VueTube: 這個還真的是在 early beta (2022/7/1), 很多功能都還沒做出來, 再觀察.\nReVanced: 這個看來是要繼承原來的 Vanced, 還要再觀望.\n有一些是 web-based 的, 譬如 Piped, VueTube, LibreTube (based on Piped)\nGoogle TV (Android TV) 如果家裡有 Google TV, 推薦試試 SmartTubeNext (STN), 他也是 Android App, 但他是設計給電視用的. 要注意的是, 他可以檢查更新和下載, 但 14 版到 15 版好像不行, 至少我這邊搭配 Google TV 是一直更新失敗, 最後是手動下載 Apk 重新安裝. iOS 沒想到 iOS 竟然也有 ... 不過都只有 ipa 檔, 不是越獄, 就得用AltStor\nuYouPlus Yattee VueTube: 他同時提供 Android 和 iOS 參考 GitHub: https://gist.github.com/SkyyySi/1b621c7c20ae7e0865a8ac428156c1cf PTT: https://www.ptt.cc/bbs/MobileComm/M.1647892683.A.23B.html https://abooo.pixnet.net/blog/post/225867041 What's next 要找個方法修改 Android 上自動開啟 youtube 的 App 有些 App 不支援 Google 帳號登入, 那要找方法把原來的 YouTube 訂閱清單等等資料轉過去. ","link":"https://dennys.github.io/tw/doc/software/youtube-enhancer/","section":"doc","tags":["YouTube","Software"],"title":"YouTube 各種加強工具"},{"body":"","link":"https://dennys.github.io/tw/series/gitlab-devops/","section":"series","tags":null,"title":"GitLab DevOps"},{"body":"","link":"https://dennys.github.io/tw/tags/grafana/","section":"tags","tags":null,"title":"Grafana"},{"body":"","link":"https://dennys.github.io/tw/tags/sonarqube/","section":"tags","tags":null,"title":"SonarQube"},{"body":"需求 一般來講, 我們會直接在 SonarQube 上面看各 project 的各項 KPI 如下 Project 的 build history 的部分也可以直接看到 在 Grafana 上面顯示 SonarQube KPI 不過也有人做出來一些 SonarQube exporter, 可以把 SonarQube 的 KPI 轉放到 Grafana.\n方案1 Exporter: https://github.com/dmeiners88/sonarqube-prometheus-exporter: 他是做成 SonarQube plugin, 但他只支援 5 個 KPI, 而且最後一次更新是 2018/11/9. 他有支援 SonarQube 7, 不太確定有沒有支援 8 或 9, 就算了. 方案2 Exporter: https://github.com/nthienan/sonarqube-exporter Grafana dashboard: 同上, 請在首頁找 dashboard overview.json 和 dashboard details.json 請產生一個 SonarQube token, 可參考 https://docs.sonarqube.org/latest/user-guide/user-token/ 啟動方式 直接跑的指令如下 1docker run --expose 9102 -p 9102:9102 nthienan/sonarqube-exporter sqe -p 9102 --url http://sonar.x.x.x:9000 --user-token xxxxxxxxxxx --ignore-ssl-verification --log-level DEBUG docker-compose.yml 的方式如下 1sonarqube-exporter: 2container_name: sonarqube-exporter 3image: nthienan/sonarqube-exporter 4ports: 5- 9102:9102 6expose: 7- 9102 8command: \u0026#39; sqe --url http://sonar.x.x.x:9000 --user-token xxxxxxxxxxx --ignore-ssl-verification --log-level DEBUG \u0026#39; 9environment: 10- TZ=Asia/Taipei 11depends_on: 12- sonarqube prometheus.yml 請設定如下 1- job_name: \u0026#39;sonarqube\u0026#39; 2 scrape_interval: 5s 3 metrics_path: \u0026#39;/metrics\u0026#39; 4 static_configs: 5 - targets: [\u0026#39;xxx.xxx.xxx.xxx:9102\u0026#39;] 成果 重開程式完後, 試著 re-build project, 就可以到 Grafana 看結果了, 如下\n他也有另一個 detail 的 dashboard 可以看更細的資訊, 包含歷史趨勢圖等, 這圖資料還不多, 以後再來更新.\n","link":"https://dennys.github.io/tw/doc/devops/grafana-sonarqube-integration/","section":"doc","tags":["SonarQube","CI/CD","Grafana"],"title":"使用 Grafana 管理 SonarQube KPI"},{"body":"","link":"https://dennys.github.io/tw/tags/gitlab/","section":"tags","tags":null,"title":"GitLab"},{"body":"本文更新紀錄 2022/10/13: 新增幾個步驟的檢查點 需求 當 GitLab 上的 project 一多, 好像不容易有個單一的進入點, 可以看到各 project 的 CI/CD Pipelines 狀況.\n在 Grafana 上面顯示 GitLab CI pipelines 方案1: 使用 GitLab 內建的 metrics Exporter: GitLab 內建 (參考 https://docs.gitlab.com/ee/administration/monitoring/prometheus/) Grafana dashboard: https://grafana.com/grafana/dashboards/10620 這個 dashboard 需要安裝這個 plugin: https://grafana.com/grafana/plugins/grafana-polystat-panel/ prometheus.yml 1- job_name: \u0026#39;GitLab\u0026#39; 2 scrape_interval: 5s 3 metrics_path: \u0026#39;/-/metrics\u0026#39; 4 scheme: https 5 static_configs: 6 - targets: [\u0026#39;gitlab.xxx.xxx.xxx\u0026#39;] 7 params: 8 token: [\u0026#39;***************\u0026#39;] 方案2: 使用 gitlab-ci-pipelines-exporter Exporter: https://github.com/mvisonneau/gitlab-ci-pipelines-exporter 這個 exporter 提供好幾個面向的 metrics (搭配不同 dashboard) Grafana dashboard: 和方案1是同一個 (也需要裝 Ploystat plugin)\n啟動方式\n假設你把 gitlab-ci-pipelines-exporter 的設定放在這 /opt/grafana/gitlab-ci-pipelines-exporter/gitlab-ci-pipelines-exporter.yml\n1server: 2# [address:port] to make the process listen 3# upon (optional, default: :8080) 4listen_address: :9103 5gitlab: 6url: https://gitlab.xxx.xxx.xxx/ 7# You can also configure the token using --gitlab-token 8# or the $GCPE_GITLAB_TOKEN environment variable 9token: xrN14n9-ywvAFxxxxxx 10project_defaults: 11pull: 12 pipeline: 13 jobs: 14 enabled: true 15 environments: 16 enabled: true 17 18wildcards: 19- owner: 20 name: g1 21 kind: group 22 include_subgroups: true 如果要直接跑, 可下這個指令, 把程式啟動在 docker\n1docker run --restart always \\ 2--name gitlab-ci-pipelines-exporter \\ 3-v /opt/gitlab-runner/gitlab-ci-pipelines-exporter.yml:/etc/config.yml \\ 4-v /etc/hosts:/etc/hosts \\ 5--expose 9103 \\ 6-p 9103:9103 \\ 7mvisonneau/gitlab-ci-pipelines-exporter:v0.5.3 \\ 8run --config /etc/config.yml 若你用的是 docker-compose, 他的 yml 如下\n1gitlab-ci-pipelines-exporter: 2image: mvisonneau/gitlab-ci-pipelines-exporter:v0.5.3 3container_name: gitlab-ci-pipelines-exporter 4ports: 5- 9103:9103 6expose: 7- 9103 8volumes: 9- /opt/grafana/gitlab-ci-pipelines-exporter/gitlab-ci-pipelines-exporter.yml:/etc/gitlab-ci-pipelines-exporter.yml 10- /etc/hosts:/etc/hosts 11environment: 12 GCPE_CONFIG: /etc/gitlab-ci-pipelines-exporter.yml 13 #GCPE_GITLAB_TOKEN: ${GCPE_GITLAB_TOKEN} 14 #GCPE_INTERNAL_MONITORING_LISTENER_ADDRESS: tcp://127.0.0.1:8082 檢查方式: 可檢查 http://your.server:9103/metrics, 然後你應該會看到一對長的像這樣的 metrics \u0026quot;gitlab_ci_pineline_xxxx\u0026quot; 如果你只看到 \u0026quot;gcpe_projects_***\u0026quot; 和 \u0026quot;promhttp_metric_handler_errors_total\u0026quot;, 那這樣代表設定有問題, 沒有抓到值.\n1# TYPE gitlab_ci_pipeline_coverage gauge 2gitlab_ci_pipeline_coverage{kind=\u0026#34;branch\u0026#34;,project=\u0026#34;******\u0026#34;,ref=\u0026#34;master\u0026#34;,topics=\u0026#34;\u0026#34;,variables=\u0026#34;\u0026#34;} 0 3gitlab_ci_pipeline_coverage{kind=\u0026#34;branch\u0026#34;,project=\u0026#34;******\u0026#34;,ref=\u0026#34;master\u0026#34;,topics=\u0026#34;\u0026#34;,variables=\u0026#34;\u0026#34;} 0 4# HELP gitlab_ci_pipeline_duration_seconds Duration in seconds of the most recent pipeline 5# TYPE gitlab_ci_pipeline_duration_seconds gauge 6gitlab_ci_pipeline_duration_seconds{kind=\u0026#34;branch\u0026#34;,project=\u0026#34;******\u0026#34;,ref=\u0026#34;master\u0026#34;,topics=\u0026#34;\u0026#34;,variables=\u0026#34;\u0026#34;} 253 7gitlab_ci_pipeline_duration_seconds{kind=\u0026#34;branch\u0026#34;,project=\u0026#34;******\u0026#34;,ref=\u0026#34;master\u0026#34;,topics=\u0026#34;\u0026#34;,variables=\u0026#34;\u0026#34;} 489 8# HELP gitlab_ci_pipeline_id ID of the most recent pipeline 9# TYPE gitlab_ci_pipeline_id gauge 10gitlab_ci_pipeline_id{kind=\u0026#34;branch\u0026#34;,project=\u0026#34;******\u0026#34;,ref=\u0026#34;master\u0026#34;,topics=\u0026#34;\u0026#34;,variables=\u0026#34;\u0026#34;} 811 11gitlab_ci_pipeline_id{kind=\u0026#34;branch\u0026#34;,project=\u0026#34;******\u0026#34;,ref=\u0026#34;main\u0026#34;,topics=\u0026#34;\u0026#34;,variables=\u0026#34;\u0026#34;} 823 12...... prometheus.yml 如下\n1- job_name: \u0026#39;gitlab-runner-ci-pipeline\u0026#39; 2 metrics_path: \u0026#39;/metrics\u0026#39; 3 scrape_interval: 5s 4 scheme: http 5 bearer_token: bearer_token 6 static_configs: 7 - targets: [\u0026#39;xxx.xxx.xxx.xxx:9103\u0026#39;] 成果\n不論採哪種方案, 都是用同一個 dashboard, 看起來會如下 而且旁邊的 ID 點下去, 就會直接帶你到 GitLab 的 CI/CD Pipelines, 可以直接看到每個 job 的執行狀況. 看 CI Pipelines 裡面的 Jobs 的狀況 上面是看整個 CI pipelines, 如果要看更細到 job, 可在 gitlab-ci-pipelines-exporter.yml 加上下面這段. 配合的 Grafana dashboard 是 https://grafana.com/grafana/dashboards/13328\n1# Pull jobs related metrics on all projects 2project_defaults: 3pull: 4 pipeline: 5 jobs: 6 enabled: true 成果\n成果如下, 可以直接看到每個 job 的執行結果和時間, 和上面的類似, ID 按下去也會直接跳到 GitLab CI/CD jobs. 看 Environments / Deployments 的狀況 這個我還沒試, 有興趣可參考 https://grafana.com/grafana/dashboards/13329\n","link":"https://dennys.github.io/tw/doc/devops/grafana-gitlab-integration/","section":"doc","tags":["GitLab","CI/CD","Grafana"],"title":"使用 Grafana 管理 GitLab CI/CD Pipelines"},{"body":"","link":"https://dennys.github.io/tw/tags/podcast/","section":"tags","tags":null,"title":"Podcast"},{"body":"我通常都用 Spotify 來聽 Podcast, 後來也會和家人共用, 但這樣有時候就會混在一起, 想說找別的 App 分開使用. 無意中看到 Pocket Casts 這個 App 滿有意思的, 她有個功能是可以跳過固定的片頭和片尾 (依據秒數), 免費版就有這功能了.\n步驟如下:\n選擇要調整的 Podcast. 進去設定. 選擇你要跳過的時間. 2022/9/14 更新: 結果發現 AntennaPod (一個 OpenSource 的 Android Podcast App), 在 2020 年就有這功能了, 這裡有示範影片: https://github.com/AntennaPod/AntennaPod/pull/3975\n而且 AntennaPod 還支援 Podcast 2.0, 可直接跳到你想聽的段落\n","link":"https://dennys.github.io/tw/doc/software/how-to-skip-podcast-intro/","section":"doc","tags":["Software","Podcast"],"title":"跳過 Podcast 的片頭片尾"},{"body":"","link":"https://dennys.github.io/tw/tags/grafana-prometheus/","section":"tags","tags":null,"title":"Grafana-Prometheus"},{"body":"需求 Prometheus 的 Alertmanager 會在系統異常時發通知, 這很好用. 但有時候 alert 發太多也會是個問題, 譬如一些已知的停線狀況 (如工廠年度維修等等), 通常都會引發大量 alert, 而系統發太多 alert 的問題是, 一方面可能被忽略(因為太多), 另一方面是可能把真正有用的資訊洗板洗掉了, 反而造成其他更嚴重的問題.\n把這些 alert 先暫時關掉當然是個方法, 但之後萬一忘記開回來, 反而又會是另一個問題. 因此 Alertmanager 有提供一個 Silence 功能, 能夠把某些 alert 暫時關掉一段時間, 時間過了, 就會繼續發 alert.\n設定方法 進入 Prometheus Alert Manager, 選擇 Alerts, 系統會把目前所有的 alert 列出 選擇你要 silence 的 alert 進去後, 其實他並沒有綁定上一層選的那個 alert, 而只是把她的 filter 設好, 所以在這裡還要再 double check 一次. 先設定要 silence 的時間, 負責人, comment, 還有在最下面用 Preview Alerts 確認範圍正確. 沒問題的話就按下 Create 建立一個新的 silense. 完成後選 Silences, 就可以看到被 silence 的所有 alerts 了, 這裡有三個動作可以選\nView: 檢視這個 silence 的內容 Edit: 修改這個 silence 的內容 Expire: 這個按下去, 就會直接取消 silence Silense 結束後, 可以在這裡看到之前關掉過的 alert, 可直接使用 Recreate 再建立一個一樣的. 心得 Prometheus 沒有設計 authentication/authorization 機制實在是個問題, 像這個 Alertmanager 也沒卡權限, Silence 的負責人也要點進去到最裡面才能看到, 感覺還是有點風險. Grafana 9 的 Alert 機制比較完整了, 或許應該參考一下.\n","link":"https://dennys.github.io/tw/doc/grafana/prometheus-alertmanager-silence/","section":"doc","tags":["Grafana-Prometheus"],"title":"使用 Prometheus Alertmanager Silence 暫時停止通知一段時間"},{"body":"","link":"https://dennys.github.io/tw/tags/line/","section":"tags","tags":null,"title":"LINE"},{"body":"Grafana Alerting Notifiers 要使用 Grafana發 alert 的方法有很多, 參考這裡, 目前有 20 種, 常見的 Email, LINE, Teams, Discord, Telegram 都有支援. 比較意外的是, LINE 在 Grafana 是官方直接支援, 反而在 Prometheus 並沒有.\n(Prometheus 可參考 https://stackoverflow.com/questions/53372935/how-can-i-config-prometheus-alert-with-line-notify)\n前提 這裡假設你已經會用 Grafana 發 Email 通知了, 只是要再多加個 LINE 通知.\nLINE Notify 設定 開一個新的聊天室, 並邀請 LINE Notify 這個帳號進入聊天室\n連線到 這裡, 使用 LINE 的帳號登入\n選擇 發行權杖 選擇 你要接受訊息的聊天室 把權杖 token 存下來 Grafana 設定 建立一個新的 Contact point, 從 Grafana 的 Alert 選單選擇 contact points, 設定好下列欄位:\nName: 這裡取名 LINE test 1 Contact point type: 這裡選擇 LINE Token: 把前面 LINE 提供的 token 貼上去. 注意, 存檔之後就再也看不到了, 有需要的話請記得備份 Disable resolved message: 這個欄位的意思是, 當觸發 alert 的情況消失時, Grafana 預設是會發一個 [OK] 的訊息通知使用者已經恢復正常了, 如果你不需要, 就把他打勾. 按下 Test, 應該就會收到一個測試訊息, 如下 測試成功的話, 按下 Save contact point, 就會存檔了.\n當發生 alert 時, 會收到一個 [FIRING:*] LINE 訊息(後面的數字代表 alert 的個數), 如下 當狀況消失時, 如果你沒有把上面的 Disable resolved message 關掉, 哪也會收到一個 [RESOLVED] 的 LINE 訊息, 如下 ","link":"https://dennys.github.io/tw/doc/grafana/grafana-alert-line-notify/","section":"doc","tags":["Grafana-Prometheus","LINE"],"title":"把 Grafana 的 Alert 訊息發到 LINE 群組"},{"body":"","link":"https://dennys.github.io/tw/tags/network/","section":"tags","tags":null,"title":"Network"},{"body":"","link":"https://dennys.github.io/tw/tags/vpn/","section":"tags","tags":null,"title":"VPN"},{"body":"需求 如果你已經有了一個自己管理的 OpenVPN access server, 他本身是有一個簡單的管理介面, 但在這個時代, 用 Grafana + Prometheus 應該是比較好的選擇.\nOpenVPN 的 Prometheus 方案 Google 一下有幾個, 不過因為我們用的是自建的 OpenVPN Access Server, 只能用這個.\nhttps://github.com/lfdominguez/openvpn-access-exporter 這個是不能用的, 不過很可惜, 這個的功能看來比較多.\nhttps://github.com/kumina/openvpn_exporter 安裝使用 下載適合你環境的程式 (https://github.com/lfdominguez/openvpn-access-exporter/releases)\n執行下列指令啟動 exporter\n1$ openvpn-access-exporter --file /usr/local/openvpn_as/etc/db/log.db 2[2022-07-05T23:10:41Z INFO openvpn_access_exporter] Using file: /usr/local/openvpn_as/etc/db/log.db 連線到 http://localhost:9185, 就會看到類似下面的 metrics\n1# HELP access_counter Requests counter 2# TYPE access_counter counter 3access_counter 61 4# HELP openvpn_user_bytes_in Bytes in 5# TYPE openvpn_user_bytes_in gauge 6openvpn_user_bytes_in{common_name=\u0026#34;user1\u0026#34;,node=\u0026#34;vm1655366325290-2779681-iaas\u0026#34;,real_ip=\u0026#34;x.x.x.x\u0026#34;,session_id=\u0026#34;hYTtny0ozcppC3tS\u0026#34;,username=\u0026#34;user1\u0026#34;,vpn_ip=\u0026#34;172.27.224.2\u0026#34;} 3623 1656473784000 7openvpn_user_bytes_in{common_name=\u0026#34;user1\u0026#34;,node=\u0026#34;vm1655366325290-2779681-iaas\u0026#34;,real_ip=\u0026#34;x.x.x.x\u0026#34;,session_id=\u0026#34;lXgWcyk33yOe92Zg\u0026#34;,username=\u0026#34;user1\u0026#34;,vpn_ip=\u0026#34;172.27.224.3\u0026#34;} 3320 1655708617000 8openvpn_user_bytes_in{common_name=\u0026#34;user1\u0026#34;,node=\u0026#34;vm1655366325290-2779681-iaas\u0026#34;,real_ip=\u0026#34;x.x.x.x\u0026#34;,session_id=\u0026#34;9RCKoPcSj0CB8Cyo\u0026#34;,username=\u0026#34;user1\u0026#34;,vpn_ip=\u0026#34;172.27.224.8\u0026#34;} 3554022 1657085339000 9# HELP openvpn_user_bytes_out Bytes out 10# TYPE openvpn_user_bytes_out gauge 11openvpn_user_bytes_out{common_name=\u0026#34;user1\u0026#34;,node=\u0026#34;vm1655366325290-2779681-iaas\u0026#34;,real_ip=\u0026#34;x.x.x.x\u0026#34;,session_id=\u0026#34;hYTtny0ozcppC3tS\u0026#34;,username=\u0026#34;user1\u0026#34;,vpn_ip=\u0026#34;172.27.224.2\u0026#34;} 3145 1656473784000 12openvpn_user_bytes_out{common_name=\u0026#34;user1\u0026#34;,node=\u0026#34;vm1655366325290-2779681-iaas\u0026#34;,real_ip=\u0026#34;x.x.x.x\u0026#34;,session_id=\u0026#34;lXgWcyk33yOe92Zg\u0026#34;,username=\u0026#34;user1\u0026#34;,vpn_ip=\u0026#34;172.27.224.3\u0026#34;} 3592 1655708617000 13openvpn_user_bytes_out{common_name=\u0026#34;user1\u0026#34;,node=\u0026#34;vm1655366325290-2779681-iaas\u0026#34;,real_ip=\u0026#34;x.x.x.x\u0026#34;,session_id=\u0026#34;9RCKoPcSj0CB8Cyo\u0026#34;,username=\u0026#34;user1\u0026#34;,vpn_ip=\u0026#34;172.27.224.8\u0026#34;} 11765019 1657085339000 14# HELP openvpn_user_duration Connection duration 15# TYPE openvpn_user_duration gauge 16openvpn_user_duration{common_name=\u0026#34;user1\u0026#34;,node=\u0026#34;vm1655366325290-2779681-iaas\u0026#34;,real_ip=\u0026#34;x.x.x.x\u0026#34;,session_id=\u0026#34;hYTtny0ozcppC3tS\u0026#34;,username=\u0026#34;user1\u0026#34;,vpn_ip=\u0026#34;172.27.224.2\u0026#34;} 0 1656473784000 17openvpn_user_duration{common_name=\u0026#34;user1\u0026#34;,node=\u0026#34;vm1655366325290-2779681-iaas\u0026#34;,real_ip=\u0026#34;x.x.x.x\u0026#34;,session_id=\u0026#34;lXgWcyk33yOe92Zg\u0026#34;,username=\u0026#34;user1\u0026#34;,vpn_ip=\u0026#34;172.27.224.3\u0026#34;} 0 1655708617000 18openvpn_user_duration{common_name=\u0026#34;user1\u0026#34;,node=\u0026#34;vm1655366325290-2779681-iaas\u0026#34;,real_ip=\u0026#34;x.x.x.x\u0026#34;,session_id=\u0026#34;9RCKoPcSj0CB8Cyo\u0026#34;,username=\u0026#34;user1\u0026#34;,vpn_ip=\u0026#34;172.27.224.8\u0026#34;} 901 1657085339000 不過很可惜的, 沒有找到現成的 Grafana Dashboard, 只能自力救濟了.\n故障排除 如果程式跑起來了, 但一打 http://localhost:9185 就遇到這個訊息的話, 我這邊是遇到權限問題, 因為是用 root 執行 openvpn, 然後用一般 user 執行 exporter, 他沒權限的訊息並沒有很清楚. 1thread \u0026#39;tokio-runtime-worker-0\u0026#39; panicked at \u0026#39;called `Result::unwrap()` on an `Err` value: Error { code: Some(14), message: None }\u0026#39;, src/main.rs:70:48 2note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace 3Aborted (core dumped) 相關文章 如果你要自己在 Linux(Ubuntu) 上安裝 OpenVPN server, 可參考 OpenVPN server 簡易安裝使用 (Ubuntu) 如果你使用的是 Asuswrt-Merlin, 他有內建 OpenVPN server, 可參考 在 Asuswrt-Merlin 使用 OpenVPN server 這是一篇 Open Source VPN 方案的簡單比較和測速: Open Source VPN 之不嚴謹比較 ","link":"https://dennys.github.io/tw/doc/network/openvpn-server-prometheus/","section":"doc","tags":["VPN","Network","Grafana-Prometheus"],"title":"用 Prometheus 來監控 OpenVPN server"},{"body":"Grafana, 支援三種資料庫, SQLite, PostgreSQL, MySQL. 如果你甚麼都沒設定, Grafana 預設會使用 SQLite. 量小還好, 但量變大時, 維護起來就麻煩, 而且資料也沒法直接 migration. (是有個非官方的工具在這 https://github.com/wbh1/grafana-sqlite-to-postgres). 如果一開始就要用 PostgreSQL, 有些前置動作要準備好.\n目錄設定 一開始的目錄設定如下, 請自行修改成你的環境\n/opt/grafana/postgresql =\u0026gt; 放 PostgreSQL data /opt/grafana/grafana =\u0026gt; 放 Grafana data 設定方法 先把 PostgreSQL 用 docker-compose 跑起來, 並確認資料和連線正常\nPostgreSQL 的 docker-compose.yml 如下:\n1postgres: 2image: postgres:14 3container_name: postgres 4networks: 5 - grafananet 6expose: 7 - 5432 8ports: 9 - 5432:5432 # Postgres port 10volumes: 11 - /opt/grafana/postgresql/:/var/lib/postgresql 12 - /opt/grafana/postgresql/data/:/var/lib/postgresql/data 13environment: 14 POSTGRES_USER: ******** # define credentials 15 POSTGRES_PASSWORD: ******** # define credentials 16 POSTGRES_DB: ******** # define database 17 TZ: Asia/Singapore # This is for PostgreSQL\u0026#39;s time zone 18 PGTZ: Asia/Singapore # This is for PostgreSQL\u0026#39;s time zone 執行下列指令啟動 PostgreSQL\n1docker-compose up postgres 檢查 /opt/grafana/postgresql/data 目錄下有檔案, 確定資料不是放在 container 裡面, 免得最後還要想辦法把資料從 docker image 裡面搬出來.\n確認 database 連線正常, 執行以下指令, 應該會看到 3 個資料庫.\n1$ docker exec postgres psql -d postgres -U postgres -h localhost -c \u0026#39;select * from pg_database\u0026#39; 2 oid | datname | datdba | encoding | datcollate | datctype | datistemplate | datallowconn | datconnlimit | datlastsysoid | datfrozenxid | datminmxid | dattablespace | datacl 3------+-----------+--------+----------+------------+------------+---------------+--------------+--------------+---------------+--------------+------------+---------------+----------------------------------------------------------- 413757 | postgres | 10 | 6 | en_US.utf8 | en_US.utf8 | f | t | -1 | 13756 | 727 | 1 | 1663 | 5 1 | template1 | 10 | 6 | en_US.utf8 | en_US.utf8 | t | t | -1 | 13756 | 727 | 1 | 1663 | {=c/postgres,postgres=CTc/postgres} 613756 | template0 | 10 | 6 | en_US.utf8 | en_US.utf8 | t | f | -1 | 13756 | 727 | 1 | 1663 | {=c/postgres,postgres=CTc/postgres} 7(3 rows) 再來建立 Grafana 使用的資料庫和帳號\n執行以下三個指令, 會依序建立 Grafana 資料庫, 建立 grafana 使用著, 然後把 grafana 資料庫權限開給 grafana 使用著.\n1$ docker exec postgres psql -d postgres -U postgres -c \u0026#34;create database grafana\u0026#34; 2$ docker exec postgres psql -d postgres -U postgres -c \u0026#34;create user grafana with encrypted password \u0026#39;****\u0026#39; \u0026#34; 3$ docker exec postgres psql -d postgres -U postgres -c \u0026#34;grant all privileges on database grafana to grafana \u0026#34; 若不小心輸錯密碼, 可用下列指令修改\n1docker exec postgres psql -d postgres -U postgres -c \u0026#34;ALTER USER grafana WITH PASSWORD \u0026#39;new_password\u0026#39;\u0026#34; 再執行一次類似步驟一的指令, 確認 grafana 這個資料庫還有帳號建立出來了\n1$ docker exec postgres psql -d grafana -U grafana -h localhost -W -c \u0026#39;select * from pg_database\u0026#39; 2oid | datname | datdba | encoding | datcollate | datctype | datistemplate | datallowconn | datconnlimit | datlastsysoid | datfrozenxid | datminmxid | dattablespace | datacl 3------+-----------+--------+----------+------------+------------+---------------+--------------+--------------+---------------+--------------+------------+---------------+----------------------------------------------------------- 413757 | postgres | 10 | 6 | en_US.utf8 | en_US.utf8 | f | t | -1 | 13756 | 727 | 1 | 1663 | 5 1 | template1 | 10 | 6 | en_US.utf8 | en_US.utf8 | t | t | -1 | 13756 | 727 | 1 | 1663 | {=c/postgres,postgres=CTc/postgres} 613756 | template0 | 10 | 6 | en_US.utf8 | en_US.utf8 | t | f | -1 | 13756 | 727 | 1 | 1663 | {=c/postgres,postgres=CTc/postgres} 716384 | grafana | 10 | 6 | en_US.utf8 | en_US.utf8 | f | t | -1 | 13756 | 727 | 1 | 1663 | {=Tc/postgres,postgres=CTc/postgres,grafana=CTc/postgres} 8(4 rows) 啟動 Grafana\n修改 grafana.ini, 加上這段設定, 讓 Grafana 去使用 PostgreSQL (不設定的話, 預設會使用 SQLite)\n1type = postgres 2host = postgres:5432 3name = grafana 4user = grafana 5password = ****** 6database = grafana 7ssl_mode = disable 啟動 Grafana, 會看到他在做 data initial, 建了一堆 table\n1$ docker-compose up -d grafana 確認這個檔案不存在, 或者沒有再繼續更新 (如果你之前有先用 SQLite, 他會產生這個檔案)\n1$ ls -l /opt/grafana/grafana/grafana.db 執行以下指令確認 grafana 的 table 都建出來了\n1$ docker exec postgres psql -d grafana -U grafana -h localhost -W -c \u0026#39;select * from information_schema.tables\u0026#39; 2Password: 3 table_catalog | table_schema | table_name | table_type | self_referencing_column_name | reference_generation | user_defined_type_catalog | user_defined_type_schema | user_defined_type_name | is_insertable_into | is_typed | commit_action 4---------------+--------------------+---------------------------------------+------------+------------------------------+----------------------+---------------------------+--------------------------+------------------------+--------------------+----------+--------------- 5grafana | public | migration_log | BASE TABLE | | | | | | YES | NO | 6grafana | public | user | BASE TABLE | | | | | | YES | NO | 7grafana | pg_catalog | pg_type | BASE TABLE | | | | | | YES | NO | 8grafana | public | temp_user | BASE TABLE | | | | | | YES | NO | 9... 10grafana | public | file_meta | BASE TABLE | | | | | | YES | NO | 11grafana | public | playlist | BASE TABLE | | | | | | YES | NO | 12(244 rows) 到此就可以進去 Grafana 了.\n另外, 既然跑起來 PostgreSQL 了, 也記得補上 PostgreSQL Server Exporter, docker-compose.yml 如下\n1postgres_exporter: 2 image: prometheuscommunity/postgres-exporter 3 container_name: postgres_exporter 4 networks: 5 - grafananet 6 ports: 7 - 9187:9187 8 expose: 9 - 9187 10 environment: 11 DATA_SOURCE_NAME: \u0026#34;postgresql://postgres:postgres@********:5432/postgres?sslmode=disable\u0026#34; ","link":"https://dennys.github.io/tw/doc/grafana/grafana-postgresql/","section":"doc","tags":["Grafana-Prometheus"],"title":"使用 PostgreSQL 當作 Grafana 的資料庫"},{"body":" 注意 這方法僅適用於 Android 11 或更以前的版本!!! 需求 Android 預設的 YouTube App 不是很好用, 有很多 Open Source 的替代品 (被下架的 YouTube Vanced, NewPipe, ... 等等), 但安裝之後, 如果沒有把預設開啟 YouTube 的 App 一起改掉, 用起來還是沒有那麼方便.\n作法 進入 Android 的設定-\u0026gt;應用程式-\u0026gt;預設應用程式-\u0026gt;開啟連結(在最下面).\n這裡就會把所有 App 都列出來, 拉到最下面, 選擇 YouTube, 應該會看到如下畫面. 把 \u0026quot;開啟支援的連結\u0026quot; 關掉. 回到上一層, 選擇你要使用的 YouTube App, 這裡以 NewPipe 為例, 進去後選擇 \u0026quot; + 新增連結\u0026quot;. 把 YouTube 相關的 4 個連結打勾. 回到上一層, 這時候 NewPipe 就有綁定這 4 個連結了. 常見問題 若你進去 App 發現無法更改, 通常是因為你沒有把原來預設開啟的 App 關掉, 因為他一個連結只能選擇一個 App. 結果 可以試著用 Chrome 找一些影片, 然後試著打開她, 選 YouTube, 他就會啟動 NewPipe 了. ","link":"https://dennys.github.io/tw/doc/android/android-modify-default-youtube-app/","section":"doc","tags":["Android","YouTube"],"title":"如何修改 Android 預設的 YouTube App (YouTube Vanced, New Pipe, ...)"},{"body":"Open Source VPN 目前市面上 Open Source VPN 有一堆, 查了一下 OpenSource 的就有一堆, 眼花撩亂, 不知該選誰...\nOpenVPN: https://openvpn.net/ SoftEther VPN: https://softether.org/ Libreswan VPN: https://libreswan.org/ OpenSwan VPN: https://openswan.org/ strongSwan VPN: https://www.strongswan.org/ FreeLan VPN: https://www.freelan.org/ Open Connect VPN: https://www.infradead.org/openconnect/ 先看一下大家在 GitHub 上的星星數, 前兩名是 OpenVPN 和 SoftEther VPN\nOpenVPN SoftEther LibreSwan OpenSwan StrongSwan FreeLan OpenConnect GitHub star 7.2K 9K 662 770 1.4K 1.2K N/A Last release 2022/5/24 2021/6/24 2022/5/25 2021/1/22 2022/4/29 2019/5/7 2022/4/29 再用 Google Trend 比一下, 結果也滿明顯的, 第一名是 OpenVPN, 第二名是 SoftEther VPN, 那就比這兩個就好. (因為 Google Trend 只能比 5 個, 另外兩個沒放上來的基本上也是躺平) 測速比較 測速情境如下 使用 iPerf3 來測速 OpenVPN 使用預設的環境 (預設沒有開啟壓縮, 因為設定畫面上有提到開啟壓所可能會影響 security) SoftEther VPN 選擇的是他自己的 protocol (走 5555 那個) 不透過 VPN 直接連線, 每秒約 556Mbits\n1Connecting to host 211.73.81.92, port 5201 2[ 4] local 10.100.201.3 port 49787 connected to 211.73.81.92 port 5201 3[ ID] Interval Transfer Bandwidth 4[ 4] 0.00-1.00 sec 43.4 MBytes 363 Mbits/sec 5[ 4] 1.00-2.00 sec 20.5 MBytes 172 Mbits/sec 6[ 4] 2.00-3.00 sec 35.1 MBytes 295 Mbits/sec 7[ 4] 3.00-4.00 sec 67.0 MBytes 562 Mbits/sec 8[ 4] 4.00-5.00 sec 86.4 MBytes 725 Mbits/sec 9[ 4] 5.00-6.00 sec 81.1 MBytes 679 Mbits/sec 10[ 4] 6.00-7.00 sec 81.5 MBytes 686 Mbits/sec 11[ 4] 7.00-8.00 sec 82.8 MBytes 693 Mbits/sec 12[ 4] 8.00-9.00 sec 81.8 MBytes 687 Mbits/sec 13[ 4] 9.00-10.00 sec 83.0 MBytes 695 Mbits/sec 14- - - - - - - - - - - - - - - - - - - - - - - - - 15[ ID] Interval Transfer Bandwidth 16[ 4] 0.00-10.00 sec 662 MBytes 556 Mbits/sec sender 17[ 4] 0.00-10.00 sec 662 MBytes 556 Mbits/sec receiver 透過 OpenVPN 連線, 每秒約 193Mbits\n1Accepted connection from 192.168.211.4, port 49750 2[ 5] local 192.168.211.3 port 5201 connected to 192.168.211.4 port 49751 3[ ID] Interval Transfer Bitrate 4[ 5] 0.00-1.00 sec 28.5 MBytes 239 Mbits/sec 5[ 5] 1.00-2.00 sec 21.3 MBytes 179 Mbits/sec 6[ 5] 2.00-3.00 sec 21.1 MBytes 177 Mbits/sec 7[ 5] 3.00-4.00 sec 20.6 MBytes 173 Mbits/sec 8[ 5] 4.00-5.00 sec 18.7 MBytes 157 Mbits/sec 9[ 5] 5.00-6.00 sec 21.6 MBytes 181 Mbits/sec 10[ 5] 6.00-7.00 sec 25.4 MBytes 213 Mbits/sec 11[ 5] 7.00-8.00 sec 23.6 MBytes 198 Mbits/sec 12[ 5] 8.00-9.00 sec 23.8 MBytes 200 Mbits/sec 13[ 5] 9.00-10.00 sec 25.3 MBytes 212 Mbits/sec 14[ 5] 10.00-10.03 sec 660 KBytes 175 Mbits/sec 15- - - - - - - - - - - - - - - - - - - - - - - - - 16[ ID] Interval Transfer Bitrate 17[ 5] 0.00-10.03 sec 230 MBytes 193 Mbits/sec receiver 透過 SoftEther VPN 連線, 每秒約 98.8Mbits\n1Accepted connection from 192.168.211.4, port 37244 2[ 5] local 192.168.211.3 port 5201 connected to 192.168.211.4 port 37246 3[ ID] Interval Transfer Bitrate 4[ 5] 0.00-1.00 sec 11.5 MBytes 96.1 Mbits/sec 5[ 5] 1.00-2.00 sec 15.1 MBytes 127 Mbits/sec 6[ 5] 2.00-3.00 sec 10.7 MBytes 89.9 Mbits/sec 7[ 5] 3.00-4.00 sec 9.61 MBytes 80.6 Mbits/sec 8[ 5] 4.00-5.00 sec 12.1 MBytes 101 Mbits/sec 9[ 5] 5.00-6.00 sec 9.89 MBytes 83.0 Mbits/sec 10[ 5] 6.00-7.00 sec 6.34 MBytes 53.2 Mbits/sec 11[ 5] 7.00-8.00 sec 11.1 MBytes 92.7 Mbits/sec 12[ 5] 8.00-9.00 sec 15.7 MBytes 131 Mbits/sec 13[ 5] 9.00-10.00 sec 15.8 MBytes 132 Mbits/sec 14[ 5] 10.00-10.01 sec 235 KBytes 148 Mbits/sec 15- - - - - - - - - - - - - - - - - - - - - - - - - 16[ ID] Interval Transfer Bitrate 17[ 5] 0.00-10.01 sec 118 MBytes 98.8 Mbits/sec receiver 比較意外的是, SoftEhter VPN 官方網站有提到他比 OpenVPN 快 13 倍, 但測起來卻不是這樣. 不過一來這是 2006 年的測速, 二來 SoftEther VPN 的設定很多, 也 很有可能是我沒有調整好, 所以這個測試僅供參考.\nCPU 使用比較 這是測試在使用 iPerf3 測速時, 同時觀察 CPU 的使用率. 注意, 這是測 OpenVPN/SoftEther VPN 在用 iPerf3 測速時的 CPU, 並不是平常無流量或低流量的 CPU 使用. 沒有連線時, 兩者消耗的 CPU 都非常非常低. 透過 OpenVPN 連線, CPU 約使用 30.7%\n1top - 15:01:40 up 2 days, 3:22, 4 users, load average: 0.00, 0.00, 0.00 2Tasks: 119 total, 1 running, 118 sleeping, 0 stopped, 0 zombie 3%Cpu(s): 5.4 us, 9.9 sy, 0.0 ni, 82.8 id, 0.0 wa, 0.0 hi, 1.9 si, 0.0 st 4MiB Mem : 16009.7 total, 13538.6 free, 417.3 used, 2053.8 buff/cache 5MiB Swap: 0.0 total, 0.0 free, 0.0 used. 15288.2 avail Mem 6 7 PID USER PR NI VIRT RES SHR S %CPU %MEM TIME+ COMMAND 8 934 openvpn+ 20 0 8012 6748 5544 S 32.3 0.0 0:14.82 openvpn-openssl 透過 SoftEther VPN 連線, CPU 約使用 22.3%\n1top - 15:05:47 up 2 days, 3:26, 4 users, load average: 0.00, 0.01, 0.00 2Tasks: 120 total, 1 running, 119 sleeping, 0 stopped, 0 zombie 3%Cpu(s): 0.3 us, 0.5 sy, 0.0 ni, 99.0 id, 0.0 wa, 0.0 hi, 0.2 si, 0.0 st 4MiB Mem : 16009.7 total, 13512.0 free, 436.3 used, 2061.4 buff/cache 5MiB Swap: 0.0 total, 0.0 free, 0.0 used. 15269.1 avail Mem 6 7 PID USER PR NI VIRT RES SHR S %CPU %MEM TIME+ COMMAND 813540 ubuntu 20 0 1016272 20404 5576 S 22.7 0.1 0:03.93 vpnserver 結論 速度\n連線方式 速度 直接連線 556 Mbits OpenVPN 193 Mbits SoftEther 98.8 Mbits CPU 使用率\n連線方式 CPU 使用率 OpenVPN 32.3% SoftEther 22.7% 注意 有一點要注意的是, OpenVPN 雖然 Open Source, 但他的 免費版本只能有兩個連線 (參考這裡) 延伸閱讀 如果你要自己在 Linux(Ubuntu) 上安裝 OpenVPN server, 可參考 OpenVPN server 簡易安裝使用 (Ubuntu) 用果有興趣使用 Prometheus 來監控 OpenVPN server, 可參考 用 Prometheus 來監控 OpenVPN server 如果你使用的是 Asuswrt-Merlin, 他有內建 OpenVPN server, 可參考 在 Asuswrt-Merlin 使用 OpenVPN server ","link":"https://dennys.github.io/tw/doc/network/open-source-vpn-comparison/","section":"doc","tags":["VPN","Network"],"title":"Open Source VPN 之不嚴謹比較"},{"body":"","link":"https://dennys.github.io/tw/tags/pixel-5/","section":"tags","tags":null,"title":"Pixel 5"},{"body":" 提醒 這個方法不用 Root, 但需要裝一個 App, 而且這 App 會一直在執行. 需求 Android 在音量調整的部分, 鈴聲和通知的音量大小是綁在一起的, 無法分開. Google 一下, 其實滿多人反映這件事\n2017 年就有人開 ticket, 然後也 assign 人了, 不過看來是還沒進展, 中間也曾被 close 過. https://issuetracker.google.com/issues/69842456 =\u0026gt; 有 Google 帳號的可以上去 +1 一下 這是另一個 ticket, 他的訴求不太一樣, 是希望能把 notification 的聲音完全關掉, 這需求也被 accepted 了, 不過也是沒進展. https://issuetracker.google.com/issues/177060206 Mobile01 上的討論, 看來原生 Android 都是這樣, 只知道三星和LG的手機都是分開的 解法 (使用 Sound Profile App) Google 了很久, 找不到甚麼簡單的做法, 只找到一個 Sound Profile 可以做到, 安裝過程他會需要 Modify system settings 和 DoNotDisturbMode 這兩個權限. 執行後可以看到他內建了幾組 profile (Normal, Quiet, Silent, ...) 按左上角那三條線, 選一個 Profile 來修改 (這裡假設就選 Normal), 這裡可以看到, 他的音量在 Calls 和 Notification 是分開的, 在這裡可以各別選擇你要的音量 因為預設 Calls 和 Notification 這兩個音量是直接連接到 Android 系統本身的, 因此需要額外的權限才知道現在是 Calls 還是 Notification. 呈上, 這裡必須同意, Sound Profile 才會知道現在是 Calls 還是 Notification. 完成後請按 Save 離開\n成果 回到最外層, 選擇 Normal, 程式在設定好音量後, 會自動關起來, 之後就可以測試看看有沒有效了. 參考 Sound Profile 公司的說明網站: https://corcanoesoundprofile.ovh/volumes/. 結論 優點 Sound Profile 設定起來容易, 效果也好, 而且他功能其實很多, 有興趣可以玩玩. (不過滿多都要付費就是了) 缺點 要開至少以下四個權限 Modify system settings DoNotDisturbMode 電話 通知 這不是免費軟體, 而且不知道會不會停止發展下去, 作者有在請大家要付錢了. What's next 其實我覺得這個解法不是很好, 再看看有沒有其他方案, 若有建議也歡迎在下面留言給我, 謝謝.\n","link":"https://dennys.github.io/tw/doc/android/android-separate-call-and-notification-volume/","section":"doc","tags":["Android","Pixel 5"],"title":"如何分開調整 Android 鈴聲和通知的音量大小"},{"body":"","link":"https://dennys.github.io/tw/tags/google-tv/","section":"tags","tags":null,"title":"Google TV"},{"body":"","link":"https://dennys.github.io/tw/series/google-tv/","section":"series","tags":null,"title":"Google TV"},{"body":" 前言 使用 Google TV 截圖以後, 總要有方法把這些圖片檔弄出來, 以下是用 X-plore File Manager 來做到這個功能. 這程式提供很多種傳檔的方法, 甚至還可以看壓縮檔(APK)還有撥放影片. 我是只測試了 FTP/Web storage/Wifi sharing 三種方法. 這功能其實很少用, 找個簡單堪用的方法就好.\n假設我們要把檔案從/storage/eulated0/0/Pictures/Screenshots 目錄複製出來, 如下\n方法1: FTP (免費, 但是 read only) 選擇 FTP 輸入 username/password/port 等等, 注意, Read-only access 要付費版才有 啟動後就可以從 PC 使用 FTP client 連上來抓檔案 方法2: Google Drive (免費, 忘了測試是否雙向同步) 選擇 Web storage 他支援 Google Drive, Dropbox, OneDrive, ... 但因為他要取得權限, 就算了. 方法3: Web (要付費) 選擇 Wifi file sharing 開 browser 連上 Google TV (IP 請自行更改) 按右鍵他會顯示可以執行的功能, 不過這些都要付費版才有 回到 Google TV 上, 可看到畫面如下 What's next Syncthing-Fork 這是個嘗試同步不同平台資料的 Open source 的 project 的 Android 版本, 感覺滿酷的, 應該找個時間試試看.\n","link":"https://dennys.github.io/tw/doc/google_tv/googletv-file-transfer/","section":"doc","tags":["Google TV"],"title":"如何把檔案傳出 Google TV"},{"body":"需求 需要產生自訂大小的測試檔案, 是情擴可選擇檔案是可以被壓縮或不可以被壓縮.\n使用 fsutil (Windows 內建) 使用 Windows 內建的 fsutil 可以產生自訂大小的測試檔案, 如下\n1C:\\\u0026gt; rfsutil file createnew test 100000000 2檔案 C:\\Hugo\\site\\blog\\test 已經建立 3 4C:\\\u0026gt; dir test 5 6 C:\\\u0026gt; 的目錄 7 82022/06/21 上午 10:29 100,000,000 test 9 1 個檔案 100,000,000 位元組 10 0 個目錄 623,477,620,736 位元組可用 優點: Windows 內建指令\n缺點\n只能產生一個檔案 這個檔案是可以壓縮的 (用 Notepad++ 打開就會看到一堆 NUL) 檔案 size 不太直覺, 如果要產生 100M, 1G, 10G 的檔案, 得在那邊算很多位數 使用 NonCompressibleFiles 使用 NonCompressibleFiles, 好處很多\nPortable, 免安裝, 下載即可 可產生自訂大小, 自訂個數的檔案 可選擇這個檔案是可壓縮或不可壓縮 檔案大小的部分從 10KB, 100KB, 1MB, ... 10GB 有快速鍵可選 ","link":"https://dennys.github.io/tw/doc/software/noncompressiblefiles/","section":"doc","tags":["Software"],"title":"使用 NonCompressibleFiles 產生自訂大小/不可壓縮的測試檔案"},{"body":"需求 需要一個測試點對點網路速度的軟體, 要有以下幾項功能\n免費 支援 Windows 和 Linux 只測網路, 不測 I/O 有簡易報表 找了一下, iPerf3 算是符合需求\n安裝方法 (Server 和 Client 是同一個程式) 連線到 https://iperf.fr/iperf-download.php, 選擇需要的作業系統 如果是 Windows, 直接下載 iperf-3..-win64.zip 即可, 免安裝, server/client 是同一個執行檔 以 Ubuntu 為例, 理論上是執行這個指令就可以了 1sudo apt-get install iperf3 若是無法安裝, 可能是缺了某些 library, 可參考官網指示, 如下 (這是我執行時候的範本, 請參考官網看最新的指令) 1sudo apt remove iperf3 libiperf0 2sudo apt install libsctp1 3wget https://iperf.fr/download/ubuntu/libiperf0_3.9-1_amd64.deb 4wget https://iperf.fr/download/ubuntu/iperf3_3.9-1_amd64.deb 5sudo dpkg -i libiperf0_3.9-1_amd64.deb iperf3_3.9-1_amd64.deb 6rm libiperf0_3.9-1_amd64.deb iperf3_3.9-1_amd64.deb 測試 (Server 端) 不論 Windows 或是 Ubuntu, 指令都是一樣的簡單, 加上 -s 就可以了. 有需要的話, 可以加上 -p 指定 port 1$ iperf3 -s -p 5201 2----------------------------------------------------------- 3Server listening on 5201 4----------------------------------------------------------- 測試 (Client 端) 執行時指定 server 的 IP, port, 還有測試的時間長度就好, 他會顯示每秒的測速結果還有最後的平均值 1$iperf3.exe -c 192.168.1.3 -t 20 2Connecting to host 192.168.1.3, port 5201 3[ 4] local 192.168.1.4 port 56034 connected to 192.168.1.3 port 5201 4[ ID] Interval Transfer Bandwidth 5[ 4] 0.00-1.00 sec 46.0 MBytes 385 Mbits/sec 6[ 4] 1.00-2.00 sec 48.1 MBytes 403 Mbits/sec 7[ 4] 2.00-3.00 sec 48.8 MBytes 410 Mbits/sec 8[ 4] 3.00-4.00 sec 48.2 MBytes 404 Mbits/sec 9[ 4] 4.00-5.00 sec 48.2 MBytes 404 Mbits/sec 10[ 4] 5.00-6.00 sec 48.8 MBytes 410 Mbits/sec 11[ 4] 6.00-7.00 sec 49.1 MBytes 411 Mbits/sec 12[ 4] 7.00-8.00 sec 49.1 MBytes 413 Mbits/sec 13[ 4] 8.00-9.00 sec 48.4 MBytes 406 Mbits/sec 14[ 4] 9.00-10.00 sec 48.4 MBytes 406 Mbits/sec 15[ 4] 10.00-11.00 sec 49.4 MBytes 413 Mbits/sec 16[ 4] 11.00-12.00 sec 45.1 MBytes 379 Mbits/sec 17[ 4] 12.00-13.00 sec 49.5 MBytes 415 Mbits/sec 18[ 4] 13.00-14.00 sec 49.1 MBytes 411 Mbits/sec 19[ 4] 14.00-15.00 sec 50.0 MBytes 419 Mbits/sec 20[ 4] 15.00-16.00 sec 50.0 MBytes 420 Mbits/sec 21[ 4] 16.00-17.00 sec 49.5 MBytes 415 Mbits/sec 22[ 4] 17.00-18.00 sec 46.9 MBytes 393 Mbits/sec 23[ 4] 18.00-19.00 sec 49.1 MBytes 413 Mbits/sec 24[ 4] 19.00-20.00 sec 49.4 MBytes 414 Mbits/sec 25- - - - - - - - - - - - - - - - - - - - - - - - - 26[ ID] Interval Transfer Bandwidth 27[ 4] 0.00-20.00 sec 971 MBytes 407 Mbits/sec sender 28[ 4] 0.00-20.00 sec 971 MBytes 407 Mbits/sec receiver 29 30iperf Done. 後記 iPerf3 預設是測試 upload 的速度, 若要測試 download, 請記得加上 -R 參數 有個不錯的地方是, 他的 server 端也會有 log, 如下, 這樣很方便. 1----------------------------------------------------------- 2Server listening on 5201 3----------------------------------------------------------- 4Accepted connection from 192.168.1.4, port 56033 5[ 5] local 192.168.1.3 port 5201 connected to 192.168.1.4 port 56034 6[ ID] Interval Transfer Bitrate 7[ 5] 0.00-1.00 sec 44.9 MBytes 377 Mbits/sec 8[ 5] 1.00-2.00 sec 48.2 MBytes 404 Mbits/sec 9[ 5] 2.00-3.00 sec 48.7 MBytes 408 Mbits/sec 10[ 5] 3.00-4.00 sec 48.2 MBytes 404 Mbits/sec 11[ 5] 4.00-5.00 sec 48.2 MBytes 404 Mbits/sec 12[ 5] 5.00-6.00 sec 48.8 MBytes 409 Mbits/sec 13[ 5] 6.00-7.00 sec 49.1 MBytes 412 Mbits/sec 14[ 5] 7.00-8.00 sec 49.1 MBytes 412 Mbits/sec 15[ 5] 8.00-9.00 sec 48.5 MBytes 407 Mbits/sec 16[ 5] 9.00-10.00 sec 48.2 MBytes 405 Mbits/sec 17[ 5] 10.00-11.00 sec 49.5 MBytes 415 Mbits/sec 18[ 5] 11.00-12.00 sec 45.2 MBytes 380 Mbits/sec 19[ 5] 12.00-13.00 sec 49.5 MBytes 415 Mbits/sec 20[ 5] 13.00-14.00 sec 49.0 MBytes 411 Mbits/sec 21[ 5] 14.00-15.00 sec 49.8 MBytes 418 Mbits/sec 22[ 5] 15.00-16.00 sec 50.1 MBytes 420 Mbits/sec 23[ 5] 16.00-17.00 sec 49.5 MBytes 415 Mbits/sec 24[ 5] 17.00-18.00 sec 46.9 MBytes 393 Mbits/sec 25[ 5] 18.00-19.00 sec 49.1 MBytes 412 Mbits/sec 26[ 5] 19.00-20.00 sec 49.5 MBytes 415 Mbits/sec 27[ 5] 20.00-20.02 sec 1.12 MBytes 420 Mbits/sec 28- - - - - - - - - - - - - - - - - - - - - - - - - 29[ ID] Interval Transfer Bitrate 30[ 5] 0.00-20.02 sec 971 MBytes 407 Mbits/sec receiver ","link":"https://dennys.github.io/tw/doc/network/iperf3-point-to-point-network-speed-test/","section":"doc","tags":["Network"],"title":"點對點網路測速軟體 iPerf3"},{"body":"本站使用 Utterances 留言系統, 若有需要可在下面留言. 但因為這系統掛在 GitHub 上, 因此需要登入 GitHub 才可留言, 謝謝.\n","link":"https://dennys.github.io/tw/comments/","section":"","tags":null,"title":"留言板"},{"body":"","link":"https://dennys.github.io/tw/tags/word/","section":"tags","tags":null,"title":"Word"},{"body":"在 Word 貼 code 上去之後, 格式幾乎都會跑掉, 一個一個去設定不但麻煩也不漂亮. 找到一個簡單的方法可以讓 Word 裡面的 code 也有 syntax highlighting. 方法很簡單, 先把 code 放在 Notepad++, 然後依照下圖執行功能表上的 Plugins -\u0026gt; NppExport -\u0026gt; Copy all formats to clipboard. NppExport 是 Notepad++ 內建的 plugin, 他就會把加上 syntax highlighting 的 code 複製到 clipboard. 再來就到 Word 直接貼上即可, 在 Word 看到的結果如下, 有需要的話, 可再調整一下列的高度 實務上還有很多做法, 可參考 https://stackoverflow.com/questions/387453/\n","link":"https://dennys.github.io/tw/doc/word/word-with-syntax-highlighting-code/","section":"doc","tags":["Word"],"title":"如何讓 Word 裡面的程式有 syntax highlighting (語法突顯)"},{"body":"需求 建立一個 OpenVPN, 讓遠端機器可以連到內網的機器, 而且只能連到某一台特定機器.\n方法 (Server 端) 從這裡下載 OpenVPN server, 並依照他的指示執行 apt-get 等指令. (以下為參考, 請看 server 上的說明)\n1apt update \u0026amp;\u0026amp; apt -y install ca-certificates wget net-tools gnupg 2wget -qO - https://as-repository.openvpn.net/as-repo-public.gpg | apt-key add - 3echo \u0026#34;deb http://as-repository.openvpn.net/as/debian focal main\u0026#34;\u0026gt;/etc/apt/sources.list.d/openvpn-as-repo.list 4apt update \u0026amp;\u0026amp; apt -y install openvpn-as 最後一個指令的最後面請注意, 他會產生一個 admin 的密碼\n1To reconfigure manually, use the /usr/local/openvpn_as/bin/ovpn-init tool. 2 3+++++++++++++++++++++++++++++++++++++++++++++++ 4Access Server 2.10.3 has been successfully installed in /usr/local/openvpn_as 5Configuration log file has been written to /usr/local/openvpn_as/init.log 6 7 8Access Server Web UIs are available here: 9Admin UI: https://192.168.1.2:943/admin 10Client UI: https://192.168.1.2:943/ 11Login as \u0026#34;openvpn\u0026#34; with \u0026#34;fRxnu6bf3fC1\u0026#34; to continue 12(password can be changed on Admin UI) 13+++++++++++++++++++++++++++++++++++++++++++++++ 裝好後, 就可以直接連到 https://localhost:943/admin 用上面的帳號密碼進去\n因為這台 OpenVPN 是裝在內網, 必須在 Network setting 設定他 NAT 的外部 IP, 否則產生出來的 .opvn 檔案會連到 192.168.1.2 (當然這樣會永遠連不到) 預設他會開放讓 client 連到整個 private network, 因為我們要卡只能連到某一台, 因此要關掉這個 再來就是建立一個新帳號, 如下, 然後要在 access control 的地方卡住他只能連到哪個網段或IP 以上就完成 OpenVPN server 的安裝了\nOpenVPN client for Windows 先連到 http://example.com/ (注意, 這裡 url 沒有 admin), 然後選 Yourself (user-locked profile), 他會下載一個 profile***.ovpn 安裝 OpenVPN client for Windows, 目前有兩個版本, 兩個用起來差不多. OpenVPN Connect for Windows, 可在 這裡 下載 OpenVPN GUI, 可在[這裡] (https://openvpn.net/community-downloads/) 下載 執行下載的檔案, 將 OpenVPN client 安裝起來 Double click 步驟一產生的 .ovpn, 把這個檔案匯入 就可以試著連線了 如果需要自動連線, 可以在設定裡面修改 如何管理 OpenVPN server 可從Status overview看到整個server狀況, 目前連線人數還有log等等 有人有提供 Prometheus exporter, 但這是非官方的, 而且最後一次更新是 2019/9/7, 不過只少在 2022 年用起來還是可以. (可參考後面相關文章) 注意 有一點要注意的是, OpenVPN 雖然 Open Source, 但他的 免費版本只能有兩個連線 (參考這裡) 相關文章 用果有興趣使用 Prometheus 來監控 OpenVPN server, 可參考 用 Prometheus 來監控 OpenVPN server 如果你使用的是 Asuswrt-Merlin, 他有內建 OpenVPN server, 可參考 在 Asuswrt-Merlin 使用 OpenVPN server 這是一篇 Open Source VPN 方案的簡單比較和測速: Open Source VPN 之不嚴謹比較 ","link":"https://dennys.github.io/tw/doc/network/openvpn-server/","section":"doc","tags":["VPN","Network"],"title":"OpenVPN server 簡易安裝使用 (Ubuntu)"},{"body":"前言 要對 Google TV 截圖還滿麻煩的, 因為他沒幾個按鍵可用, 預設也沒有哪個按鍵是抓 screenshot 的, 找到一個軟體可以自訂遙控器的按鍵功能, 然後再找一個軟體把抓下來的畫面傳出來.\n方法 先在 Google TV 上安裝 Button Mapper: Remap your keys\n執行 Button Mapper, 選擇 Add Buttons 進去後按下藍色的 + Add Buttons, 下面那個 VOLUME_MUTE 164 這時候應該還沒出現, 我是做完後才來擷圖的. 選擇一個按鈕, 我選的是 靜音, 然後選 Double tap, 就是要連按兩下才啟動, 這樣就不影響原來的功能. 再來要選擇要執行的動作, 這裡選 Actions 這邊有很多個 Actions 可選, 繼續選擇 Actions 最後這個地方選擇 Screenshot 實際操作時, 在 Google TV 的任何畫面, 連按 靜音鍵兩次, 他就會把 screenshot 存到 /storage/eulated0/0/Pictures/Screenshots 目錄下\n這是用 X-plore File Manager看到的結果 把檔案傳出來 我是用 X-plore File Manager, 本來是想用他開一個 web server, 這樣最簡單, 結果這功能要錢. 但他連 Google Drive 的功能不用錢, 我就把檔案傳到 Google Drive 再傳下來了, 但這就要看你是否願意開權限了.\n","link":"https://dennys.github.io/tw/doc/google_tv/googletv-screenshot/","section":"doc","tags":["Google TV"],"title":"Google TV 遙控器如何擷圖 (screenshot)"},{"body":" 注意 這方法不是真的能控制電視音量, 只是控制 Google TV 的輸出音量!!! 前言 Chromecast With Google TV 要控制電視機的 音量 有 3 種方法\n走紅外線, 這個 Infocus 電視行不通, mobile01 上面很多人也都測過了, 不支援. 走 HDMI-CEC, 這個測試起來也是不支援. 但奇怪的是, Google TV 卻可以走 HDMI-CEC 控制電視? 改變 Google TV 的對外輸出音量 (既然無法改變電視的音量, 但總可以改變 Google TV 對外的音量吧). 做法 進入 Google TV 的設定, 選擇遙控器與配件 選擇設定遙控器按鈕 選擇音量控制 音量控制的部分選擇 \u0026quot;Chrome\u0026quot;, 其實從這裡就可以看到 Google TV 支援的 3 種方法了 實際操作時, 可以看到 Google TV 的音量調整和電視機本身的是不一樣的兩組. 本來想截圖, 但發現 Google TV 的音量調整不會被截到, 就算了.\n","link":"https://dennys.github.io/tw/doc/google_tv/googletv-volume-up-down/","section":"doc","tags":["Google TV"],"title":"Google TV 遙控器調整 Infocus 電視音量 (妥協做法)"},{"body":"前言 Chromecast With Google TV 要控制電視機的 開關 有 2 種方法\n做法 走紅外線, 這個 Infocus 電視行不通, mobile01 上面很多人也都測過了, 不支援.\n走 HDMI-CEC, 有三個地方要設定 1. 電視 2. Google TV 3. 遙控器 (從 Google TV 設定), 如下:\n電視機的設定\n打開電視機的 HDMI-CEC 功能 進入設定畫面 選 HDMI 模式 將\u0026quot;智慧連接\u0026quot;打開 將\u0026quot;自動開機\u0026quot;打開 奇怪的是, Google TV 卻沒辦法用 HDMI-CEC 控制 Infocus 電視的音量 注意, 下面的貼圖是抓官方說明書, 裡面寫的是\u0026quot;關閉\u0026quot;, 請勿照著設定, 要記得打開 Google TV 的設定\n進入 Google TV 的設定, 選擇顯示和音效 選擇 HDMI-CEC 選擇啟用 HDMI-CEC 遙控器的設定\n進入 Google TV 的設定, 選擇遙控器與配件 選擇設定遙控器按鈕 選擇 CEC 選擇 CEC 成果 這樣就完成了, 之後把 Google TV 打開時, 大概 1 秒就會把電視也打開, 關機也是一樣, 還是會有一點時間差, 而且是有感的, 但已經方便太多了.\n","link":"https://dennys.github.io/tw/doc/google_tv/googletv-power-on-off/","section":"doc","tags":["Google TV"],"title":"Google TV 遙控器開關 Infocus 電視 (使用 HDMI-CEC)"},{"body":"架站環境 目前使用 Hugo 搭配 hugo-clarity theme.\n歷年改版紀錄 2022/6/15 - 重新出發! 改用 Hugo + GitHub Pages 改用 Hugo, 將近 20 年的文章陸續回復中... (其實也沒有多少)\n2012~2022 - 改用 Google Blogger 和 Wordpress.com 2022/5 流量 (單月 703 pageview) 參考這裡: https://dennys.github.io/tw/posts/202205/20220531-month-pageviews/\n2012~2022 - 改用 Google Blogger 和 Wordpress.com 倒站期間, 暫時使用 Google Blogger 和 Wordpress.com 撐一下\n2003~2012 自架 CMS 管理網站 2012 - 倒站 正確的時間已不可考 (Archive.org 上面的最後更新日期是 2011/11/26), 因為硬體壞了, 倒站...\n2008/11/09 - 升級 Drupal 6 升級 Drupal 6 \u0026amp; Gallery 2.3\n2008 流量 (單月最高 6,145 pageview, FeedBurner 訂閱數達到 150) Google Analytics 上的記錄, 在 2008/10 有達到過一個月 6,145 pageview 這張圖是 2022/6/6 抓的, FeedBurner的訂閱人數最高峰時期有到 150 人, 不過隨著後來倒站和 RSS 式微, 現在已經沒甚麼人在用了吧. (不過我還是 RSS 死忠用戶) 2007/12/30 - 改用 Drupal 5 改用 Drupal 5\n2006 流量 (單月最高 32,993 pageview) 2006/3/25 - 升級 Gallery 2.1,Wordpress 2.0.2,WPG2 2.0 RC1 Upgrade to Gallery 2.1,Wordpress 2.0.2,WPG2 2.0 RC1\n2006/3/17 - 搬到 Linux 前前後後大約花了 4 小時吧, 把 Fedora 5.0 裝好, apache, mysql 等等設定好. 再把 wordpress, gallery, mysql ... 搬過去.\n還滿方便的, 現在 Linux 真是進步, 竟然直接就可以用雙螢幕了. SCIM 也內建好了, 不用再去找 xcin.\n2005 流量 (單月最高 17,332 pageview) 2005/9/13 升級 Gallery 2.0 and WPG2 1.0. Upgrade to Gallery 2.0 and WPG2 1.0.\n2005/04/17 改用 Wordpress 因為 Movable Type 的密碼忘記了, 實在 try 不出來, 又注意到 MT3 的license 改變了. 索性就換成 Wordpress 了. 而 Wordpress 需要個 database, 就裝上了 MySQL 4.1. 至於相簿軟體則沒有更動, 繼續使用 Gallery.\n2004 流量 (單月最高 8,199 pageview) 2003 流量 (單月 7,733 pageview) 2003/08/16 - 啟用 Blog, 使用 Movable Type 開張大吉, 使用 Movable Type 2.64\n1995~2003 手刻網站 1998-2000 - 第三代純手刻網頁 (當兵中) 1997-1998 - 第二代純手刻網頁 1995~1997 - 第一代純手刻網頁 ","link":"https://dennys.github.io/tw/about/","section":"","tags":null,"title":"關於"},{"body":"","link":"https://dennys.github.io/tw/series/android-%E6%94%B9%E6%A9%9F/","section":"series","tags":null,"title":"Android 改機"},{"body":"前言 Pixel 5 在 Unlock 之後, 自動更新就失效了, 得手動更新, 方法如下.\n事前準備 下載 Pixel OTA Images Pixel Factory Images 把redfin-sq1a.220205.002-factory-734556ab.zip (檔案名稱看實際的版本) 解壓縮, 要解兩層, 直到解出 boot.img 利用 Magisk 修補 boot.img, 產生的檔案名稱長類似這樣 magisk_patched-24201_LSQ4E.img, 再把這個檔案傳回電腦中 進入開發者模式並確定 adb devices 可以連 1C:\\platform-tools\u0026gt;adb devices 2List of devices attached 3*************** device 更新步驟 執行以下指令重新開機進入sideload mode\nadb reboot sideload\n刷入安全性更新檔案, 這個步驟會比較久\nadb sideload redfin-ota-sq1a.220205.002-84ba2421.zip\n完成上傳後勿重新開機，\u0026quot;在手機上\u0026quot; 選擇Reboot to bootloader\n刷入被 Magisk 修補後的 boot.img\nfastboot flash boot --slot=all magisk_patched-24201_LSQ4E.img\n執行以下指令重新開機\nfastboot reboot\n進入 設定-\u0026gt;關於-\u0026gt;Android 版本, 確定有更新成功.\n參考 https://forum.xda-developers.com/t/4356219/ https://www.mobile01.com/topicdetail.php?f=565\u0026amp;t=6487485 ","link":"https://dennys.github.io/tw/doc/android/update-unlocked-pixel5/","section":"doc","tags":["Android","改機"],"title":"如何更新 Unlock 過的 Pixel 5"},{"body":"","link":"https://dennys.github.io/tw/tags/%E6%94%B9%E6%A9%9F/","section":"tags","tags":null,"title":"改機"},{"body":"","link":"https://dennys.github.io/tw/tags/vnc/","section":"tags","tags":null,"title":"VNC"},{"body":"需求 YouTube 預設是不能讓人下載影片的, 即使是你自己上傳的影片也是一樣. 然後我的影片大多都設成私人, 就更沒辦法用一堆線上工具下載了. 研究了一下兩年前曾被 GitHub 下架的 youtube-dl, 看來他支援下載私人影片 (不需要帳號密碼, 用 cookie 即可).\n工具 需要 1.下載工具 2. 轉檔工具(合併檔案用) 3. 抓 cookie 的工具, 如下:\nyoutube-dl 或是 ytl-dp\nFFmpeg, 轉檔用\ncookie 工具, 我是用 Get cookies.txt 這個 extension, 各 browser 的下載位置如下:\nChrome (2022年7月被 Google 下架): https://chrome.google.com/webstore/detail/get-cookiestxt/bgaddhkoddajcdgocldbbfleckgcbcid Edge: https://microsoftedge.microsoft.com/addons/detail/get-cookiestxt/helleheikohejgehaknifdkcfcmceeip?hl=en Firefox: https://addons.mozilla.org/en-US/firefox/addon/cookies-txt/ (這個 extension 下架的相關討論可參考 https://www.reddit.com/r/youtubedl/comments/vuatbt)\n方法 準備 cookie\n既然這是私人影片, 就會卡權限, 因此要準備 cookie. (注意: 這個套件不會去抓無痕模式的 cookie). 安裝好後, 連上 youtube.com, 然後 export 檔案出來就好. 預設他取的名字會是 youtube.com_cookies.txt, 這邊就不修改檔案名稱. 下載檔案\n使用 youtube-dl 指令如下, 執行後就可以下載檔案了, 要注意的是, 如果沒有 FFmpeg, youtube-dl 就不會合併檔案, 最後就會有兩個檔案, 一個影片(mp4), 一個聲音(m4a), 得要再另外 merge, 很麻煩, 如下圖.\n1C:\\youtube\u0026gt;youtube-dl.exe --format bestvideo+bestaudio --limit-rate 2M cookies=youtube.com_cookies.txt https://www.youtube.com/watch?v=********/ 2[youtube] 7zTujXuka2c: Downloading webpage 3[youtube] 7zTujXuka2c: Downloading m3u8 information 4[youtube] 7zTujXuka2c: Downloading MPD manifest 5WARNING: You have requested multiple formats but ffmpeg or avconv are not installed. The formats won\u0026#39;t be merged. 6[dashsegments] Total fragments: 1047 7[download] Destination *****.f136.mp4 8[download] 100% of 208.99MiB in 02:59 9[dashsegments] Total fragments: 1047 10[download] Destination *****.f140.mp4 11[download] 100% of 81.84MiB in 01:48 因此, 直接在下載參數指定 FFmpeg 的目錄位置, 這樣在下載完後, 他就會去呼叫 FFmpeg 執行合併檔案的動作. 他會把 mp4/m4a 合併成一個 mp4 檔案, 然後把原來的檔案刪除.\n1C:\\youtube\u0026gt;youtube-dl.exe --ffmpeg-location C:\\bin\\ffmpeg\\bin --format bestvideo+bestaudio --limit-rate 2M --cookies=youtube.com_cookies.txt https://www.youtube.com/watch?v=********/ 2[youtube] 7zTujXuka2c: Downloading webpage 3[youtube] 7zTujXuka2c: Downloading m3u8 information 4[youtube] 7zTujXuka2c: Downloading MPD manifest 5WARNING: You have requested multiple formats but ffmpeg or avconv are not installed. The formats won\u0026#39;t be merged. 6[dashsegments] Total fragments: 1047 7[download] Destination *****.f136.mp4 8[download] 100% of 208.99MiB in 05:17 9[dashsegments] Total fragments: 1047 10[download] Destination *****.f140.mp4 11[download] 100% of 81.84MiB in 02:16 12[ffmpeg] Merging formats into \u0026#34;******.mp4\u0026#34; 13Delete original file *****.f136.mp4 (pass -k to keep) 14Delete original file *****.f140.mp4 (pass -k to keep) 另外也可以使用 YT-DLP 下載, YT-DLP 是 youtube-dl 的一個 fork, 他自己的官方說明是 \u0026quot;A youtube-dl fork with additional features and fixes\u0026quot;, 兩者的指令也都差不多, 試用了一下也沒甚麼問題, 只是下載完是 .mkv\n1C:\\youtube\u0026gt;yl-dlp.exe --ffmpeg-location C:\\ffmpeg\\bin --format bestvideo+bestaudio --limit-rate 2M --cookies=youtube.com_cookies.txt https://www.youtube.com/watch?v=********/ 2[youtube] 7zTujXuka2c: Downloading webpage 3[youtube] 7zTujXuka2c: Downloading android player API JSON 4[youtube] 7zTujXuka2c: Downloading m3u8 information 5[youtube] 7zTujXuka2c: Downloading MPD manifest 6[youtube] 7zTujXuka2c: Downloading m3u8 information 7[youtube] 7zTujXuka2c: Downloading MPD manifest 8[info] 7zTujXuka2c: Downloading 1 format(s): 247+140 9WARNING: Requested formats are incompatible for merge and will be merged into mkv 10[dashsegments] Total fragments: 1047 11[download] Destination *****.ff247.webm 12[download] 100% of 208.99MiB in 05:17 13[dashsegments] Total fragments: 1047 14[download] Destination *****.f140.mp4 15[download] 100% of 81.84MiB in 02:16 16[Merger] Merging formats into \u0026#34;******.mkv\u0026#34; 17Delete original file *****.f247.webm (pass -k to keep) 18Delete original file *****.f140.mp4 (pass -k to keep) 下載直播中的影片 (2022/7/15 更新) 嘗試下載直播中的影片, 失敗. 錯誤訊息是說影片格式不支援.\n1PS D:\\youtube\u0026gt; .\\yt-dlp.exe --format bestvideo+bestaudio --limit-rate 2M https://www.youtube.com/******** 2 3[youtube] wYyS4yx07mc: Downloading webpage 4[youtube] wYyS4yx07mc: Downloading android player API JSON 5[youtube] wYyS4yx07mc: Downloading m3u8 information 6[youtube] wYyS4yx07mc: Downloading m3u8 information 7ERROR: [youtube] wYyS4yx07mc: Requested format is not available. Use --list-formats for a list of available formats 在直播過程中看一下影片格式\n1PS D:\\youtube\u0026gt; .\\yt-dlp.exe --list-formats https://www.youtube.com/watch?v=********** 2[youtube] wYyS4yx07mc: Downloading webpage 3[youtube] wYyS4yx07mc: Downloading android player API JSON 4[youtube] wYyS4yx07mc: Downloading m3u8 information 5[youtube] wYyS4yx07mc: Downloading m3u8 information 6[info] Available formats for wYyS4yx07mc: 7ID EXT RESOLUTION FPS │ TBR PROTO │ VCODEC VBR ACODEC ABR 8────────────────────────────────────────────────────────────────────── 991 mp4 256x144 30 │ 269k m3u8 │ avc1.4d400c 269k mp4a.40.5 0k 1092 mp4 426x240 30 │ 507k m3u8 │ avc1.4d4015 507k mp4a.40.5 0k 1193 mp4 640x360 30 │ 962k m3u8 │ avc1.4d401e 962k mp4a.40.2 0k 1294 mp4 854x480 30 │ 1282k m3u8 │ avc1.4d401f 1282k mp4a.40.2 0k 13300 mp4 1280x720 60 │ 2922k m3u8 │ avc1.4d4020 2922k mp4a.40.2 0k 直播結束後, 再看一次下影片格式 =\u0026gt; 這是後來直播結束後再補的\n1PS D:\\bin\\youtube\u0026gt; .\\youtube-dl.exe --list-formats https://www.youtube.com/watch?v=wYyS4yx07mc 2[youtube] wYyS4yx07mc: Downloading webpage 3[youtube] wYyS4yx07mc: Downloading MPD manifest 4[info] Available formats for wYyS4yx07mc: 5format code extension resolution note 6139 m4a audio only DASH audio 59k , m4a_dash container, mp4a.40.5 (22050Hz), 58.95MiB 7251 webm audio only tiny 106k , webm_dash container, opus @106k (48000Hz), 128.35MiB 8140 m4a audio only tiny 129k , m4a_dash container, mp4a.40.2@129k (44100Hz), 156.44MiB 9278 webm 256x144 DASH video 95k , webm_dash container, vp9, 30fps, video only 10160 mp4 256x144 DASH video 108k , mp4_dash container, avc1.4d400b, 30fps, video only 11242 webm 426x240 DASH video 220k , webm_dash container, vp9, 30fps, video only 12133 mp4 426x240 DASH video 242k , mp4_dash container, avc1.4d400c, 30fps, video only 13134 mp4 640x360 360p 284k , mp4_dash container, avc1.4d401e@ 284k, 30fps, video only, 343.35MiB 14243 webm 640x360 DASH video 405k , webm_dash container, vp9, 30fps, video only 15244 webm 854x480 DASH video 752k , webm_dash container, vp9, 30fps, video only 16135 mp4 854x480 DASH video 1155k , mp4_dash container, avc1.4d400c, 30fps, video only 17136 mp4 1280x720 720p 1110k , mp4_dash container, avc1.64001f@1110k, 30fps, video only, 1.31GiB 18298 mp4 1280x720 720p60 1476k , mp4_dash container, avc1.640020@1476k, 60fps, video only, 1.74GiB 19247 webm 1280x720 DASH video 1505k , webm_dash container, vp9, 30fps, video only 20302 webm 1280x720 DASH video 2646k , webm_dash container, vp9, 60fps, video only 2118 mp4 640x360 360p 380k , avc1.42001E, 30fps, mp4a.40.2 (44100Hz), 459.69MiB 2222 mp4 1280x720 720p 1238k , avc1.64001F, 30fps, mp4a.40.2 (44100Hz) (best) 隨便找一個影片看一下格式 (非直播中的影片)\n1PS D:\\youtube\u0026gt; .\\yt-dlp.exe --list-formats https://www.youtube.com/watch?v=****** 2[youtube] Vbz4zPwsavc: Downloading webpage 3[youtube] Vbz4zPwsavc: Downloading android player API JSON 4[youtube] Vbz4zPwsavc: Downloading MPD manifest 5[youtube] Vbz4zPwsavc: Downloading MPD manifest 6[info] Available formats for Vbz4zPwsavc: 7ID EXT RESOLUTION FPS │ FILESIZE TBR PROTO │ VCODEC VBR ACODEC ABR ASR MORE INFO 8──────────────────────────────────────────────────────────────────────────────────────────────────────────────────── 9sb2 mhtml 48x27 │ mhtml │ images storyboard 10sb1 mhtml 80x45 │ mhtml │ images storyboard 11sb0 mhtml 160x90 │ mhtml │ images storyboard 12139-dash m4a audio only │ 734.38KiB 50k dash │ audio only mp4a.40.5 50k 22k DASH audio, m4a_dash 13139 m4a audio only │ 734.38KiB 47k https │ audio only mp4a.40.5 47k 22k low, m4a_dash 14140-dash m4a audio only │ 1.91MiB 129k dash │ audio only mp4a.40.2 129k 44k DASH audio, m4a_dash 15140 m4a audio only │ 1.91MiB 127k https │ audio only mp4a.40.2 127k 44k medium, m4a_dash 16251-dash webm audio only │ 1.98MiB 142k dash │ audio only opus 142k 48k DASH audio, webm_dash 17251 webm audio only │ 1.98MiB 132k https │ audio only opus 132k 48k medium, webm_dash 1817 3gp 176x144 8 │ 1.04MiB 69k https │ mp4v.20.3 69k mp4a.40.2 0k 22k 144p 19160 mp4 256x144 30 │ ~ 1.66MiB 108k dash │ avc1.4d400b 108k video only DASH video, mp4_dash 20278 webm 256x144 30 │ ~ 1.46MiB 95k dash │ vp9 95k video only DASH video, webm_dash 21133 mp4 426x240 30 │ ~ 3.72MiB 242k dash │ avc1.4d400c 242k video only DASH video, mp4_dash 22242 webm 426x240 30 │ ~ 3.39MiB 220k dash │ vp9 220k video only DASH video, webm_dash 23134-dash mp4 640x360 30 │ 5.31MiB 635k dash │ avc1.4d401e 635k video only DASH video, mp4_dash 24134 mp4 640x360 30 │ 5.31MiB 353k https │ avc1.4d401e 353k video only 360p, mp4_dash 2518 mp4 640x360 30 │ ~ 7.38MiB 479k https │ avc1.42001E 479k mp4a.40.2 0k 44k 360p 26243 webm 640x360 30 │ ~ 6.24MiB 405k dash │ vp9 405k video only DASH video, webm_dash 27135 mp4 854x480 30 │ ~ 17.76MiB 1155k dash │ avc1.4d4014 1155k video only DASH video, mp4_dash 28244 webm 854x480 30 │ ~ 11.58MiB 752k dash │ vp9 752k video only DASH video, webm_dash 2922 mp4 1280x720 30 │ ~ 27.88MiB 1812k https │ avc1.64001F 1812k mp4a.40.2 0k 44k 720p 30136 mp4 1280x720 30 │ ~ 35.53MiB 2310k dash │ avc1.4d4016 2310k video only DASH video, mp4_dash 31247 webm 1280x720 30 │ ~ 23.15MiB 1505k dash │ vp9 1505k video only DASH video, webm_dash 32298 mp4 1280x720 60 │ ~ 53.29MiB 3465k dash │ avc1.4d4016 3465k video only DASH video, mp4_dash 33302 webm 1280x720 60 │ ~ 40.70MiB 2646k dash │ vp9 2646k video only DASH video, webm_dash 34299-dash mp4 1920x1080 60 │ 47.01MiB 5817k dash │ avc1.64002a 5817k video only DASH video, mp4_dash 35299 mp4 1920x1080 60 │ 47.01MiB 3130k https │ avc1.64002a 3130k video only 1080p60, mp4_dash 36303 webm 1920x1080 60 │ ~ 67.83MiB 4410k dash │ vp9 4410k video only DASH video, webm_dash 拿掉 --format bestvideo+bestaudio 硬是要下載, 還是失敗\n1PS D:\\youtube\u0026gt; .\\yt-dlp.exe --limit-rate 2M --ffmpeg-location d:\\bin\\ffmpeg\\bin https://www.youtube.com/watch?v=********** 2[youtube] wYyS4yx07mc: Downloading webpage 3[youtube] wYyS4yx07mc: Downloading android player API JSON 4[youtube] wYyS4yx07mc: Downloading m3u8 information 5[youtube] wYyS4yx07mc: Downloading m3u8 information 6[info] wYyS4yx07mc: Downloading 1 format(s): 300 7[download] Destination: American Eagle Kindergarten Graduation 2022 2022-07-15 20_29 [wYyS4yx07mc].mp4 8[hls @ 00000268ad39c7c0] Skip (\u0026#39;#EXT-X-VERSION:3\u0026#39;) 9[hls @ 00000268ad39c7c0] Skip (\u0026#39;#EXT-X-PROGRAM-DATE-TIME:2022-07-15T12:29:26.014+00:00\u0026#39;) 10...... 結論: 乖乖等直播完再下載\n","link":"https://dennys.github.io/tw/doc/software/download-youtube-private-video/","section":"doc","tags":["YouTube","Software"],"title":"如何下載 YouTube 私人影片 (使用 youtube-dl 或 ytl-dp)"},{"body":"需求 需要一個遠端登入的功能, 要做到以下幾項功能\n進去的時候不能有任何跳出的畫面, 就是不讓使用者有感覺的意思 進去的時候, 預設是只有 \u0026quot;看\u0026quot; 而不能控制滑鼠鍵盤, 同樣也是不讓使用者有感覺 有需要的話, 可以切換一下, 就可以控制滑鼠鍵盤了 方法 (Server 端) 測試了一下, TeamViewer 和 AnyDesk 都做不出來這種功能, 目前是只有看到 RealVNC可以做到, 就先用這個測試.\n先下載 RealVNC server (從這裡下載: https://www.realvnc.com/en/connect/download/vnc/)\n打開設定, 把 show accept/reject prompt for each connection 關掉, 這樣連線上去時就不會跳一個視窗出來問是否同意連線. 再關掉 Notify when users connect and disconnect, 這樣連線時就不會跳出視窗. 另外, 預設是如果一段時間沒動作, 就會自動斷線. 如果不希望這樣, 可以把 Disconnect users who have been idle for an extended period 取消, 這樣就算放一整天也不會斷線. (也可以在 Expert 裡面設定 idleTimeout 時間) 如果沒有關掉, 那有人連上來時, 就會跳出這個視窗, 就被發現了, 如下 😋\n方法 (Client 端) 先下載 RealVNC viewer (從這裡下載: https://www.realvnc.com/en/connect/download/viewer/)\n在連線以前, 把 Option 裡面的 View-only 打開, 這樣你連上去的時候, 就不會去動到對方的滑鼠. 成果 依照以上設定好, 就可以神不知鬼不覺得連到對方電腦了. 不會有任何的聲音和跳出畫面. 當然, 對方如果進去 VNC Server 看, 還是可以看到有誰連進來, 這個就沒招了. 如果臨時想去移動對方的鍵盤滑鼠怎麼辦? 很簡單, VNC 的工具列可以改設定, 直接把 View-only 拿掉就可以了. ","link":"https://dennys.github.io/tw/doc/network/realvnc/","section":"doc","tags":["VNC","Network"],"title":"無聲無影遠端桌面連線 - VNC"},{"body":"","link":"https://dennys.github.io/tw/tags/asuswrt-merlin/","section":"tags","tags":null,"title":"Asuswrt-Merlin"},{"body":"","link":"https://dennys.github.io/tw/series/asuswrt-merlin-%E6%94%B9%E6%A9%9F/","section":"series","tags":null,"title":"Asuswrt-Merlin 改機"},{"body":"","link":"https://dennys.github.io/tw/tags/router/","section":"tags","tags":null,"title":"Router"},{"body":"Asuswrt-Merlin 提供的 VPN 方案 Asuswrt-Merlin 提供兩種 VPN server 工具, PPTP 和 OpenVPN. PPTP 看起來已經被淘汰, 連 iOS 10 以上都不支援 PPTP 了. 因此目前看來是只能用 OpenVPN.\n註1: Asuswrt 官方原版似乎有提供 PPTP, OpenVPN, IPSec VPN 這三種 VPN server, 可參考 https://www.asus.com/tw/support/FAQ/1044190/, 不過我已經刷 Asuswrt-Merlin 了, 就不測試了.\n測試環境 Asus RC-AC66U B1 Asuswrt-Merlin 386.5 (這個版本的 OpenVPN 是 2.5.5) OpenVPN server 安裝 Asuswrt-Merlin 已經內建就裝好了 OpenVPN (server 和 client 都有), 不用另外安裝. 如果你要查詢 OpenVPN 版本, 可參考這裡 https://www.asuswrt-merlin.net/changelog. 以我測試的 Asuswrt-Merlin 386.5_2 版本來看, 他用的 OpenVPN 版本是 2.5.6 (第 3 列) 1386.5_2 (25-March-2022) 2- UPDATED: openssl to 1.1.1n. 3- UPDATED: openvpn to 2.5.6. 4- CHANGED: Added Wireguard module + userspace tool to 5 GT-AXE11000. 6...... OpenVPN server 設定 1. OpenVPN server 一般設定 首先進入 VPN 伺服器, 他可以建立兩個 OpenVPN server, 預設是 Server 1, 把它開啟. 我的需求是只有要透過 VPN 來連內網的電腦, 沒有要再連出去 Internet, 所以設定 \u0026quot;LAN only\u0026quot;. 另外, 如果需要使用者輸入帳號密碼, 請在最後面新增一個 username. 2. OpenVPN server 進階設定 再來是進階設定, 先在下拉式選單這裡選 \u0026quot;進階設定\u0026quot;\n進階設定內容如下, 如果希望 user 在 login 的時候要輸入帳號密碼, 那 \u0026quot;Username/Password Authentication 就需要選 \u0026quot;是\u0026quot;.\n設定好後, 請再回到一般設定, 然後把設定值輸出到成一個 .opvn 檔案.\n要注意的是, Asuswrt-Merlin 產生的 client1.ovpn 裡面給的是 IP, 如果你用的不是固定 IP, 而是使用 DDNS 之類的, 請記得修改裡面 remote 後面的 IP. 下面是 DDNS 的設定\n以這個例子來講, 請注意這邊要自己修改 remote 後面的 test12345.asuscomm.com, 不然他預設給的是 IP, 這樣一旦 IP 跑掉, 就連不上了.\n1# Config generated by Asuswrt-Merlin 386.5, requires OpenVPN 2.4.0 or newer. 2 3client 4dev tun 5proto udp 6remote test12345.asuscomm.com 1194 7resolv-retry infinite 8nobind 9float 10ncp-ciphers AES-128-GCM:AES-256-GCM:AES-128-CBC:AES-256-CBC 11comp-lzo adaptive 12keepalive 15 60 13remote-cert-tls server OpenVPN Client for Windows 下載 OpenVPN client, 裝好後選 import 匯入設定檔, 把上面的檔案輸入進去, 就可以使用了. OpenVPN client for Windows, 目前有兩個版本, 兩個用起來差不多. OpenVPN Connect for Windows, 可在 這裡 下載 OpenVPN GUI, 可在 這裡 下載 OpenVPN Client for Android 從這裡下載: https://play.google.com/store/apps/details?id=net.openvpn.openvpn\n連線成功後, 會出現這樣的通知, 可以直接在通知的地方暫停或斷線, 還滿方便的.\nApp 本身也會顯示使用的網路狀況, 可看出連線時間還有進出的流量等等資訊.\nOpenVPN Client for iOS, MacOS, Linux 可在這裡下載其他平台的 client. Asuswrt-Merlin OpenVPN Server 上的連線狀況 從這裡可以看出他有幾個 client, 實際和VPN的IP, 從甚麼時候連的, 使用的資料量等等.\nAsuswrt-Merlin OpenVPN 還不足的地方 感覺這還是比較陽春的 VPN server, 想到幾個不足的地方, 不過個人使用綽綽有餘了.\n沒有 timeout 機制, 連上來了就不會斷線. 沒法限制 client 個數, 可能可以用 DHCP IP 數量來卡. (Synology 的 OpenVPN 可以卡 client 個數) 管理介面沒法把人踢掉 Asuswrt-Merlin OpenVPN 的好處 個人簡易使用還滿方便的, 不用為了做一個 VPN 還找找一台機器. 他沒有 OpenVPN 2 個連線的限制 (參考這裡) 延伸閱讀 (for OpenVPN) 如果你要自己在 Linux(Ubuntu) 上安裝 OpenVPN server, 可參考 OpenVPN server 簡易安裝使用 (Ubuntu) 用果有興趣使用 Prometheus 來監控 OpenVPN server, 可參考 用 Prometheus 來監控 OpenVPN server 這是一篇 Open Source VPN 方案的簡單比較和測速: Open Source VPN 之不嚴謹比較 ","link":"https://dennys.github.io/tw/doc/router/asuswrt-merlin-openvpn-server/","section":"doc","tags":["VPN","Asuswrt-Merlin","改機","Router"],"title":"在 Asuswrt-Merlin 使用 OpenVPN server"},{"body":"","link":"https://dennys.github.io/tw/posts/","section":"posts","tags":null,"title":"Posts"},{"body":"單月創新高 703 pageviews, 圖是後來才抓的, 所以才會有 6 月的日期.\n","link":"https://dennys.github.io/tw/posts/202205/20220531-month-pageviews/","section":"posts","tags":null,"title":"單月創新高 703 pageviews / 月"},{"body":"","link":"https://dennys.github.io/tw/categories/%E7%94%9F%E6%B4%BB%E5%A4%A7%E5%B0%8F%E4%BA%8B/","section":"categories","tags":null,"title":"生活大小事"},{"body":"單日創新高 66 pageviews, 圖是後來才抓的, 所以才會有 6 月的日期.\n","link":"https://dennys.github.io/tw/posts/202205/20220529-day-pageviews/","section":"posts","tags":null,"title":"單日創新高 66 pageviews / 日"},{"body":"單週創新高 223 pageviews, 圖是後來才抓的, 所以才會有 6 月的日期.\n","link":"https://dennys.github.io/tw/posts/202205/20220530-week-pageviews/","section":"posts","tags":null,"title":"單週創新高 223 pageview / 週"},{"body":"需求 Android 可以從快速設定來開關零打擾, 但預設只能開和關, 常常開了後就忘了關了.\n作法 如果要調整零打擾的長度, 可從這裡修改: 設定 -\u0026gt; 通知 -\u0026gt; 零打擾 -\u0026gt; 從快速設定開啟時的持續時間長度\n預設值是\u0026quot;直到你關閉為止\u0026quot;, 因此他就只能開和關. 我是把它改成\u0026quot;每次都詢問\u0026quot;\n改過之後再看快速設定, 右邊就多了一個箭頭, 按下去就會有選項\n結果 這裡就可以設定你要零打擾的時間長度 (以小時為單位), 或是直接指定時間.\n","link":"https://dennys.github.io/tw/doc/android/android-do-not-disturb/","section":"doc","tags":["Android"],"title":"如何設定 Android 零打擾的時間長度"},{"body":"需求 不知道為甚麼, 手機接一般藍牙喇叭都不會延遲, 但接車機藍牙就會延遲, 而且延遲時間會愈來愈長. 聽音樂是還好, 但是導航語音延遲太長就是個問題了, 可能地方都過了才聽到聲音.\n作法 後來找到的解法是, 設定不要\u0026quot;透過藍牙撥放語音\u0026quot;, 這樣就可以了. 當有導航時, 車上的音樂 (從手機的藍牙過來) 會暫停, 然後導航語音是直接從手機出來. 要注意的是, 導航音量可能要調大聲一點.\n","link":"https://dennys.github.io/tw/doc/android/google-maps-bluetooth-voice-music/","section":"doc","tags":["Android"],"title":"Google Maps 將音樂輸出到藍牙喇叭, 但語音留在手機"},{"body":"需求 Gmail 的通知, 預設是可以在通知的地方選\u0026quot;封存\u0026quot;或\u0026quot;回覆\u0026quot;, 但其實可以修改.\n作法 打開 Gmail App, 進入一般設定, 修改預設的電子郵件通知動作, 預設是\u0026quot;封存\u0026quot;, 把它改成刪除. 修改完後, 就可以在收到 Gmail 通知時, 直接刪除信件. 後記 如果可以讓封存和刪除都出來就更好了.\n","link":"https://dennys.github.io/tw/doc/android/gmail-notify-delete-archive/","section":"doc","tags":["Android"],"title":"將 Gmail 的通知改成可以直接刪除 (預設是封存)"},{"body":"前言 自 Android 12 開始, 鎖定畫面的時鐘變成兩列, 而且無法更改.\n看起來評價不是很好, 我也覺得很不直覺...\n不過自 2022年3月更新後, 新增了一個選項, 可以取消雙行時鐘了.\n成果 結果就會變成如下\n參考: Google Pixel Update - March 2022(https://support.google.com/pixelphone/thread/153884074/google-pixel-update-march-2022) (奇怪的是, 官方的 3 月更新 list 並沒有提到這點.) Google community 的說明: https://support.google.com/pixelphone/thread/133395984?hl=en\u0026amp;msgid=154180966 ","link":"https://dennys.github.io/tw/doc/android/android-12-lock-screen-double-line-clock/","section":"doc","tags":["Android"],"title":"把 Android 12 鎖定畫面的時鐘改單行"},{"body":" 注意 系統刷機有一定的風險, 可能導致手機無法開機和失去保固, 資料還會被清空, 執行前請先三思!!! 本文更新紀錄 2022/05/30: 新增系統更新或 Wi-Fi 密碼修改後的處理方式 Wi-Fi CA 憑證驗證在 Android 11 的改變 Android 10 以前, 如果是連到 Enterprise Wi-Fi (EAP/PEAP), CA 憑證是可以選 \u0026quot;不要驗證\u0026quot;, 如下:\n自 Android 11 起, 如果是連到 Enterprise Wi-Fi (PEAP), CA 憑證就無法選 \u0026quot;不要驗證\u0026quot;, 原因可參考 https://www.xda-developers.com/android-11-break-enterprise-wifi-connection/. 這個方向是對的, 但如果網管不改, 一般使用者恐怕也無能為力. (而且 iPhone 至少到 15.4 都沒有卡這個...)\n爬了一下文, 看來是可以直接把這個設定加回去 (參考: https://android.stackexchange.com/questions/231859/), 但很不幸的, 檔案是放在 /data/misc/apexdata/com.android.wifi/WifiConfigStore.xm, 這裡的檔案必須 Unlock 才能修改. 文章裡面是寫有可能透過 App 修改, 但我沒找到方法, 如果有人找到好方法了, 也麻煩分享一下.\n修改步驟 首先, 要 Unlock, Pixel 5 (Android 12) 可參考 https://dennys.github.io/tw/doc/android/google-pixel-5-root-magisk/. (要做到把 boot.img 換掉, Magisk 不需要裝)\n試著連上 Wi-Fi, 網域就隨便給他寫, 然後試著連線, 這當然是不會成功, 目的只是要先寫入一版 Config 檔案, 等一下可以修改. 先用下列指令檢查 WifiConfigStore.xml 是否正確, 這裡也可以用 adb pull 拉到電腦檢查, 但我一直沒成功, 就先用 cat 看. 若執行時發生\n1adb shell 2su 3cat /data/misc/apexdata/com.android.wifi/WifiConfigStore.xml 若執行 su 時發生 inaccessible or not found (如下), 通常是 root 沒成功, 請再確認一次 root 步驟. 1127|redfin:/system/bin $ su 2/system/bin/sh: su: inaccessible or not found 讀出來的 WifiConfigStore.xml 內容如下, 可找 WifiEnterpriseConfiguration 這個關鍵字, 目的是要把 12,13 行的設定值清掉\n1\u0026lt;WifiEnterpriseConfiguration\u0026gt; 2\u0026lt;string name=\u0026#34;Identity\u0026#34;\u0026gt;這裡是帳號名字\u0026lt;/string\u0026gt; 3\u0026lt;string name=\u0026#34;AnonIdentity\u0026#34;\u0026gt;\u0026lt;/string\u0026gt; 4\u0026lt;string name=\u0026#34;Password\u0026#34;\u0026gt;這裡是密碼\u0026lt;/string\u0026gt; 5\u0026lt;string name=\u0026#34;ClientCert\u0026#34;\u0026gt;\u0026lt;/string\u0026gt; 6\u0026lt;string name=\u0026#34;CaCert\u0026#34;\u0026gt;\u0026lt;/string\u0026gt; 7\u0026lt;string name=\u0026#34;SubjectMatch\u0026#34;\u0026gt;\u0026lt;/string\u0026gt; 8\u0026lt;string name=\u0026#34;Engine\u0026#34;\u0026gt;0\u0026lt;/string\u0026gt; 9\u0026lt;string name=\u0026#34;EngineId\u0026#34;\u0026gt;\u0026lt;/string\u0026gt; 10\u0026lt;string name=\u0026#34;PrivateKeyId\u0026#34;\u0026gt;\u0026lt;/string\u0026gt; 11\u0026lt;string name=\u0026#34;AltSubjectMatch\u0026#34;\u0026gt;\u0026lt;/string\u0026gt; 12\u0026lt;string name=\u0026#34;DomSuffixMatch\u0026#34;\u0026gt;這裡是上面隨便輸入的網域\u0026lt;/string\u0026gt; 13\u0026lt;string name=\u0026#34;CaPath\u0026#34;\u0026gt;/system/etc/security/cacerts\u0026lt;/string\u0026gt; 14\u0026lt;int name=\u0026#34;EapMethod\u0026#34; value=\u0026#34;0\u0026#34; /\u0026gt; 15\u0026lt;int name=\u0026#34;Phase2Method\u0026#34; value=\u0026#34;4\u0026#34; /\u0026gt; 16\u0026lt;string name=\u0026#34;PLMN\u0026#34;\u0026gt;\u0026lt;/string\u0026gt; 17\u0026lt;string name=\u0026#34;Realm\u0026#34;\u0026gt;\u0026lt;/string\u0026gt; 18\u0026lt;int name=\u0026#34;Ocsp\u0026#34; value=\u0026#34;0\u0026#34; /\u0026gt; 19\u0026lt;string name=\u0026#34;WapiCertSuite\u0026#34;\u0026gt;\u0026lt;/string\u0026gt; 20\u0026lt;boolean name=\u0026#34;AppInstalledRootCaCert\u0026#34; value=\u0026#34;false\u0026#34; /\u0026gt; 21\u0026lt;boolean name=\u0026#34;AppInstalledPrivateKey\u0026#34; value=\u0026#34;false\u0026#34; /\u0026gt; 22\u0026lt;null name=\u0026#34;KeyChainAlias\u0026#34; /\u0026gt; 23\u0026lt;null name=\u0026#34;DecoratedIdentityPrefix\u0026#34; /\u0026gt; 24\u0026lt;/WifiEnterpriseConfiguration\u0026gt; 執行以下指令 (這指令是直接從上面那篇 stackexchange 抄過來的), 他就會把 CaPath 和 DomSuffixMatch 的內容改成空白. 最後一個步驟會重開, 要重開才會生效.\n1adb shell 2su 3sed -i \u0026#39;s%\u0026lt;string name=\u0026#34;CaPath\u0026#34;\u0026gt;.*\u0026lt;/string\u0026gt;%\u0026lt;string name=\u0026#34;CaPath\u0026#34;\u0026gt;\u0026lt;/string\u0026gt;%\u0026#39; /data/misc/apexdata/com.android.wifi/WifiConfigStore.xml 4sed -i \u0026#39;s%\u0026lt;string name=\u0026#34;DomSuffixMatch\u0026#34;\u0026gt;.*\u0026lt;/string\u0026gt;%\u0026lt;string name=\u0026#34;DomSuffixMatch\u0026#34;\u0026gt;\u0026lt;/string\u0026gt;%\u0026#39; /data/misc/apexdata/com.android.wifi/WifiConfigStore.xml 5reboot 重開完後, 檢查 /data/misc/apexdata/com.android.wifi/WifiConfigStore.xml 的內容, 確認下面 12~13 列的設定被清空了\n1\u0026lt;WifiEnterpriseConfiguration\u0026gt; 2\u0026lt;string name=\u0026#34;Identity\u0026#34;\u0026gt;這裡是帳號名字\u0026lt;/string\u0026gt; 3\u0026lt;string name=\u0026#34;AnonIdentity\u0026#34;\u0026gt;\u0026lt;/string\u0026gt; 4\u0026lt;string name=\u0026#34;Password\u0026#34;\u0026gt;這裡是密碼\u0026lt;/string\u0026gt; 5\u0026lt;string name=\u0026#34;ClientCert\u0026#34;\u0026gt;\u0026lt;/string\u0026gt; 6\u0026lt;string name=\u0026#34;CaCert\u0026#34;\u0026gt;\u0026lt;/string\u0026gt; 7\u0026lt;string name=\u0026#34;SubjectMatch\u0026#34;\u0026gt;\u0026lt;/string\u0026gt; 8\u0026lt;string name=\u0026#34;Engine\u0026#34;\u0026gt;0\u0026lt;/string\u0026gt; 9\u0026lt;string name=\u0026#34;EngineId\u0026#34;\u0026gt;\u0026lt;/string\u0026gt; 10\u0026lt;string name=\u0026#34;PrivateKeyId\u0026#34;\u0026gt;\u0026lt;/string\u0026gt; 11\u0026lt;string name=\u0026#34;AltSubjectMatch\u0026#34;\u0026gt;\u0026lt;/string\u0026gt; 12\u0026lt;string name=\u0026#34;DomSuffixMatch\u0026#34;\u0026gt;\u0026lt;/string\u0026gt; 13\u0026lt;string name=\u0026#34;CaPath\u0026#34;\u0026gt;\u0026lt;/string\u0026gt; 14\u0026lt;int name=\u0026#34;EapMethod\u0026#34; value=\u0026#34;0\u0026#34; /\u0026gt; 15\u0026lt;int name=\u0026#34;Phase2Method\u0026#34; value=\u0026#34;4\u0026#34; /\u0026gt; 16\u0026lt;string name=\u0026#34;PLMN\u0026#34;\u0026gt;\u0026lt;/string\u0026gt; 17\u0026lt;string name=\u0026#34;Realm\u0026#34;\u0026gt;\u0026lt;/string\u0026gt; 18\u0026lt;int name=\u0026#34;Ocsp\u0026#34; value=\u0026#34;0\u0026#34; /\u0026gt; 19\u0026lt;string name=\u0026#34;WapiCertSuite\u0026#34;\u0026gt;\u0026lt;/string\u0026gt; 20\u0026lt;boolean name=\u0026#34;AppInstalledRootCaCert\u0026#34; value=\u0026#34;false\u0026#34; /\u0026gt; 21\u0026lt;boolean name=\u0026#34;AppInstalledPrivateKey\u0026#34; value=\u0026#34;false\u0026#34; /\u0026gt; 22\u0026lt;null name=\u0026#34;KeyChainAlias\u0026#34; /\u0026gt; 23\u0026lt;null name=\u0026#34;DecoratedIdentityPrefix\u0026#34; /\u0026gt; 24\u0026lt;/WifiEnterpriseConfiguration\u0026gt; 這時候就可以測試連線了\n因為實際上並不需要 root, 只是為了修改 WifiConfigStore.xml, 因此改完後可以 UnRoot (移除 Magisk 和刷回原廠 boot.img), 但因為解鎖會清空資料, 而且下次又遇到新的 Wi-Fi 又得重來, 我就維持解鎖狀態了. 方法可參考 https://dennys.github.io/tw/doc/android/android-remove-root-magisk/\n系統更新後如何處理? 不用處理, 至少目前我的 Pixel 5 更新到 2022 年 5 月更新 (12.1.0 (SP2A.220505.002, May 2022) 時, 都不需要處理.\nWi-Fi 密碼更新後如何處理? 如果系統有更新過, 就得先用 Magisk 重新 patch 一次. 一樣要試著連線 (當然不會成功), 重點是把密碼寫進去. 然後再用 adb shell 跑一次上面的 sed 指令修改 WifiConfigStore.xml 即可. 後記 這個方法並不是把不要驗證 (Do Not Validate) 的設定加回去, 而是先嘗試連線一個要驗證的 Wi-Fi (當然這裡會失敗), 等他把設定檔存下來之後, 再進系統把憑證的設定改掉, 所以還是和 Android 10 以前不太一樣. 而且 每次連上一個新的要使用 EAP 的 Wi-Fi 基地台都要重新執行一次 , 會比較麻煩.\n","link":"https://dennys.github.io/tw/doc/android/add-do-not-validate-android-11-peap-mschapv2-wifi/","section":"doc","tags":["Android","Root","Magisk","改機","Pixel 5"],"title":"Android 11 如何不要驗證 Wi-Fi CA 憑證"},{"body":" 注意 系統刷機有一定的風險, 可能導致手機無法開機和失去保固, 資料還會被清空, 執行前請先三思!!! 需求 在上次這篇 Android 11 如何不要驗證 Wi-Fi CA 憑證 有說明如何修改系統設定檔, 修改完後, 其實就不需要 Root 了, 因此可以 UnRoot. 方法如下:\n方法 1 將手機重開, 並同時按下 電源+音量下鍵進入 bootloader 模式\n用 fastboot 刷回原始的 boot.img\n1fastboot boot boot.img\u0026lt;/code\u0026gt;\u0026lt;/pre\u0026gt; 方法 2 其實 Magisk 有這個功能刷回原始的 boot.img\n但我實測按下還原原始映像檔是沒作用的, 所以只好自己刷\n結果 刷回原來的 boot.img 之後, 絕大多數 App 都可以用了. 不過實測發現如果只刷 boot.img, 但沒有移除 Magisk, 還是有某些 App 譬如 Costco 或國泰世華銀行無法使用, 所以最後還是把 Magisk 移除. 但手機還是維持在 Unlock 狀態.\n","link":"https://dennys.github.io/tw/doc/android/android-remove-root-magisk/","section":"doc","tags":["Android","Root","Magisk","改機","Pixel 5"],"title":"Android 移除 Root 和 Magisk"},{"body":"","link":"https://dennys.github.io/tw/tags/ifttt/","section":"tags","tags":null,"title":"IFTTT"},{"body":"需求 用 LINE Bot 機器人每天自動發一個 LINE 訊息到群組, 要包含以下資訊.\n匯率 一些連結到各銀行的匯率網站 一些匯率的歷史圖表 做法: 使用 IFTTT + LINE IFTTT 是個免費的服務, 他的名字是 if this then that 的縮寫. 以這個應用來講, 我們要的是, IF 拿到一個匯率, THEN 發一個 LINE 訊息, 作法如下:\n在 IFTTT 建立一個新的 Applet\n新增一個 \u0026quot;If This\u0026quot;\n選擇 \u0026quot;Finance\u0026quot; service, 這個服務目前是由 Yahoo 提供的\n選擇\u0026quot;Today's exchange rate report\u0026quot;\n在這裡輸入你需要的幣別和通知 (發 LINE) 的時間\n新增一個 \u0026quot;Then That\u0026quot;\n選擇 \u0026quot;LINE\u0026quot; service\n目前他只有一個功能就是 Send message, 就選這個\n這時 IFTTT 會需要取得和 LINE 做整合的權限, 請選 Connect\n這裡請使用 LINE 的帳號密碼登入\n這時請回到手機上輸入認證碼, 權限就會開通了\n以上權限開通部分只有第一次整合 IFTTT 和 LINE 需要, 以後就不需要這個動作了.\nLINE, 建立一個群組, 譬如我這裡的 TEST1, 然後把 LINE Notify 加進這個群組\n設定好你要發訊息的群組 (Recipient) 還有內容\n之後 IFTTT 就會自動每天發訊息了\n注意 IFTTT 好像 沒辦法手動 trigger, 而且每天只會發一次, 所以每次修改完, 得等第二天才知道結果, 這個不像 Zapier 可以直接測試, 得再看看有沒有好的解法. 似乎只能發到群組, 他雖然有個 1 對 1 的訊息, 但我發到那個是沒用的. 如果沒有把 LINE Notify 加到群組, 他就會發個訊息告訴你. 如果看到這個訊息, 就把 LINE Notify 這個帳號加到群組就可以了. 實際範例 LINE 設定好後, 每天在你設定的時間, 就會收到一個 LINE 訊息 (實測是會有 1~2 分鐘的延遲)\n手機通知 其實很方便, 每天就會有個手機通知, 想看細節再點連結進去.\n電腦版 LINE IFTTT applet 這是這個 IFTTT applet 的連結: https://ifttt.com/applets/pC2DyG9z-line\n","link":"https://dennys.github.io/tw/doc/ifttt/line-robot-send-currency-exchange-rate-ifttt/","section":"doc","tags":["IFTTT","LINE"],"title":"IFTTT 自動發 LINE 訊息 (免寫程式) - 以美元匯率為例"},{"body":"","link":"https://dennys.github.io/tw/tags/magisk/","section":"tags","tags":null,"title":"Magisk"},{"body":"","link":"https://dennys.github.io/tw/tags/root/","section":"tags","tags":null,"title":"Root"},{"body":" 注意 系統刷機有一定的風險, 可能導致手機無法開機和失去保固, 資料還會被清空, 執行前請先三思!!! 需求 Samsung Galaxy S7 Edge 是 2016 年初的手機, 最多可更新到 Android 8, 最後的 patch 是 2020 年 9 月.\n可以刷的 ROM 看來有很多 (可參考 https://forum.xda-developers.com/f/5186/)\n最有名的 LineageOS 15~19.1 (Android 8~12L) FloydQ: 這是基於 Android 10 的 Samsung OneUI 2.5, 這應該是可以用到比較多 Samsung 手機特有的功能 作法 安裝 Samsung USB drivar 和 ODIN Samsung USB driver: http://developer.samsung.com/galaxy/others/android-usb-driver-for-windows ODIN 是用來刷 firmware 的工具, 請在這裡下載並安裝: https://odindownloader.com/ 下載 LineageOS 和 Open GApps LineageOS 19.1: https://forum.xda-developers.com/t/4369001/ LineageOS 18: https://forum.xda-developers.com/t/4172727/ Open Gapps: https://sourceforge.net/projects/opengapps/files/arm64/ =\u0026gt; 注意, 這有綁 OS 版本, 在 2022/2/15 的版本還沒有支援 Android 12. 下載 TWRP 從這裡下載 https://dl.twrp.me/hero2lte/twrp-3.6.0_9-0-hero2lte.img.tar.html, 注意, 一開始使用 3.1.1 版, 結果都讀不到 SD card, 升到最新版後就好了. 安裝 TWRP 開啟工程模式 設定→關於裝置→軟體資訊→版本號碼處連點8下 進入開發人員選項後，USB偵錯以及OEM解鎖選項要打勾。 重開機進入 download mode 執行 ODIN, 把剛才的 twrp 給刷進去, 再重開就可以了 刷 LineageOS 和 Open Gapps 執行 adb reboot recovery 或是先關機, 然後按音量上+Home+Power 鍵進入 TWRP Recovery. 選 INSTALL, 把LineageOS 和 Open Gapps 的 zip 檔案裝上去, 重開機就可以了.\n如果要用 ADB, 指令如下:\n1adb sideload open_gapps-arm64-11.0-nano-20220202.zip TWRP 被 LineageOS Recovery 蓋掉的問題 自 LineageOS 17 開始, 他自己有帶一個 Recovery, 嘗試刷回 TWRP 又常常失敗.\n可試試看 https://forum.xda-developers.com/t/3334084/ 的 step 6~8\nNikGapps 測試 (失敗) 一開始用 LineageOS 自己的 Recovery, 刷 NikGapps 一直失敗\n1adb sideload NikGapps-basic-arm64-12-20211224-signed.zip 2adb: sideload connection failed: closed 3adb: trying pre-KitKat sideload method… 4adb: pre-KitKat sideload connection failed: closed 用以下指令可解決\n1C:\\platform-tools\\fastboot devices 2C:\\platform-tools\\adb usb 3C:\\platform-tools\\adb sideload NikGapps-basic-arm64-12-20211224-signed.zip 4serving: \u0026#39;NikGapps-basic-arm64-12-20211224-signed.zip\u0026#39; (~32%) 但最後又一直卡在空間不足, 就放棄了.\n","link":"https://dennys.github.io/tw/doc/android/samsung-galaxy-s7-edge-lineageos/","section":"doc","tags":["Android","Root","Magisk","改機"],"title":"Samsung Galaxy S7 Edge 刷 LineageOS"},{"body":" 注意 系統刷機有一定的風險, 可能導致手機無法開機和失去保固, 資料還會被清空, 執行前請先三思!!! 環境準備 安裝 Google USB driver 首先要在電腦上安裝 Google USB driver, 可在這裡下載 解開壓縮檔 (應該是 usb_driver_r13-windows.zip), 在 android_winusb.inf 按右鍵, 然後一直往下就好了 沒有裝 driver 的話, 在執行 fastboot 的時候, 就會遇到 waiting for any device 的訊息, 如下 1C:\\platform-tools\u0026gt;fastboot boot magisk_patched.img 2\u0026lt; waiting for any device \u0026gt; ===================================================\n安裝 Android SDK Platform Tools 從這裡下載, 一直 next next 就好. https://developer.android.com/studio/releases/platform-tools#downloads\n===================================================\n手機解鎖 Unlock 步驟 請記得先備份資料, 因為解鎖會清空資料\n請記得先備份資料, 因為解鎖會清空資料\n請記得先備份資料, 因為解鎖會清空資料\n手機進入開發者模式並確定 adb devices 可以連上手機\n1C:\\platform-tools\u0026gt;adb devices 2List of devices attached 3*************** device Enable OEM 解鎖 執行下列指令, 手機會出現要你確認是否要 unlock, 按下去, 手機就解鎖了. 注意: 這個動作會把手機資料清空\n1C:\\platform-tools\u0026gt;adb reboot bootloader 2C:\\platform-tools\u0026gt;fastboot flashing unlock 3OKAY [ 0.068s] 4Finished. Total time: 0.071s =============== 以上完成 Unlock, 以下為 Root 的步驟 ===============\n手機 Root 步驟 用手機下載並安裝 Magisk (https://github.com/topjohnwu/magisk_files/blob/canary/app-debug.apk) (更新: 請改從這裡抓 https://magiskmanager.com/)\n檢查手機版本 (設定 -\u0026gt; 關於, 然後拉到最下面), 譬如我這支是 SQ1A.220105.002\n用電腦連到 https://developers.google.com/android/images, 下載對應的 boot image (按 Link)\n解開裡面的 vbmega.img 和 boot.img.\n將前一步驟解出來的 boot.img 放到手機上, 然後使用 Magisk 對 boot.img 做 patch, 並把 patch 完後的檔案傳回電腦\n將手機重開, 並同時按下 電源+音量下鍵進入 bootloader 模式\n用 fastboot 刷 vbmega.img, 不然刷完後重開機, 手機會出現 failed to load/verify boot images (應該是 Pixel 4A 5G 以後的都需要這個)\n1C:\\platform-tools\u0026gt;fastboot flash --disable-verity --disable-verification vbmeta vbmeta.img 2Rewriting vbmeta struct at offset: 0 3Sending \u0026#39;vbmeta_a\u0026#39; (8 KB) OKAY [ 0.135s] 4Sending \u0026#39;vbmeta_a\u0026#39; OKAY [ 0.144s] 5Finished. Total time: 0.545s 用 fastboot 刷剛剛用 Magisk 給 patch 過的 image. 注意, 這裡用的是 fastboot boot, 不是 fastboot flash. 刷完以後會自動重開機.\n1C:\\platform-tools\u0026gt;fastboot boot magisk_patched.img 2Sending \u0026#39;boot.img\u0026#39; (98304 KB) OKAY [ 2.274s] 3Booting (bootloader) boot.img missing cmdline or OS version 4OKAY [ 1.471s] 5Finished. Total time: 3.870s 使用 Magisk 檢查是否 Root\n若你的 Masgisk 長這樣\n然後執行時出現這個畫面, 這時候按確定, 他應該會去嘗試下載, 然後最後說剖析套件時發生問題.\n所以還是得裝前面講的版本 (https://github.com/topjohnwu/magisk_files/blob/canary/app-debug.apk), 執行後看到下面畫面, 就是 Root 成功了.\nRoot 之後可再刷第三方 ROM, Pixel5 有一堆可刷, 可參考 https://forum.xda-developers.com/f/11343/. 比較意外的是, 本來以為最多人用的是 LineageOS, 不過看來 ProtonASOP 受到的關注更多 (以 XDA 上面的 views/replies 數量來看). 還有 CleanSlate 在沒有 Root 的情況下也可以使用, 這個值得研究一下.\n參考: https://www.mobile01.com/topicdetail.php?f=565\u0026amp;amp;t=6233575 (這篇是 Pixel 4XL, 所以不需要 vbmega.img) https://www.droidwin.com/how-to-root-pixel-devices-via-magisk-on-android-12/ https://android.gadgethacks.com/how-to/root-pixel-5-still-pass-safetynet-full-guide-for-beginners-intermediate-users-0348101/ ","link":"https://dennys.github.io/tw/doc/android/google-pixel-5-root-magisk/","section":"doc","tags":["Android","Root","Magisk","改機","Pixel 5"],"title":"Google Pixel 5 Root \u0026 Magisk"},{"body":" 提醒 這個方法不用 Root, 但需要從電腦上執行. 需求 在 Android 11 以前, 只要從手機上面往下滑, 就可以看到快速開關來切換很多設定. 但自 Android 12 開始, Wi-Fi 和行動數據的開關被整合成一個網際網路開關, 如下圖. 所以要改變 Wi-Fi 或行動數據時, 得先進去網際網路, 然後才能修改, 改完之後還得去按那個完成. 這真的很難用也很慢... 而且這個改變看來 Google 是有做過研究的, 可參考 https://support.google.com/pixelphone/thread/132446941/. 他的原因是很多人會因為 Wi-Fi 不穩定而改用行動數據, 然後忘了開回 Wi-Fi... 雖然我不是很懂這個改變能怎麼避免這件事情. (後面的留言也滿多人反映同樣事情) 再往下看, 負評的人不少, 所以我也給他按負評了 😛 不過客服也辛苦了, 被人抱怨 this sucks, 還會回 You're welcome... (參考論壇: https://support.google.com/pixelphone/thread/133649087/). 解法 (免 root) 網路上找到解法如下 (參考 https://forum.xda-developers.com/t/4353717/ 和 https://9to5google.com/2021/12/08/android-12-internet-wifi-mobile-data-toggles/), 比較奇怪的是, XDA 上面說要 root, 但我沒 root 也成功了.\n要注意的是, 他會清除所有 toggle (就是說, 設完以後, 你的快速設定就只剩下 Wi-Fi 和行動數據兩個), 不過這再加回來就好了.\n安裝 ADB (在這裡下載, 如果 adb.exe 執行起來一直 crash, 可用舊版 https://dl.google.com/android/repository/platform-tools_r28.0.0-windows.zip 打開手機的 USB debug mode (參考 https://blog.pulipuli.info/2019/01/adbfastbootandroid-sdk-platform-tools.html) 執行 adb devices, 確定手機有連線成功 要看到下面 ***** device 的訊息才代表連線成功(那兩行 daemon... 只有第一次執行會出現)\n1C:\\platform-tools\u0026gt;adb devices 2* daemon not running; starting now at tcp:5037 3* daemon started successfully 4List of devices attached 5*************** device 如果 List of devices attached 後面沒東西代表沒找到手機\n1C:\\platform-tools\u0026gt;adb devices 2List of devices attached 如果看到 unauthorized 代表沒有權限 (可能是 USB debug mode 沒開)\n1C:\\platform-tools\u0026gt;adb devices 2List of devices attached 3*************** unauthorized 連線成功後, 請執行以下指令 (請用 cmd, 用 PowerShell 比較麻煩), 他就會把 Wi-Fi 和行動網路的快速設定分開來了 1adb shell settings put global settings_provider_model false 2adb shell settings put secure sysui_qs_tiles \u0026#39;wifi,cell,$(settings get secure sysui_qs_tiles)\u0026#39; 成果 如下, 可以快速開關 Wi-Fi 或是行動網路 最後請記得把 USB debug mode 關掉, 不然一些 App 會無法使用, 如下圖. 補充 這招還是沒法改回 Android 11 以前那種小 icon, 也就是說, 預設最多只能看到 4 個開關. 是有看到 App 可以做到這功能, 但他看起來是用一個可以跑在其他 App 上的權限, 然後再加上一個從上往下滑的手勢. 也就是說, 當你從上往下滑, 其實是開啟他的 App, 而不是系統內建的通知功能. 所以其實會兩個一起執行, 這樣怪怪的... 再找找有沒有其他解法. 後來有次降版 Google App, 結果一連上藍芽就重開 (後來查到是降版造成, 更新到新版就好了), 但影響是所有 toggle 就又被重設了. ","link":"https://dennys.github.io/tw/doc/android/android-12-wifi-mobile-data-toggles/","section":"doc","tags":["Android","改機","Pixel 5"],"title":"如何還原 Android 12 的 Wi-Fi / 行動數據 快速開關 (免 Root)"},{"body":"請先安裝 Diversion Diversion 是個可安裝在 Asuswrt Merlin 上的 AD block 軟體, 相關說明和安裝可參考: https://dennys.github.io/tw/doc/router/asuswrt-merlin-diversion/\nDiversion for YouTube 自 2020/5/20 起, Diversion 新增擋 YouTube 廣告的實驗性功能 (參考: https://diversion.ch/faq-reader/can-diversion-block-youtube-ads.html)\n安裝方法 用 ssh 進入 Asuswrt 並執行 diversion\n執行 b (blocking list)\n執行 8 (YouTube video ads blocking) =\u0026gt; 還是 experimental feature 選擇 8 以後, 他會要你再確認一次\n然後他就會開始安裝了, 如下\n安裝好後一開始還是會有廣告, 之後就會愈來愈少了.\n","link":"https://dennys.github.io/tw/doc/router/asuswrt-merlin-diversion-youtube/","section":"doc","tags":["Asuswrt-Merlin","改機","Router"],"title":"Asuswrt Merlin Diversion + YouTube (分享器擋 YouTube 廣告)"},{"body":" 注意 系統刷機有一定的風險, 可能導致手機無法開機和失去保固, 資料還會被清空, 執行前請先三思!!! 需求 Samsung Galaxy View 是 2015 年出的巨無霸平板 (18″), 早已停產, 最後的 firmware status 如下:\n官方: Android 5.1.1 (security patch 到 2016/02/01) LineageOS 15 (Android 8): 最新的版本是 20184/28, 這應該已經沒在維護了, 而且他還有些大問題一直沒解 (ex: Camera, Ambient Light, …) 方法 請先安裝以下兩個程式 Samsung USB driver: https://samsungusbdriver.com/download/samsung-driver-v1-5-63-0 ODIN: https://odindownloader.com/ 下載 TWRP 以及 Magisk TWRP: https://androidfilehost.com/?fid=818070582850510050 Magisk: https://forum.xda-developers.com/apps/magisk/official-magisk-v7-universal-systemless-t3473445 安裝 TWRP 步驟 打開 Samsung Galaxy View 的工程模式 (參考 這裡) 重開機進入 download mode 執行 ODIN, 把剛才的 twrp 給刷進去, 再重開就可以了 安裝 Magisk 把 Magisk-v20.3.zip 複製到 本機\\Galaxy View\\Internal storage\\Download 重開進入 TWRP, 使用 INSTALL, 把 Magisk 裝上去 重開, 就可以看到 Magisk 了 ","link":"https://dennys.github.io/tw/doc/android/samsung-galaxy-view-root/","section":"doc","tags":["Android","Root","Magisk","改機"],"title":"Samsung Galaxy View Root"},{"body":" 注意 系統刷機有一定的風險, 可能導致手機無法開機和失去保固, 資料還會被清空, 執行前請先三思!!! HTC U Ultra HTC U Ultra 是 2017 年初的手機, 可更新到 Android 8 (security patch 到 2018/3/1)\nRoot 方法 htc 官方解鎖 http://www.rayzen-dev.com/htc-unlocked-download/ 安裝 htc driver https://drive.google.com/open?id=1sgIbTgW9PKXb9PKQ_PSzJxHkwc5tMV6Z TWRP 可參考以下兩篇 https://www.ptt.cc/bbs/MobileComm/M.1521510168.A.45F.html http://www.rayzen-dev.com/root-htc-ultra/ Magisk 安裝 參考: https://izaka.tw/android-magisk-installation-guide/\n用手機從這裡下載 Magisk-v20.3.zip https://forum.xda-developers.com/apps/magisk/official-magisk-v7-universal-systemless-t3473445 重開進入 TWRP (指令: adb wait-for-device reboot recovery) 選擇 INSTALL, 路徑選擇 /sdcard/Download 選擇檔案後, 執行螢幕最下面的 Swipe to confirm Flash 重開系統 Magisk Module YouTube Vanced 如果有更新過 YouTube, 需要進 Google Play 把更新移除, 這樣才會看到 YouTube Vanced 要把 Google Play 的自動更新關閉 LineageOS 官網\nLineageOS 16: https://forum.xda-developers.com/u-ultra/development/rom-lineageos-16-0-t3856221 LineageOS 17: https://forum.xda-developers.com/u-ultra/development/rom-lineageos-17-0-t3970921 ","link":"https://dennys.github.io/tw/doc/android/htc-u-ultra-root/","section":"doc","tags":["Android","Root","Magisk","改機"],"title":"HTC U Ultra 刷機"},{"body":" 注意 FreshJR_Qos已停止維護, 請改用 FlexQoS FreshJR Adaptive QOS FreshJR Adaptive QoS 是個可安裝在 Asuswrt Merlin 上的流量管理軟體\n安裝步驟 用 amtm (Asuswrt-Merlin 384.15 以上已內建) 安裝就就好, 手動安裝可參考下列說明\n原文: https://www.snbforums.com/threads/36836/ 中文摘要翻譯: https://www.ptt.cc/bbs/Broad_Band/M.1546556091.A.F79.html 如何確定安裝成功\n執行 /jffs/script/FreshJR\\_QOS -debug Undf FlowID 的值如果不是 17, 那就安裝成功了 安裝前 \u0026amp; 測試結果 設定如下: 測試結果: http://www.dslreports.com/speedtest/58928634 安裝後 \u0026amp; 測試結果 設定如下: 測試結果: http://www.dslreports.com/speedtest/58929066 後記 FreshJR_Qos已停止維護, 請改用 FlexQoS\n","link":"https://dennys.github.io/tw/doc/router/asuswrt-merlin-freshjr-adaptive-qos/","section":"doc","tags":["Asuswrt-Merlin","改機","Router"],"title":"Asuswrt Merlin FreshJR Adaptive QoS (流量管理)"},{"body":" 注意 系統刷機有一定的風險, 可能導致手機無法開機和失去保固, 資料還會被清空, 執行前請先三思!!! Asuswrt-Merlin 是甚麼 Asuswrt-Merlin 是個 Asus router 的 3rd party fireware, 提供了不少增強的功能, 也有很多 plugin 可以使用. 刷機的方法可參考官方文件: https://github.com/RMerl/asuswrt-merlin.ng/wiki/Installation (不過寫的滿簡單的, 建議 google 一下其他人寫的介紹)\nDiversion 是甚麼 Diversion 是個可安裝在 Asuswrt Merlin 上的 AD block 軟體, 他的原理是直接在 Hub 上面裝一個 DNS server, 然後當你的 client 要查某一個 domain 的時候, 他如果發現這個 domain 在他的黑名單裡面, 就把他擋掉.\n要注意的是, Diversion 為了要檔 https, 有安裝 pixelserv-tls, 可參考這個 FAQ 看一下這是甚麼東西還有他能做的事情.\n安裝步驟 Asuswrt Merlin Web GUI 設定 Asuswrt Merlin 的 Web GUI 只要把 JFFS 打開就好, 其他都得使用 command line. Diversion 安裝 在上面的 JFFS 安裝好後, JFFS 一開始會掛在 /dev/sda1, 而且格式是 NTFS (可用 fdisk 看)\n1admin@RT-AC66U\\_B1-B898:/tmp/home/root# df 2Filesystem 1K-blocks Used Available Use% Mounted on 3/dev/root 33408 33408 0 100% / 4devtmpfs 127732 0 127732 0% /dev 5tmpfs 127836 1532 126304 1% /tmp 6/dev/mtdblock4 64256 2868 61388 4% /jffs 7/dev/sda1 60058960 11712 60047248 0% /tmp/mnt/sda1 安裝 amtm, 指令如下 (Asuswrt-Merlin 384.15 已內建 amtm, 不須另外安裝):\n1curl -Os https://diversion.ch/amtm/amtm sh amtm 把 USB 格式化成 ext, 步驟如下\n執行 /jffs/scripts/amtm 執行 fd 然後照著說明格式化, 格式化完後會重開機 完成後 df 如下 1admin@RT-AC66U\\_B1-B898:/tmp/home/root# df 2Filesystem 1K-blocks Used Available Use% Mounted on 3/dev/root 33408 33408 0 100% / 4devtmpfs 127732 0 127732 0% /dev 5tmpfs 127836 1528 126308 1% /tmp 6/dev/mtdblock4 64256 2860 61396 4% /jffs 7/dev/sda1 59144340 184232 55955696 0% /tmp/mnt/usb 一樣在 amtm 裡面執行 dc, 進行 disk check, 結果如下 安裝 Diversion, 在 amtm 裡面執行 '1' (可先用 'i' 指令確認一下是用 1 來安裝 Diversion). 注意, 這裡本來應該先安裝 Entware, 但如果你嘗試安裝, amtm 會建議你直接裝 Diversion, 然後他在安裝過程中會自動安裝 Entware Diversion 安裝結果如下, 注意, 他移除了 LAN 的 DNS 8.8.8.8/8.8.4.4. 不過他沒有動到 WAN 的 DNS. 安裝 Diversion Standard 這邊注意, 要回到 Asuswrt-Merlin Web 設定 上面是寫要跳過 192.168.1.2, 但因為 pixelserv-tls 也需要 IP, 所以 192.168.1.3 也要跳過. 我後來是把 192.168.1.1~10 當成特殊用途, 所以我把 DHCP 設成從 192.168.1.11 開始分配. 接下來要輸入 pixelserv-tls 的 IP, 這裡就避開 DHCP 網段就好 選擇 log 方式, 如果你要把 log 寫下來, 就選 1 最後他會安裝到這個目錄 /tmp/mnt/usb/entware\n特別注意 因為 Diversion 是使用 DNS 來 block AD, 因此 WAN 的地方可以指定 DNS 但 LAN 的地方必須清空, client 的 DNS 必須是 192.168.1.1. 因為所有連到這台 router 的電腦或手機, 他們的 DNS server 都必須是 192.168.1.1, 這樣 Diversion 才會有作用. 在 Windows 可用 ipconfig /all 檢查 DNS 是否有設定正確 Diversion 使用方法 使用 putty 連進去後, 執行 diversion, 看到如下畫面就是安裝成功了 選擇 f (follow dnsmasq.log) 可以看 log, 有以下幾種模式可以選 (實際 log 在 /tmp/mnt/sda1/entware/var/log/dnsmasq.log, 紅色的部分要看一開始設定的名字) 選擇 1, 可看到如下就是有成功了 瀏覽器會看到如下 iOS Shortcut 安裝/使用 要先打開安全性: 設定 -\u0026gt; 捷徑 -\u0026gt; 允許不受信任的捷徑 打開 https://diversion.ch/ios-shortcut.html, 選擇最新的版本 參考 https://www.snbforums.com/threads/diversion-the-router-ad-blocker-v4-2-x.74941/ ","link":"https://dennys.github.io/tw/doc/router/asuswrt-merlin-diversion/","section":"doc","tags":["Asuswrt-Merlin","改機","Router"],"title":"Asuswrt Merlin Diversion (分享器擋廣告)"},{"body":"需求: 偶爾可坐 7 人, 安全配備盡量齊全 (6氣囊, TSC, ...), 有 ISOFIX\n評比: Mazda 5 優點: 安全配備較齊全 (最貴的版本) 缺點: 最貴的版本才有 6 氣囊 + DSC. 但無法取消天窗, DVD 等. 維修費用可能較高. 第 2 排的中間為位子實在不好坐 (有人戲稱那其實是個大扶手) 煞車問題: 請問各位馬自達 5 的車主，有關煞車的問題? Luxgen MPV 優點: 正 7 人座, 第 1, 2 排空間真的超大. 電子配備真的很炫. 缺點: 第 3 排的座位實在不好坐, 氣囊只有 2 個. (SUV 有比較多個). 但最大的問題應該是這個: 壹電視》直擊踢爆納智捷瞞客貨兩用非法銷售 Luxgen SUV 經銷商是說 5+2 的已經停產了, 現在在出清庫存, 實際坐了一下, 第 2 排中間比 Mazda 5 舒服, 但沒有 5+2 的可試乘, 沒法比較第 3 排. Nissan Rouge 優點: 日本原裝進口, 最便宜的等級就有 6 氣囊, TSC 等安全配備. 缺點: 2014 改款的 7 人座不知道會不會引進. Volkswagen Touran 優點: 1.4, 柴油引擎. 第 2 排是 3 張椅子, 坐起來覺得還 OK, 而且可以整張椅子拆掉. 缺點: 維修可能比較貴, 但 DSG 的問題無法忽視, 參考: 《DSG故障懶人包》 不要再問菜單了, 問工單卡實在!! 看完這篇讓你做夢都會笑 Volkswagen Caddy Caddy 網路上似乎沒有查到 DSG 的問題, 而且有人說這是商用車, 應該比較不會出問題, 不過去看的那家經銷商沒車, 另外查到這篇: VW CADDY車型DSG變速箱軟體更新瑕疵召回改正 Toyota Wish 優點: 頭又大的招牌響亮 :p 缺點: 氣囊只有 2 個, 有錢也沒法加裝. 心得 客貨車的稅率比較低, 因此有些車款會申請客貨車牌照. 但因為客貨車有些規定 (貨艙容積要有一立方米, 要有一些橫桿保護). 因此, 5 人 SUV 通常可以用客貨車, , 但 7 人 SUV 基本上比較不太可能用客貨車 (貨物空間不太容易有那麼大). 所以所謂的 5+2 有些會是違法的. ","link":"https://dennys.github.io/tw/posts/201310/suv-7/","section":"posts","tags":null,"title":"7 人座休旅車"},{"body":"","link":"https://dennys.github.io/tw/tags/thinkpad/","section":"tags","tags":null,"title":"ThinkPad"},{"body":"購買 Lenovo Coupon: http://www.dealigg.com/story-Lenovo-Coupons-Promotions\n使用手冊 http://support.lenovo.com/en_US/downloads/detail.page?DocID=UM014841\n硬體 硬碟 SATA3, 7mm規格 (注意不是 9mm)\nmSATA 很可惜的, mSATA 只支援 SATA 2, 而且官方文件只建議用來當 cache 而不建議拿來當開機碟? 雖然網路上也看到很多人用來開機沒問題. 似乎是因為 Ivy Bridge 只支援兩個 SATA3, 而 HDD, DVD 就用掉 2 個了.\nWiFi Thinkpad 1x1 bgn Intel Centrino Wireless-N 2200 2x2 BGN Intel Centrino Advanced-N 6205 AGN : dual stream (2x2) and up to 300Mbps (2 x 150Mbps per stream), 2.4GHz and 5GHz Intel Centrino Ultimate-N 6300 AGN: triple stream (3x3) and up to 450Mbps (3 x 150Mbps per stream), 2.4GHz and 5GHz 外接螢幕 mini Display: 有 ++, 有含聲音輸出\n軟體設定 Battery Win 7: 使用 Power Manager\nWin 8: 沒有 Power Manager 可用\n安裝 Power Management Driver 安裝 Lenovo Settings Dependency Package 修改 registry (記得要用 10 進位) 重開 (重裝 driver 後似乎會被 reset ?) 1Windows Registry Editor Version 5.00 2 3\\[HKEY\\_LOCAL\\_MACHINE\\\\SOFTWARE\\\\Wow6432Node\\\\Lenovo\\\\PWRMGRV\\\\Data\\] 4\u0026#34;ChargeStartControl\u0026#34;=dword:00000050 5\u0026#34;ChargeStopControl\u0026#34;=dword:0000005a 6\u0026#34;ChargeStartPercentage\u0026#34;=dword:00000050 7\u0026#34;ChargeStopPercentage\u0026#34;=dword:0000005a 參考文章 ThinkVantage-Power Manager 導覽 (ThinkPad電源管理懶人包) LENOVO 電池使用教學及注意事項 Changing Charge Threshold on ThinkPads under Windows 8 without Power Manager [分享] 在Windows 8中， 如何更改充電池的管理限制 (X230測試過) 修改 Power button 功能 http://www.tomsitpro.com/articles/windows_8-sleep-hibernation-power_settings-hiberfil.sys,2-229-2.html\n自動登入 執行 netplwiz 把\u0026quot;必須輸入使用者名稱和密碼，才能使用這台電腦(E)\u0026quot;的打勾取消掉 確定後會需要輸入這個帳號以及密碼, 這樣下次就不需要 login 了 參考文章: http://changyang319.pixnet.net/blog/post/31344187\n中文輸入: Windows 8 如何設定 Ctrl+Shift 或 Alt+Shift 切換輸入法\n透過外掛程式讓 Windows 8 使用 Ctrl+Space 切換輸入法\n繁體中文語言如何變更預設輸入法(英文) 內建的讀卡機沒法開機? 同一張 SD 卡拿去別的電腦就可以開機, 然後把 SD 卡插在外接的 USB 讀卡機, 在開機時偵測的到(就是會有 SD 卡開機的選項出來), 但按下去還是沒用, 似乎他有嘗試去讀, 但無法開機的問題知道原因了, 是 UEFI BIOS 不支援 NTFS 的 USB 開機, 所以要把 SD 卡 format 成 FAB32. 但幾個製作開機光碟的程式又只支援 NTFS, 網路上找到的解法如下, 外接讀卡機可以開機, 但內建那個還是無法開機.\n格式化成 fat32 用 WinRAR 或任何軟體把 ISO 解開, 檔案都複製到 USB 假設 USB 在 E:, 使用 administrator 權限在 CMD 執行 bootsect /nt60 E: (我執行時有發生無法寫入的錯誤, 後來改成 bootsect /nt60 /force E: 就可以了. 還有些方法是關掉 UEFI 以及用 xcopy 直接建立開機檔案之類的, 可以 google 一下. 關鍵字可用 windows usb boot fat32 之類的即可.\n","link":"https://dennys.github.io/tw/doc/hardware/thinkpad-t530/","section":"doc","tags":["ThinkPad"],"title":"Thinkpad T530"},{"body":" 注意 系統刷機有一定的風險, 可能導致手機無法開機和失去保固, 資料還會被清空, 執行前請先三思!!! PTool 是甚麼 PTool 是個可以修改 Panasonic Lumix 系列相機的工具程式. 使用這個程式的主要原因是, 我的相機是買香港的水貨, 問題在於香港是使用 PAL (25fps), 但台灣是 NTSC (30fps), 因此在日光燈下錄影出來就會有水波紋...\n功能 Basic Version incremental (打勾) Prevent version compare (打勾) FPS change G2 預設錄影是 25fps, 而 NTSC 是 29.97fps, 打勾這兩個可以改成 30fps\n720p59,94fps-\u0026gt;29.97 PAL \u0026lt;-\u0026gt; NTSC Manual movie mode Manual Movie Modes (打勾) 手動錄影的操作方式如下 (不需要轉到錄影模式)\n開機 選 PASM 任一種 按下 Menu/Set 再按一下 Menu/Set 這時候左下角的 icon 就會變成錄影 M, 就可以調整 ISO, 光圈, 快門了. 流量 這個研究中, 雖然改了 potplayer 可以看到 Overall Bitrate 變了, 但檔案大小和實際流量似乎還是一樣?\nVideo Bitrate FHD/SH (設成 50) Video Bitrate H: (設成 32) Video Bitrate L: (設成 20) Overall Bitrate (設成 52) ","link":"https://dennys.github.io/tw/doc/camera/ptool-panasonic-g2/","section":"doc","tags":["改機"],"title":"PTool 修改 Panasonic G2"},{"body":"螢幕解析度 現在用的 T41 (14\u0026quot;) 是 1024x768, 15\u0026quot; 的話又是寬螢幕, 如果只有 HD, 用起來應該不太好. FHD 的話, 字型是一定要放大, 但是某些 Windows 軟體整個 layout 會跑掉. 另外, Browser 的字型似乎不會跟著系統放大?\nHD 1366x768 HD+ 1600x900 FHD 1920x1080 鍵盤 巧克力鍵盤可能還好, 但 layout 實在不習慣, 尤其上面 Fn 鍵 變小還連在一起\nHDD 很可惜的, mSATA 只支援 SATA 2, 而且官方文件只建議用來當 cache 而不建議拿來當開機碟? 雖然網路上也看到很多人用來開機沒問題. 如果把 HDD 換成 SSD, 則就得把光碟機換成 2nd HDD. 不然就得等到 SSD 1TB 很便宜的時代了.\nWifi 雖然有支援 802.11n, 但是應該只有 150Mbps 的 (待查)\nPower Adapter 這個 170W 的 adapter 實在是好大.\n","link":"https://dennys.github.io/tw/doc/hardware/thinkpad-w530/","section":"doc","tags":["ThinkPad"],"title":"Thinkpad W530"},{"body":"最近覺得電腦實在頗慢, 尤其是處理相片時更慢... 決定來給他升級一\n用途: 文書上網 , 不玩遊戲, 常看 YouTube 會處理很多照片 一點影片處理(剪接小朋友的 h264 影片) 規格需求 多螢幕輸出(整理照片超好用) USB3, SATA, 有支援 VT-x 佳(偶爾會要跑 VM) 項目: CPU ：$6190 I5-3470/HD2500 主機板：$3690 華碩 P8H77-M PRO 記憶體：$1688 金士頓DDR3-1333 4G*2 其它如機殼, 硬碟(SATA 1T), 螢幕(*2)等都有了. 價格先貼 pchome, 還沒比價. 主機板其實好像都差不多, 不超頻所以應該不用 Z77 系列的, 以 Asus 出的幾款 H77 板子感覺都滿接近的. 然後想玩 3 螢幕, P8H77-M PRO 這塊板子有支援 DVI、HDMI、Display Port 及 VGA,. 還有網路和音效都是螃蟹. P8H77-M PRO的音效輸出有 6 個, 沒用過這麼多孔的, 看了一下官方使用手冊, 在p43-44 有詳細說明如下:\nCPU現在的選擇真是眼花撩亂, 不過 Ivy Bridge 的 i3 系列還沒出, 基本上就剩下 i5, i7 還有 K/非K 系列排列組合共 4 種. 至於內顯, 不玩遊戲, 所以內顯是 2550,3000,4000 應該差不多, 且都支援 3 螢幕.\n但是不確定不同等級的 CPU 跑影像處理差多少? 時脈 3.1~3.4GHz 應該不會差很多吧? L3 cache 6M/8B 就不知道有沒有差別了. 本來是想買最便宜的 i5, 不過後來光縮個圖都把兩 core 的 CPU 吃爆, 讓我想直上 i7-3770\nPCI-e -\u0026gt; IDE 介面卡\nhttp://shopping.pchome.com.tw/?mod=item\u0026amp;func=exhibit\u0026amp;IT_NO=DGBD1A-A41527069\n讀卡機:\nhttp://shopping.pchome.com.tw/?mod=item\u0026amp;func=exhibit\u0026amp;IT_NO=DRAE43-A59443106\u0026amp;SR_NO=DRAE43\u0026amp;ROWNO=9\nhttp://shopping.pchome.com.tw/?mod=item\u0026amp;func=exhibit\u0026amp;IT_NO=DGAO0Q-A35006006\u0026amp;SR_NO=DRAE43\u0026amp;ROWNO=10\n","link":"https://dennys.github.io/tw/doc/hardware/2012-computer-upgrade/","section":"doc","tags":["Hardware"],"title":"2012 電腦升級"},{"body":"","link":"https://dennys.github.io/tw/tags/hardware/","section":"tags","tags":null,"title":"Hardware"},{"body":"","link":"https://dennys.github.io/tw/tags/java/","section":"tags","tags":null,"title":"Java"},{"body":"","link":"https://dennys.github.io/tw/tags/maven/","section":"tags","tags":null,"title":"Maven"},{"body":"Package source code 在 multi module 的架構裡面, 因為都只有打包 .class 到 local repository 的 .jar 檔裡面. 因此在 Eclipse 裡面按 F3 是無法連結到 source code 的, 要使用 maven-source-plugin 把 source code 也打包到 local repository 才可以. 如果原始的檔名是 app-1.0.jar, 則 source 會被打包到 app-1.0-sources.jar goal 請使用 source:jar\n1 \u0026lt;build\u0026gt; 2 \u0026lt;plugins\u0026gt; 3 \u0026lt;!-- Attach sources to repository --\u0026gt; 4 \u0026lt;plugin\u0026gt; 5 \u0026lt;artifactId\u0026gt;maven-source-plugin\u0026lt;/artifactId\u0026gt; 6 \u0026lt;executions\u0026gt; 7 \u0026lt;execution\u0026gt; 8 \u0026lt;id\u0026gt;attach-sources\u0026lt;/id\u0026gt; 9 \u0026lt;phase\u0026gt;verify\u0026lt;/phase\u0026gt; 10 \u0026lt;goals\u0026gt; 11 \u0026lt;goal\u0026gt;jar\u0026lt;/goal\u0026gt; 12 \u0026lt;/goals\u0026gt; 13 \u0026lt;/execution\u0026gt; 14 \u0026lt;/executions\u0026gt; 15 \u0026lt;/plugin\u0026gt; 16 \u0026lt;/plugins\u0026gt; 17 \u0026lt;/build\u0026gt; 參考 http://maven.apache.org/plugins/maven-source-plugin/jar-mojo.html ","link":"https://dennys.github.io/tw/doc/java/maven-4-others/","section":"doc","tags":["Java","Maven"],"title":"Maven 4 - Others"},{"body":"Ear 的打包 Ear 的打包分成兩階段, 第一個打包各個 ejb, 第二是把各個 ejb 加上 library 打包成 ear. 打包 ejb 的部分相對簡單, 如下. 最後會打包出 app-ejb1.jar (依據 finalName 的設定) 這個 ejb 檔案.\nEJB Client generateClient 是指定要產生一個 app-ejb1-client.jar 的檔案, 不過如果只加 generateClient 而沒有任何其他參數, 預設是只會過濾某幾個 pattern 而已, 請再加上 clientIncludes, clientExcludes 來過濾. 詳情可參考\nhttp://maven.apache.org/plugins/maven-ejb-plugin/examples/generating-ejb-client.html http://maven.apache.org/plugins/maven-ejb-plugin/examples/ejb-client-dependency.html 1 \u0026lt;build\u0026gt; 2 \u0026lt;plugins\u0026gt; 3 \u0026lt;plugin\u0026gt; 4 \u0026lt;groupid\u0026gt;org.apache.maven.plugins\u0026lt;/groupid\u0026gt; 5 \u0026lt;artifactid\u0026gt;maven-compiler-plugin\u0026lt;/artifactid\u0026gt; 6 \u0026lt;version\u0026gt;2.3.2\u0026lt;/version\u0026gt; 7 \u0026lt;configuration\u0026gt; 8 \u0026lt;source\u0026gt;\u0026lt;/source\u0026gt;1.6 9 \u0026lt;target\u0026gt;1.6\u0026lt;/target\u0026gt; 10 \u0026lt;/configuration\u0026gt; 11 \u0026lt;/plugin\u0026gt; 12 \u0026lt;plugin\u0026gt; 13 \u0026lt;groupid\u0026gt;org.apache.maven.plugins\u0026lt;/groupid\u0026gt; 14 \u0026lt;artifactid\u0026gt;maven-ejb-plugin\u0026lt;/artifactid\u0026gt; 15 \u0026lt;version\u0026gt;2.3\u0026lt;/version\u0026gt; 16 \u0026lt;configuration\u0026gt; 17 \u0026lt;ejbversion\u0026gt;2.1\u0026lt;/ejbversion\u0026gt; 18 19 \u0026lt;generateclient\u0026gt;true\u0026lt;/generateclient\u0026gt; 20 \u0026lt;/configuration\u0026gt; 21 \u0026lt;/plugin\u0026gt; 22 \u0026lt;/plugins\u0026gt; 23 \u0026lt;finalname\u0026gt;app-ejb1\u0026lt;/finalname\u0026gt; 24 \u0026lt;/build\u0026gt; 打包 ear 檔的部分則要注意一下. 首先是要設定好 dependency 如下, 注意雖然上面打包的 ejb 其副檔名是 .jar, 但這裡的 type 必須設定成 ejb\n1 \u0026lt;dependencies\u0026gt; 2 \u0026lt;dependency\u0026gt; 3 \u0026lt;groupid\u0026gt;com.yourcompany\u0026lt;/groupid\u0026gt; 4 \u0026lt;artifactid\u0026gt;app-ejb1\u0026lt;/artifactid\u0026gt; 5 \u0026lt;version\u0026gt;1.0\u0026lt;/version\u0026gt; 6 \u0026lt;type\u0026gt;ejb\u0026lt;/type\u0026gt; 7 \u0026lt;/dependency\u0026gt; 8 \u0026lt;dependency\u0026gt; 9 \u0026lt;groupid\u0026gt;com.yourcompany\u0026lt;/groupid\u0026gt; 10 \u0026lt;artifactid\u0026gt;app-ejb2\u0026lt;/artifactid\u0026gt; 11 \u0026lt;version\u0026gt;1.0\u0026lt;/version\u0026gt; 12 \u0026lt;type\u0026gt;ejb\u0026lt;/type\u0026gt; 13 \u0026lt;/dependency\u0026gt; 14 \u0026lt;/dependencies\u0026gt; 打包 ear 的設定要注意幾個地方:`\n雖然 dependency 已經有指定了, 但是 ejb 還是要在 ejbModule 的地方再指定一次, 不同的是, 這裡不用指定 version 和 type, 不過要指定 bundleFileName, 這個是 ejb 最後會使用的檔案名字. 請記得設定 defaultLibBundleDir, 這樣會把用到的 library 放到 APP-INF/lib (預設是通通放在跟目錄, 和 ejb 混在一起, 那就沒用了) 如果有特別的檔案要直接放進來, 可以用 jarModule` 1 \u0026lt;build\u0026gt; 2 \u0026lt;finalname\u0026gt;app-ear\u0026lt;/finalname\u0026gt; 3 \u0026lt;plugins\u0026gt; 4 \u0026lt;plugin\u0026gt; 5 \u0026lt;groupid\u0026gt;org.apache.maven.plugins\u0026lt;/groupid\u0026gt; 6 \u0026lt;artifactid\u0026gt;maven-ear-plugin\u0026lt;/artifactid\u0026gt; 7 \u0026lt;version\u0026gt;2.5\u0026lt;/version\u0026gt; 8 \u0026lt;configuration\u0026gt; 9 \u0026lt;generateapplicationxml\u0026gt;true\u0026lt;/generateapplicationxml\u0026gt; 10 \u0026lt;defaultlibbundledir\u0026gt;APP-INF/lib\u0026lt;/defaultlibbundledir\u0026gt; 11 \u0026lt;modules\u0026gt; 12 \u0026lt;ejbmodule\u0026gt; 13 \u0026lt;groupid\u0026gt;com.yourcompany\u0026lt;/groupid\u0026gt; 14 \u0026lt;artifactid\u0026gt;app-ejb1\u0026lt;/artifactid\u0026gt; 15 \u0026lt;bundlefilename\u0026gt;app-ejb1.jar\u0026lt;/bundlefilename\u0026gt; 16 \u0026lt;/ejbmodule\u0026gt; 17 \u0026lt;ejbmodule\u0026gt; 18 \u0026lt;groupid\u0026gt;com.yourcompany\u0026lt;/groupid\u0026gt; 19 \u0026lt;artifactid\u0026gt;app-ejb2\u0026lt;/artifactid\u0026gt; 20 \u0026lt;bundlefilename\u0026gt;app-ejb2.jar\u0026lt;/bundlefilename\u0026gt; 21 \u0026lt;/ejbmodule\u0026gt; 22 23 \u0026lt;/modules\u0026gt; 24 \u0026lt;/configuration\u0026gt; 25 \u0026lt;/plugin\u0026gt; 26 \u0026lt;/plugins\u0026gt; 27 \u0026lt;/build\u0026gt; 最後 app-ear 的結構如下 ├── app-ejb1.jar\n├── app-ejb2.jar\n└── WEB-INF\n└── lib\n├── log4j-xxxx.jar\n├── axis-xxxxjar\n└── jdbc-xxxx.jar\n如果要把 war 也放進來, 使用 webModule 即可, 如下. 要注意的是, 原來的 war 裡面的 contextRoot 會失去作用, 如果要指定, 請在 webModule 裡面新增一個\n1 \u0026lt;modules\u0026gt; 2 \u0026lt;webmodule\u0026gt; 3 \u0026lt;groupid\u0026gt;artifactGroupId\u0026lt;/groupid\u0026gt; 4 \u0026lt;artifactid\u0026gt;artifactId\u0026lt;/artifactid\u0026gt; 5 \u0026lt;contextroot\u0026gt;/custom-context-root\u0026lt;/contextroot\u0026gt; 6 \u0026lt;/webmodule\u0026gt; 7 \u0026lt;/modules\u0026gt; 目前的 ear 並沒有把 war 打包進去, 如果要打包也很簡單, 在 ear 的 pom 加上一段 warModule 就可以了. 基本上沒有什麼問題, 可以改進的地方只有, 如果 ear 和 war 有共用的 .jar 檔, 那就會重複打包. 可參考 Creating Skinny WARs\n注意 如果有使用 JPA, 而這個 JPA 是放在 EJB 或某個共用的 jar, 納在包成 EAR 的時候就要注意, 如果這個 jar 會同時出現在 war 的 WEB-INF/lib 以及 ear 的 APP-INF/lib, 那就會出現 duplicate persistence units with name 的錯誤. 解法: ejb 會重複出現, 解法:無, 但似乎沒什麼影響 參考 http://maven.apache.org/plugins/maven-ejb-plugin/ http://maven.apache.org/plugins/maven-ear-plugin/ ","link":"https://dennys.github.io/tw/doc/java/maven-3-ejb-ear/","section":"doc","tags":["Java","Maven"],"title":"Maven 3 - 打包 EJB, EAR"},{"body":"在 Maven 裡面打包 war 應該是最簡單的了, 照著 Maven 的目錄結構放好, 他就會自動去幫你把程式打包好. 唯一的問題是, 如果有用到 applet, 那就得另外處理了. 一個簡單的方法, 把 applet 設定成 war 的 dependency, 那就會把 applet 放到 WEB-INF/lib 下面, 不過這樣子似乎無法呼叫到 (這部分如果有解麻煩指正).\n另外的方法是用 Maven 的 maven-dependency-plugin, 做法如下:\n先把 applet 打包好, 並且記得在使用 Maven 時加上 install 這個 goal, 這樣就會把打包好的 applet 放到 local repository 裡面去. 使用 maven-dependency-plugin 的 copy, 將 applet 放到指定的目錄. 這裡因為要放到 root, 所以指定的是 ${project.build.directory}/app-war-1.0. 後面的 \u0026quot;app-war-1.0\u0026quot; 請依照實際的專案修改. 1 \u0026lt;build\u0026gt; 2 \u0026lt;plugins\u0026gt; 3 \u0026lt;plugin\u0026gt; 4 \u0026lt;artifactid\u0026gt;maven-dependency-plugin\u0026lt;/artifactid\u0026gt; 5 \u0026lt;version\u0026gt;2.2\u0026lt;/version\u0026gt; 6 \u0026lt;executions\u0026gt; 7 \u0026lt;execution\u0026gt; 8 \u0026lt;id\u0026gt;copy\u0026lt;/id\u0026gt; 9 \u0026lt;phase\u0026gt;prepare-package\u0026lt;/phase\u0026gt; 10 \u0026lt;goals\u0026gt; 11 \u0026lt;goal\u0026gt;copy\u0026lt;/goal\u0026gt; 12 \u0026lt;/goals\u0026gt; 13 \u0026lt;configuration\u0026gt; 14 \u0026lt;artifactitems\u0026gt; 15 \u0026lt;artifactitem\u0026gt; 16 \u0026lt;groupid\u0026gt;com.yourcompany\u0026lt;/groupid\u0026gt; 17 \u0026lt;artifactid\u0026gt;app-client\u0026lt;/artifactid\u0026gt; 18 \u0026lt;version\u0026gt;1.0\u0026lt;/version\u0026gt; 19 \u0026lt;type\u0026gt;jar\u0026lt;/type\u0026gt; 20 \u0026lt;overwrite\u0026gt;true\u0026lt;/overwrite\u0026gt; 21 \u0026lt;destfilename\u0026gt;app-client.jar\u0026lt;/destfilename\u0026gt; 22 \u0026lt;/artifactitem\u0026gt; 23 \u0026lt;/artifactitems\u0026gt; 24 \u0026lt;outputdirectory\u0026gt;${project.build.directory}/app-war-1.0\u0026lt;/outputdirectory\u0026gt; 25 \u0026lt;/configuration\u0026gt; 26 \u0026lt;/execution\u0026gt; 27 \u0026lt;/executions\u0026gt; 28 \u0026lt;/plugin\u0026gt; 29 \u0026lt;/plugins\u0026gt; 30 \u0026lt;/build\u0026gt; Reference http://maven.apache.org/plugins/maven-dependency-plugin/\n","link":"https://dennys.github.io/tw/doc/java/maven-2-war-applet/","section":"doc","tags":["Java","Maven"],"title":"Maven 2 - 打包 war (含 applet)"},{"body":"Maven 1 - 打包 Jar, Applet 並簽名 Sign','Applet 程式在 package 時有兩個重點, 一是要把所有用到的 jar 程式庫都包在一起, 因為 applet 不像 ear 或 war 有固定目錄可以放 *.jar. 二是如果需要用到 browser 機器的一些資源 (如印表機), 則必須經過簽名.\n以下是要把 Applet 程式打包的寫法, 幾個重點:\ndescriptorRef 使用 jar-with-dependencies: 會把用到的 class 都一起打包進最後的 jar 檔. 預設會打包到另一個檔案, 原來的名字如果是 app-client-1.0.jar, 則會打包成 app-client-1.0-jar-with-dependencies.jar appendAssemblyId 設成 false, 這樣產生出來的 jar 檔案名稱才不會有 -with-dependencies 的字 phase 請指定 package, 這樣才會把需要的 class 都打包進去 goal 請使用 assembly:single (不指定也可以, 有 package 也會執行到這裡) 注意, maven-assembly-plugin 一定要用 2.2-beta-5, 用 2.2 或 2.2.1 都會有問題 (這感覺不太合理, 不過測試結果目前就是這樣, 或許是我哪裡弄錯了) 1\u0026lt;pre class=\u0026#34;brush: xml\u0026#34; title=\u0026#34;Client 的 pom.xml (打包用)\u0026#34;\u0026gt; 2 \u0026lt;build\u0026gt; 3 \u0026lt;plugins\u0026gt; 4 \u0026lt;plugin\u0026gt; 5 \u0026lt;groupid\u0026gt;org.apache.maven.plugins\u0026lt;/groupid\u0026gt; 6 \u0026lt;artifactid\u0026gt;maven-compiler-plugin\u0026lt;/artifactid\u0026gt; 7 \u0026lt;version\u0026gt;2.3.2\u0026lt;/version\u0026gt; 8 \u0026lt;configuration\u0026gt; 9 \u0026lt;source\u0026gt;\u0026lt;/source\u0026gt;1.6 10 \u0026lt;target\u0026gt;1.6\u0026lt;/target\u0026gt; 11 \u0026lt;/configuration\u0026gt; 12 \u0026lt;/plugin\u0026gt; 13 \u0026lt;plugin\u0026gt; 14 \u0026lt;artifactid\u0026gt;maven-assembly-plugin\u0026lt;/artifactid\u0026gt; 15 \u0026lt;version\u0026gt;2.2-beta-5\u0026lt;/version\u0026gt; 16 \u0026lt;configuration\u0026gt; 17 \u0026lt;descriptorrefs\u0026gt; 18 \u0026lt;descriptorref\u0026gt;jar-with-dependencies\u0026lt;/descriptorref\u0026gt; 19 \u0026lt;/descriptorrefs\u0026gt; 20 \u0026lt;finalname\u0026gt;${project.build.finalName}\u0026lt;/finalname\u0026gt; 21 \u0026lt;appendassemblyid\u0026gt;false\u0026lt;/appendassemblyid\u0026gt; 22 \u0026lt;archive\u0026gt; 23 \u0026lt;index\u0026gt;true\u0026lt;/index\u0026gt; 24 \u0026lt;manifest\u0026gt; 25 \u0026lt;adddefaultimplementationentries\u0026gt;true\u0026lt;/adddefaultimplementationentries\u0026gt; 26 \u0026lt;/manifest\u0026gt; 27 \u0026lt;/archive\u0026gt; 28 \u0026lt;/configuration\u0026gt; 29 \u0026lt;executions\u0026gt; 30 \u0026lt;execution\u0026gt; 31 \u0026lt;phase\u0026gt;package\u0026lt;/phase\u0026gt; 32 \u0026lt;goals\u0026gt; 33 \u0026lt;goal\u0026gt;single\u0026lt;/goal\u0026gt; 34 \u0026lt;/goals\u0026gt; 35 \u0026lt;/execution\u0026gt; 36 \u0026lt;/executions\u0026gt; 37 \u0026lt;/plugin\u0026gt; 38 \u0026lt;/plugins\u0026gt; 39 \u0026lt;/build\u0026gt; 簽名的部分, 使用 maven-jarsigner-plugin 來做簽名即可.\n1 \u0026lt;plugin\u0026gt; 2 \u0026lt;groupid\u0026gt;org.apache.maven.plugins\u0026lt;/groupid\u0026gt; 3 \u0026lt;artifactid\u0026gt;maven-jarsigner-plugin\u0026lt;/artifactid\u0026gt; 4 \u0026lt;version\u0026gt;1.2\u0026lt;/version\u0026gt; 5 \u0026lt;executions\u0026gt; 6 \u0026lt;execution\u0026gt; 7 \u0026lt;id\u0026gt;sign\u0026lt;/id\u0026gt; 8 \u0026lt;goals\u0026gt; 9 \u0026lt;goal\u0026gt;sign\u0026lt;/goal\u0026gt; 10 \u0026lt;/goals\u0026gt; 11 \u0026lt;/execution\u0026gt; 12 \u0026lt;/executions\u0026gt; 13 \u0026lt;configuration\u0026gt; 14 \u0026lt;keystore\u0026gt;${basedir}\\\\key\\\\xxxx.store\u0026lt;/keystore\u0026gt; 15 \u0026lt;alias\u0026gt;xxxxkey\u0026lt;/alias\u0026gt; 16 \u0026lt;storepass\u0026gt;yourpassword\u0026lt;/storepass\u0026gt; 17 \u0026lt;/configuration\u0026gt; 18 \u0026lt;/plugin\u0026gt; 實際上他會呼叫 jarsigner.exe 來做簽名的動作, 可以在 console 看到 log如下 (因為是 debug level, 所以要把 Maven 開到 debug mode 才看得到)```\n[debug] Executing: cmd.exe /X /C \\\u0026quot;...\\\\jarsigner.exe -verify ...\\\\app-client-1.0.jar\\\u0026quot;\n另外, 也可以使用 maven-jar-plugin, 效果和 maven-jarsigner-plugin 是一樣的. 但是在 jar-plugin 2.3 以後, jar:sign 已經不被建議使用, 請改用 jarsigner-plugin. 比較特別的是, jar-plugin 可以指定 signedjar 把簽名過的檔案放到其他目錄, 而 jarsigner-plugin 似乎沒有這個功能.\n1 \u0026lt;plugin\u0026gt; 2 \u0026lt;groupid\u0026gt;org.apache.maven.plugins\u0026lt;/groupid\u0026gt; 3 \u0026lt;artifactid\u0026gt;maven-jar-plugin\u0026lt;/artifactid\u0026gt; 4 \u0026lt;version\u0026gt;2.3.1\u0026lt;/version\u0026gt; 5 \u0026lt;executions\u0026gt; 6 \u0026lt;execution\u0026gt; 7 \u0026lt;goals\u0026gt; 8 \u0026lt;goal\u0026gt;sign\u0026lt;/goal\u0026gt; 9 \u0026lt;/goals\u0026gt; 10 \u0026lt;/execution\u0026gt; 11 \u0026lt;/executions\u0026gt; 12 \u0026lt;configuration\u0026gt; 13 \u0026lt;keystore\u0026gt;${basedir}\\\\key\\\\xxxx.store\u0026lt;/keystore\u0026gt; 14 \u0026lt;alias\u0026gt;xxxxkey\u0026lt;/alias\u0026gt; 15 \u0026lt;storepass\u0026gt;yourpassword\u0026lt;/storepass\u0026gt; 16 17 \u0026lt;verify\u0026gt;true\u0026lt;/verify\u0026gt; 18 \u0026lt;/configuration\u0026gt; 19 \u0026lt;/plugin\u0026gt; 喔, 講了那麼多, 都沒有提到 Jar... 其實 Applet 就是一個 Jar, 所以用上面 Applet 的方式就可以了. 差別在於 Jar 一般來說不需要簽名就是了.\n參考 https://maven.apache.org/plugins/maven-assembly-plugin/single-mojo.html https://maven.apache.org/plugins/maven-jar-plugin/ https://maven.apache.org/plugins/maven-jarsigner-plugin/ https://stackoverflow.com/questions/2027753/how-to-deploy-applet-with-dependencies-jar-using-maven-and-sign-it Reference for assembly for standalone jar https://stackoverflow.com/questions/1832853/is-it-possible-to-create-an-uber-jar-containing-the-project-classes-and-the-pro https://blog.csdn.net/mozhenghua/archive/2010/06/14/5671133.asp ","link":"https://dennys.github.io/tw/doc/java/maven-1-jar-applet-sign/","section":"doc","tags":["Java","Maven"],"title":"Maven 1 - 打包 Jar, Applet 並簽名 Sign"},{"body":"","link":"https://dennys.github.io/tw/tags/xbmc/","section":"tags","tags":null,"title":"XBMC"},{"body":"XBMC 真是個好東西, 但是一方面 XBox (一代, 不是 XBox 360) 已經很老舊了, 再加上 XBMC 決定不再維護 XBox 版本之後, 就一直在尋找替代產品. Apple TV 是個不錯的東西, 而且也有 XBMC for iOS, 只是一來得花錢買, 二來還是得 JB. 另外 XBMC 也有 Windows 的版本, 不過幾年前用過是覺得不太穩定, 效能也沒有很好, 另外就是, 用 PC 的話, 就沒有遙控器了, 用滑鼠來操作 PC 然後接電視, 總是覺得怪怪的.\n前兩天剛好發現, 有 XBMC remote for iPhone 的軟體, 也有好幾個, 於是就想到了, 或許用 iPhone 來遙控 XBMC 也是個不錯的想法, 於是就測試了一下, 基本上沒有什麼大問題, 除了 iPhone 遙控器用起來還是有點怪怪的.\niPhone for XBMC\nXBMC Constellation: 我其實最剛開始是看到這個, 可以看一下這裡的介紹, 看來在 iPad 上面還真的滿炫的, 就是因為看到這個才想來試試看. 只是測過之後, 只有一點點功能可以用, 可以播放影片, 但無法 pause 或 stop, 所以後來就放棄了, 不知道是哪裡出了問題, 可能等下個版本再來試試看. SoulMote: 這個用起來算是穩定的, 可以連上 XBMC, 可以放影片, 也可以放圖片. 播放影片時可以 pause, stop 等等. 也可以模擬遙控器的上下左右來控制 XBMC XBMoteC: 這個我連 XBMC 總是失敗 btw, 我只有看免費的, 要錢的倒是沒有研究.\nXBMC for Windows 7\n要用 XBMC for Windows, 有個和 XBox 版本不一樣的需求是, XBMC 要能在播放時自動偵測第二個螢幕, 並且使用全螢幕. 另外當然最好能夠是 portable 的. 一開始測試時發現 XBMC 並不會去自動偵測雙螢幕和使用全螢幕播放, 感覺有點不太方便, 但是找了一下, 發現已經有人試出來了. 用一個批次檔就搞定了. 不過請注意是 Windows 7 限定, 如果是其他版本, 就麻煩許多, 需要 3rd party 軟體幫忙控制螢幕切換.\n@echo off C:\\Windows\\System32\\DisplaySwitch.exe /extend start /WAIT xbmc.exe -p C:\\Windows\\System32\\DisplaySwitch.exe /external\n-p 參數的目的是變成 portable 版本, 意思就是說, 所有的資訊都存到 XBMC 目錄 DisplaySwitch.exe 是 Windows 7 的工具程式, 用來快速切換螢幕模式 另外中文的部份, 研究了一下, 發現不難, 一樣把 arial.ttf 換成自己喜歡的中文字型就可以了.\nXBMC for XBox\n雖然 XBMC 已經不再維護 XBox 版本了, 但是就像大多數的 open source project 一樣, 總是會有有興趣的人接手. 新專案的名字很直覺, 就叫做 XBMC4XBox. 要注意的是, XBMC.org 上面的 link 是指到 http://xbmc4xbox.sourceforge.net/, 這個 link 的內容不多.\n比較特別的是, XBMC for XBox 因為 license 的關係, 不能直接放出 binary, 只能放 source code 然後有興趣的人自己用 XBox SDK 去 compile 出來用. 但是在討論區裡就看到 http://sshcs.com/xbmc/ 有放新版的 XBMC for XBox. 不知道是否因為 XBox (一代) 已經不再賣了所以放寬 license 限制了嗎?\n結論\n其實用起來還滿好玩的, 就在 iPhone 上面選你要播放的內容, 就可以播放了, 基本上沒什麼問題. 只是一般來講在看電視用遙控器時, 應該是不太會用眼睛去看按鈕的位置, 而是憑感覺去按. 只是 iPhone 是觸控的, 所以基本上不太可能有什麼感覺, 這部份可能要習慣一下.\n參考:\nCan_XBMC_be_run_in_portable_mode How does displayswitch.exe work in Windows 7? [WINDOWS] HOW-TO start XBMC in fullscreen on secondary monitor with custom resolution XBMC Babylon 9.04 安裝筆記 ","link":"https://dennys.github.io/tw/doc/software/xbmc-xbox-windows-7-iphone/","section":"doc","tags":["XBMC","Software"],"title":"XBMC (XBox, Windows 7) + iPhone"},{"body":"前幾天才稱讚過小紅, 還特別貼文說, 即使坐了百萬名車, 還是對她不離不棄, 沒想到就馬上給我出狀況, 差點就要把她送去回收了...\n雖然現在還在夏天, 不過下班時已經有點晚了, 太陽公公早就回家休息去了, 看來今天是無法踩著夕陽的餘暉回家了... 上了車, 插入鑰匙, 發動 ... 不但沒發動, 而且聲音怪怪的, 試了幾次覺得可能是沒電了, 可是大燈還會亮, 不過看起來是比較暗, 所以猜測可能是電池電壓不夠之類的問題... 只是月黑風高又三更半夜了, 去哪生電啊...\n經長輩提示, 大企業的福利真不少, 提供汽車用充電電池也是其中一項. 於是呢, 就去借了電池來試試看了, 第一次拿汽車充電電池, 感想是, 還真重啊, 怎麼和以前小時候看到的硫酸電池感覺差不多? 看來這東西和消費性電子產品用的電池一樣, 這些年來的進步不大.\n要怎麼接呢? 其實以前只看別人接過電, 從沒自己動手過, 依據自己淺薄的電子知識, 只想到, 小時候電池沒弄好接反了, 會讓電池短路, 可是車用電池萬一接反短路了, 不知道會發生什麼事, 會爆炸嗎? 低頭看了一下車上的電池, 果然看到紅色警告寫著要小心, 否則會爆炸之類的話語...\n再看看充電器上的說明, 就安心多了, 有寫會防止短路之類的, 接錯線還會警告之類的, 看來應該就沒什麼問題了. 於是呢 , 接上線, 打開開關, 等一分鐘, 關掉, 試著發動....... 結果沒反應\n以上步驟重複一次, 再試著發動....... 結果還是一樣\n跑去問警衛先生, 看我的作法有沒有錯. 好心的警衛先生還和我一起過去, 重複以上步驟, 並且在電池接著充電器的情況下發動, 最後結果還是一樣.......\n至此, 覺得應該不是電池的問題, 想說事情大條了, 該不會最近比較常開, 半年開了 10K, 所以引擎掛了嗎... 難道小紅就要離我而去了嗎???\n=================================== ============== 隔天早上 ============ 今天起了個大早, 趁著上班前聯絡廠商, 看能不能儘快處理好. 首先打電話給信用卡公司, 看看道路救援的門檻如何, 結果客服人員回覆說 \u0026quot;因為您最近幾個月消費有達到 ***** 萬元, 所以可以免費拖吊\u0026quot; ... 不知道是該高興省了一筆錢還是該檢討我最近是不是太敗家了...\n先和銀行信用卡部門的人講了一次狀況, 再和銀行道路救援部門的人講了一次狀況, 最後拖吊公司的人打來, 再和他講一次狀況... 因為每個人都認為是電池沒電了, 所以我都得把以上故事重述一次...\n最後, 終於拖吊車來了, 第一次看著自己的車被拖吊走, 感覺還挺怪的...\n幾個小時候, 維修廠打電話來說, 原因很簡單, 就是電池壞掉了... 我問他說, 可是我有接充電器發動過, 還是沒用啊, 他的回答也很妙, 他說那應該是你用的充電器的接頭太小了... 這這這... 和接頭大小有什麼關係...\nAny way, 反正電池也已經用了三年多了, 差不多也該換了, 整件事情倒此結束, 虛驚一場... 小紅加油 !!!\n","link":"https://dennys.github.io/tw/posts/201008/2010-car-accident/","section":"posts","tags":null,"title":"小紅歷險記"},{"body":" 注意 這篇文章是 WebLogic 10 的時代寫的, 並沒有在後續版本測試過. 問題 這是第二次吃虧了, 把他記下來, 免得下次又忘記了...\n問題的起源在於記憶體不足, 通常訊息如下. 一次是某個單一 XML 訊息太大, 另一次是 ear 檔案太大, re-deploy 的時候會出問題.\njava.lang.OutOfMemoryError: PermGen space\n解法 如果是簡單的 Java 程式, 那解法很簡單, 改參數就好了, 把 -XX:PermSize=*** 放大即可. 不過在 WebLogic 裡面, script 包了好幾層, 就很容易漏掉了. 這次就是因為呆呆的直接在最外層設定 MEM_ARGS, 然後被裡層的 script 蓋掉了, 所以當然沒作用...\n建議的作法是修改 USER_MEM_ARGS, 可參考 Modifying JVM Parameters in Server Start Scripts\n最後, 在 WebLogic 10, 設定環境變數的程式在 domains//bin/setDomainEnv.sh, 可以看出不同平台, 甚至 production/develop mode 的不同也會導致參數不同, 不過不建議改這裡.\n1if [ \u0026#34;${JAVA_VENDOR}\u0026#34; = \u0026#34;Sun\u0026#34; ] ; then 2 if [ \u0026#34;${PRODUCTION_MODE}\u0026#34; = \u0026#34;\u0026#34; ] ; then 3 MEM_DEV_ARGS=\u0026#34;-XX:CompileThreshold=8000 -XX:PermSize=48m \u0026#34; 4 export MEM_DEV_ARGS 5 fi 6fi 7 8# Had to have a separate test here BECAUSE of immediate variable expansion on windows 9 10if [ \u0026#34;${JAVA_VENDOR}\u0026#34; = \u0026#34;Sun\u0026#34; ] ; then 11 MEM_ARGS=\u0026#34;${MEM_ARGS} ${MEM_DEV_ARGS} -XX:MaxPermSize=128m\u0026#34; 12 export MEM_ARGS 13fi 14 15if [ \u0026#34;${JAVA_VENDOR}\u0026#34; = \u0026#34;HP\u0026#34; ] ; then 16 MEM_ARGS=\u0026#34;${MEM_ARGS} -XX:MaxPermSize=128m\u0026#34; 17 export MEM_ARGS 18fi 19 20# IF USER_MEM_ARGS the environment variable is set, use it to override ALL MEM_ARGS values 21 22if [ \u0026#34;${USER_MEM_ARGS}\u0026#34; != \u0026#34;\u0026#34; ] ; then 23 MEM_ARGS=\u0026#34;${USER_MEM_ARGS}\u0026#34; 24 export MEM_ARGS 25fi ","link":"https://dennys.github.io/tw/doc/java/weblogic-memory-parameter/","section":"doc","tags":["Java"],"title":"設定 WebLogic 的 memory 參數"},{"body":" 注意 這是給想要用 DD-WRT 3G 上網\u0026quot;嘗鮮\u0026quot;所用, 所有的設定在重開機後都會消失... 前言 DD-WRT 官方版本目前並沒有支援 3G, 不過已經有高手弄出來了. 這幾天照著 http://digiland.tw/viewtopic.php?id=914 的作法把 DD-WRT 的 3G 環境也弄起來了, 在這裡重新整理一下. 和原來的方法基本上是一樣的, 只是我在測試過程中全部都用放在 RAM 的 /tmp, 沒有動到 flash, 也沒有外接任何 storage. 當然, 意思就是說, 重開機就什麼都沒了. 至於為什麼要這樣呢? 其實只是因為不確定這條路通不通, 又不想把現在的 HDD 給動到, 所以就這樣子測試了. 如果您也只是想嘗鮮一下, 可以試試看我的方法.\n參考文章 數位天堂: DD-WRT 3G 測試 數位天堂: Lly 韌體 (Oleg 韌體分支) 軟硬體 Hub: Asus WL-500gP V1 USB 網卡: Huawei E169 Firmware: DD-WRT 前置準備 DD-WRT firmware 已經刷好 (我是用這個) 在 Hub 開機前把 USB 網卡插入 (這地方還需要多測試, 目前開機後再插入常常會抓不到) 要打開DD-WRT的PPPoE (這裡不懂為何一定要開, 因為後面反正還是要 kill 掉. 或許是有某些設定檔案會產生?) 把 SIM 卡的 pin code 給 disable 步驟 建立暫時的ipkg/jffs環境, 執行下列指令\n1$ mkdir /tmp/jffs 2$ mount -o bind /tmp/jffs /jffs 準備 kernel library (從 lly 取得)\n因為我使用的 DD-WRT 是 2.4.37, 因此要抓一樣版本的 lly, 路徑如下:\nhttp://wl500g.googlecode.com/files/modules-1.9.2.7-d-r240.tgz\n準備 package (從 openwrt 取得) 需要以下這些軟體:\nchat: 使用 AT command 撥號 usb-modeswitch: 切換 USB 網卡模式 usbutils libusb zlib 因為 3G 網路沒通, 所以沒法直接用 ipkg 線上安裝, 因此我的作法是分兩段, 先用 PC 下載以下檔案, 再上傳到 500gp, 並用 ipkg install ******.ipk 安裝起來. 如果你的 500gp 已經有可以用的網路 (i.e. ADSL), 可以直接安裝, 不用這麼麻煩.\nhttp://downloads.openwrt.org/snapshots/trunk/brcm-2.4/packages/chat_2.4....\nhttp://downloads.openwrt.org/snapshots/trunk/brcm-2.4/packages/libusb_0....\nhttp://downloads.openwrt.org/snapshots/trunk/brcm-2.4/packages/usb-modes...\nhttp://downloads.openwrt.org/snapshots/trunk/brcm-2.4/packages/usbutils_...\nhttp://downloads.openwrt.org/snapshots/trunk/brcm-2.4/packages/zlib_1.2....\n載入 kernel driver 把前面下載的 modules-1.9.2.7-d-r240.tgz 解開, 然後切換目錄到解開之後的 lib/modules/2.4.37/kernel/drivers/usb/serial. 載入時要注意順序, 使用 insmod 的話, 要先載入usbserial, 再載入option. 首先載入 usbserial, 執行下列指令\n1$ insmod usbserial.o 這時候用dmesg應該會看到下列訊息\n1usb.c: registered new driver serial 2usbserial.c: USB Serial support registered for Generic 3usbserial.c: USB Serial Driver core v1.4 再來載入 option, 執行下列指令\n1$ insmod option.o 這時候用dmesg應該會看到下列訊息\n1usbserial.c: USB Serial support registered for Option GSM modem 2option.c: USB Driver for GSM modems: v0.7.2a 執行lsusb看driver是否有抓到usb裝置, 最後一行(12d1代表Huawei, 1001代表E169) 表示抓到了. (前面第一行的錯誤訊息應該可以忽略吧?)\n1$ lsusb 2lsusb: cannot open \u0026#34;/usr/share/usb.ids\u0026#34;, No such file or directory 3Bus 004 Device 001: ID 0000:0000 4Bus 003 Device 001: ID 0000:0000 5Bus 002 Device 001: ID 0000:0000 6Bus 001 Device 001: ID 0000:0000 7Bus 001 Device 002: ID 12d1:1001 最後確定/dev/usb/tts/0, /dev/usb/tts/1 有被建立起來\n1$ ls -l /dev/usb/tts/ 2crw------- 1 root root 188, 0 Jan 1 00:01 0 3crw------- 1 root root 188, 1 Jan 1 00:00 1 使用usb_modeswitch將網卡模式從 ZeroCD 切換到 modem 編寫 /tmp/usb-modeswitch.conf, 內容如下 (可參考 http://www.draisberghof.de/usb_modeswitch/usb_modeswitch.conf, 將 DefaultVendor 和 DefaultProduct 修改成合適的值)\n1$ more /tmp/usb-modeswitch.conf 2\\# Huawei E169 3DefaultVendor=0x12d1; 4DefaultProduct=0x1001 5;TargetClass=0xff 6 7\\# choose one of these: 8;DetachStorageOnly=1 9HuaweiMode=1 執行下列指令, 使用usb_modeswitch將網卡切換到modem模式\n1$ usb\\_modeswitch -c /tmp/usb-modeswitch.conf 2 3Looking for default devices ... 4Found default devices (1) 5Accessing device 002 on bus 001 ... 6Using endpoints 0x02 (out) and 0x82 (in) 7Not a storage device, skipping SCSI inquiry 8 9USB description data (for identification) 10\\------------------------- 11Manufacturer:  12Product: HUAWEI Mobile 13Serial No.:  14\\------------------------- 15Sending Huawei control message ... 16OK, Huawei control message sent 17\\-\u0026gt; Run lsusb to note any changes. Bye. 如果執行 usb_modeswitch之後的訊息和上面不同, 而是像下面這段一樣, 則代表沒有抓到裝置\n1$ usb\\_modeswitch -c /tmp/usb\\_modeswitch.conf 2Looking for default devices ... 3No default device found. Is it connected? Bye. 到這個步驟如果沒有抓到 USB 網卡, 那後續的恐怕就不用測了...\n使用pppd, chat撥號 編寫 /tmp/e169.chat. 這邊是中華電信, 所以用的是 internet 和 *99#\n1$ more /tmp/e169.chat 2\u0026#39;\u0026#39; \u0026#39;\u0026#39; 3\u0026#39;\u0026#39; \u0026#39;ATZ\u0026#39; 4\u0026#39;OK\u0026#39; \u0026#39;ATI\u0026#39; 5\u0026#39;OK\u0026#39; \u0026#39;AT+COPS?\u0026#39; 6\u0026#39;OK\u0026#39; \u0026#39;AT+CGDCONT=1,\u0026#34;IP\u0026#34;,\u0026#34;internet\u0026#34;\u0026#39; 7\u0026#39;OK\u0026#39; \u0026#39;ATD\\*99#\u0026#39; 8\u0026#39;CONNECT\u0026#39; \u0026#39;\u0026#39; 編寫 /tmp/ppp/options.pppoe\n1$more /tmp/ppp/options.pppoe 2/dev/usb/tts/0 3460800 4debug 5crtscts 6noipdefault 7ipcp-accept-local 8lcp-echo-interval 60 9lcp-echo-failure 5 10usepeerdns 11noauth 12nodetach 13user \u0026#34;\u0026#34; 14connect \u0026#34;/jffs/usr/sbin/chat -s -S -V -t 30 -f /tmp/e169.chat 2\u0026gt;/tmp/chat.log\u0026#34; 先停掉 redial, pppd. 這裡要注意的是, 我用 killall pppd 沒有作用, 得用 kill -9 *** 才行.\n1$ killall redial 2$ killall pppd 使用pppd撥號\n1$ pppd file /tmp/ppp/options.pppoe 檢查 /tmp/chat.log\n1$ more /tmp/chat.log 2ATZ 3 4 5OK 6ATI 7Manufacturer: huawei 8Model: E169 9Revision: 11.314.13.00.00 10IMEI: \\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\*\\* 11+GCAP: +CGSM,+DS,+ES 12 13OK 14AT+COPS? 15+COPS: 0,2,\u0026#34;46692\u0026#34;,2 16 17OK 18AT+CGDCONT=1,\u0026#34;IP\u0026#34;,\u0026#34;internet\u0026#34; 19OK 20ATD\\*99#CONNECT 看到最後面的 ATD 代表撥號, 後面出現 CONNECT 就代表成功了, YA! 故障排除 dmesg 是最基本的 把 syslog 打開 (從 Web UI), 然後看 /tmp/message 也是個方法. minicom 我抓下來的版本似乎已經 hard code 要把設定檔放在 /etc, 但是 /etc 又是唯讀的, 所以搞不定. Next Step 因為用的是 DD-WRT 的 mega 版本, 基本上已經沒有什麼空的 flash 了. 下一步是嘗試一下 size 比較小的 DD-WRT, 然後把這些 3G 相關程式放到 flash 裡面. 最終目的是把 DD-WRT 弄成一個開機即可上 3G 網路的環境, 而且不需要外接任何 storage.\n","link":"https://dennys.github.io/tw/doc/router/dd-wrt-3g-lly-driver/","section":"doc","tags":["改機","Router"],"title":"DD-WRT 之 3G 上網嘗鮮 (使用 lly driver)"},{"body":" 注意 系統刷機有一定的風險, 可能導致手機無法開機和失去保固, 資料還會被清空, 執行前請先三思!!! 前言 Oleg官方的 firmware 並沒有支援 3G 上網, 而且也已經很久沒更新了. CDMA@wifi 是個修改自 Oleg 的 firmware, 有特別支援 3G 上網, 雖然也有一陣子沒更新了, 不過這是目前 Oleg 系列 firmware 中, 唯一內建支援 3G 的了.\n參考文章 數位天堂: CDMA@wifi 韌體 (支援 3.5G 網卡上網) 數位天堂: WL-500g 系列改機基本步驟 軟硬體 Hub: Asus WL-500gP V1 USB 網卡: Huawei E169 Firmware: CDMA@wifi 1.9.2.7-10-USB-1.71 前置準備 將 firmware 改刷成 CDMA@wifi (方法請參考上面的 WL-500g 系列改機基本步驟) 把 SIM 卡的 pin code 給 disable 步驟 設定 3G 上網\n將 IP Config -\u0026gt; WAN Connection Type 設定成 USB Connection 模式 將 System Setup -\u0026gt; Operation Mode 設定成 Home Gateway 模式 將 USB Connection -\u0026gt; Connection Mode設定成 GPRS/EDGE/UMTS 模式 [重要] 這時請按下 F5 將整個畫面 refresh, 左邊功能表才會出現下面會用到的項目 將 USB Connection -\u0026gt; GPRS/EDGE/UMTS Config 設定如下: GPRS\nUsername: 空白\nPassword: 空白\nAPN: internet\nDial Number (usually *99***1#): *99#\nUSB device serial speed (usually 115200): 460800\nUSB device location ID: 空白\nCustom USB device parameters\nUSB device Vendor ID (0xabcd): 0x12d1\nUSB device Product ID (0xefgh): 0x1001\nUSB device packet size (0 for default): 4096\nZero CD Configuration\nModem type: Huawei E169 以上設定如下圖所示:\nAsus WL-500gp V1 3.5G 有些設定可能會依據情況而不太一樣\nDial Number 也有人設定 *99***# 或是 *99**1#, 我是已經可以用 Mobile Partner 上網, 直接參考裡面的值 USB device packet size 的數值是從數位天堂看來的, 這樣會快很多 USB device Vendor ID 的部份, 似乎有人沒有設定也可以使用, 我是有找到一個列表 按下 Finish, 等待 router 重新啟動 (這裡只按 Apply 雖然會存檔, 但是似乎不 work)\n插入 E169, 按下 connect, 應該就會開始 ppp 撥號, 然後就可以看是否連線成功了, 如果成功了, log 應該如下:\n1Jan 1 01:18:48 kernel: hub.c: new USB device 01:03.0-1, assigned address 4 2Jan 1 01:18:48 kernel: Manufacturer:  3Jan 1 01:18:48 kernel: Product: HUAWEI Mobile 4Jan 1 01:18:48 kernel: SerialNumber:  5Jan 1 01:18:48 kernel: usbserial.c: Generic converter detected 6Jan 1 01:18:48 kernel: usbserial.c: Buffer size for bulk\\_in is 4096 modem reports 64 7Jan 1 01:18:48 kernel: usbserial.c: Buffer size for bulk\\_out is 4096 modem reports 64 8Jan 1 01:18:48 kernel: usbserial.c: Generic converter now attached to ttyUSB0 (or usb/tts/0 for devfs) 9Jan 1 01:18:48 kernel: usbserial.c: Generic converter detected 10Jan 1 01:18:48 kernel: usbserial.c: Buffer size for bulk\\_in is 4096 modem reports 64 11Jan 1 01:18:48 kernel: usbserial.c: Buffer size for bulk\\_out is 4096 modem reports 64 12Jan 1 01:18:48 kernel: usbserial.c: Generic converter now attached to ttyUSB1 (or usb/tts/1 for devfs) 13Jan 1 01:18:48 kernel: usbserial.c: Generic converter detected 14Jan 1 01:18:48 kernel: usbserial.c: Buffer size for bulk\\_in is 4096 modem reports 64 15Jan 1 01:18:48 kernel: usbserial.c: Buffer size for bulk\\_out is 4096 modem reports 64 16Jan 1 01:18:48 kernel: usbserial.c: Generic converter now attached to ttyUSB2 (or usb/tts/2 for devfs) 17Jan 1 01:18:52 pppd\\[227\\]: pppd 2.4.2 started by admin, uid 0 18Jan 1 01:18:55 pppd\\[227\\]: Serial connection established. 19Jan 1 01:18:55 pppd\\[227\\]: Using interface ppp0 20Jan 1 01:18:55 pppd\\[227\\]: Connect: ppp0 \u0026lt;--\u0026gt; /dev/usb/tts/0 21Jan 1 01:19:03 pppd\\[227\\]: Could not determine remote IP address: defaulting to 10.64.64.64 22Jan 1 01:19:03 pppd\\[227\\]: local IP address 114.xxx.xxx.xxx 23Jan 1 01:19:03 pppd\\[227\\]: remote IP address 10.64.64.64 24Jan 1 01:19:03 pppd\\[227\\]: primary DNS address 168.95.1.1 25Jan 1 01:19:03 pppd\\[227\\]: secondary DNS address 168.95.192.1 26Jan 1 01:19:03 dnsmasq\\[73\\]: read /etc/hosts - 5 addresses 27Jan 1 01:19:03 dnsmasq\\[73\\]: reading /tmp/resolv.conf 28Jan 1 01:19:03 dnsmasq\\[73\\]: using nameserver 168.95.192.1#53 29Jan 1 01:19:03 dnsmasq\\[73\\]: using nameserver 168.95.1.1#53 30Jan 1 01:19:06 USB Connection: connected to ISP 無意中發現的好處 測試了幾天, 發現透過 hub 的 3G 上網, 似乎比直接用 Mobile Partner 還快滿多的, 不知道是不是 USB device packet size 的功勞? 故障排除 dmesg 是最基本的 /tmp/syslog.log 測試心得 用了快兩個月, 基本上就是很好, 很穩, 很不錯!!\n","link":"https://dennys.github.io/tw/doc/router/cdma-wifi-oleg-3g/","section":"doc","tags":["改機","Router"],"title":"CDMA@wifi (Oleg) 之 3G 上網"},{"body":" 注意 系統刷機有一定的風險, 可能導致手機無法開機和失去保固, 資料還會被清空, 執行前請先三思!!! 前言 一般來說, 3G 上網, 是只能用手機, 或是直接透過 USB 接到電腦上, 所以只能給一個裝置上網. 當然, 一台電腦上網之後, 還是有許多花樣可以玩. 一般最簡單的就是 NAT 了, 不過那台電腦就得有兩張網路卡才能這樣玩. 如果是無線網路, 就還可以用 ad-hoc mode. 其實在以前分享器還比較貴的時候, 我也用過 NAT 一段時間, 不過說實在的, 並不是很方便, 而且那台電腦得開機才能使用, 重開機時大家就都斷線了.\n因此呢, 想找一個可以讓 3G 上網也可以透過分享器給家裡其他電腦也使用的方法. 查了一下, 原來已經有人做出這種產品了, 譬如 EDIMAX 3G-6200n 或是 ZALiP CDW530AM, 價錢也還好. 不過呢, 一來都是沒聽過的廠牌, 二來則是, 這樣就不好玩了啊, 所以最後還是決定找一個可以自行改機的方案來實現透過分享器的 3G 上網來玩玩.\nps: Vigor 的 hub 也有支援 3G, 不過目前還沒有研究.\n硬體 Hub: Asus WL-500gP V1 USB 網卡: Huawei E169 選用 500gP V1 的原因在於 (1) 他有 8MB firmware, 可以玩的花樣比較多 (2) 有人已經改機改到 128MB RAM 了\n選用 E169 的原因在於, 他可以拿來打電話, 只要電腦有麥克風和喇叭就可以了. 當然 E220 也可以, 只是剛好碰到有人願意用半價賣一隻保固還有半年的 E169, 我就買了.\n其實如果要更便宜的 3G 組合, 買 Asus WL-HDD + E220 也可以.\nFirmware 目前比較流行的 firmware 大概有這幾個系列, Oleg, Tomato, OpenWrt 以及 DD-WRT (參考無線路由器韌體關係圖)\nOleg 系列:\nOleg: 無內建 3G 支援 lly: 無內建 3G 支援, 但可外掛, 參考這裡 CDMA@wifi: 內建支援 3G Tomato 系列:\nTomato: 無內建 3G 支援 Tomato DualWan: 內建支援 3G OpenWrt 系列:\n我沒碰過這個系列的 firmware... DD-WRT 系列:\nDD-WRT: 無內建 3G 支援, 但可外掛 DD-WRT mod: 這個是有人修改的 DD-WRT, 內建 3G 支援, 但似乎還不完整, 我沒用過, 可參考這裡 前置準備 設定 SIM 卡 要注意的是, 必須把 SIM 卡的 pin code 關掉 (就是說不要設定密碼, 預設一般是 0000, 這個也不行, 要把他 disable). 可以用手機設定,如果使用的是 Huawei 的 3G 網卡, 也可以用他的 Mobile Partner 來改. 其實這部份或許也可以保留 pin code, 只是目前不知道如何設定 firmware 去輸入 pin code, 所以只能先把他 disable. 步驟 以下以 CDMA@wifi 為例子, 基本上各家的刷法都差不多. 原則上就是第一次刷要用 Asus Recovery Utility, 之後的版本升級就直接用 Web UI 即可.\n準備 Asus Recovery Utility 如果直接使用 Asus 的 Web UI 是無法上傳非 Asus 的 firmware 的, 因此要使用 Asus 的 Recovery Utility, 可在這裡下載.\n下載 firmware 3rd party 的 firmware 有很多家, 目前應該是 CDMA@wifi的用起來最簡單, 所以先測試這版本, 之後會再嘗試其他版本的 firmware. 首先從 http://koppel.cz/cdmawifi/download/ 下載 firmware, 因為我的是 500gP V1, 所以使用 WL500gp-1.9.2.7-10-USB-1.71.trx\n更換 firmware 詳細的步驟可以參考 DD-WRT 上的 Asus Recovery Utility, 簡單寫起來如下:\n1. 把 route 的電源拔掉 2. 按著 reset (或是 500gP 上的 restore) 按鈕不放, 同時插上電源 3. 當你看到 power LED 是一閃一閃的時候, 就代表 router 已經成功進入 recover 模式 4. 如果這時候無法使用 192.168.1.1 連上 router (用 ping 的, web ui 這時不作用), 請自行設定 IP 192.168.1.10, subnet mask 255.255.255.0 5. 使用 Asus 的 Recovery tool 把 WL500gp-1.9.2.7-10-USB-1.71.trx 傳上去 6. 完成, 收工 設定 128MB 卡 (Optional) 這個步驟是給有 128MB 的才需要, 如果是 64MB 以下的, 應該會自動偵測到.\n*注意：這個動作有可能會把機器變磚, 請小心!!\n指令很簡單, 只有兩行.\n1nvram set sdram\\_init=0x0011 2nvram commit 如果要回復成 64MB 也很簡單\n1nvram set sdram\\_init=0x0009 2nvram commit 一些關於 128MB 的參考文件:\nhttp://oleg.wl500g.info/sdram.html\nhttp://svn.dd-wrt.com:8000/dd-wrt/ticket/466\nhttp://oleg.wl500g.info/wl500gp_ram.html\n設定 3G (因為各家步驟不一, 因此我會另外拆開成幾篇) CDMA@wifi Tomato DualWan DD-WRT 心得比較 CDMA@wifi 這個最好裝, 也很穩定, 把 USB 網卡拔來拔去也都能很快抓到.\n缺點是他的 QoS 只有看到 bandwidth Tomato DualWan 這個也很好裝, 但是把 USB 網卡拔來拔去之後, 常常會抓不到. 不過一旦抓到了, 倒是也滿穩定的.\n但是有個問題是, 他會有一堆錯誤訊息的 log, 而且多到幾分鐘被 purge 掉, 因此用起來會很不方便. DD-WRT 這個因為要外掛, 還在測試. Next Step 把 USB storage 掛上去, 裝一些軟體來玩玩看. 基本的如 MRTG, Samba, FTP 是一定要的, 再來就是 Apache, MySQL, PHP 了. 目前本站是住在一個 Linux 的 VMWare 裡面 (Host OS 是 Windows), 之前請教過數位天堂的站長, 我的流量遠小於數位天堂, 這樣應該撐得住才是. 如果成功的話, 就可以不用整天開電腦了. 比較擔心的是, 一般似乎是比較推薦使用 lighttpd 在這種平台上, 不過我沒用過 ","link":"https://dennys.github.io/tw/doc/router/asus-wl-500gp-v1-35g/","section":"doc","tags":["改機","Router"],"title":"使用 Asus WL-500gP v1 的 3.5G 無線上網"},{"body":" 注意 系統刷機有一定的風險, 可能導致手機無法開機和失去保固, 資料還會被清空, 執行前請先三思!!! 前言 無意中發現 Tomato DualWAN 自 1.23.0410 (2009/11/09 的版本) 開始, 已經有支援 3G 上網了, 因此就拿來測試了一下. 要注意的是, 雖然這個 firmware 強調的是 Dual Wan, 不過目前只可以同時接一個 3G網卡（或手機）, 沒辦法接兩個. 也就是說, 無法同時使用譬如中華電信+威寶3G兩個來loading balance. 但是可以同時使用 ADSL (PPPoE) + 3G, 我有測試過.\n軟硬體 Hub: Asus WL-500gP V1 USB 網卡: Huawei E169 Firmware: Tomato DualWan (1.23.0410 和 1.23.0441) 前置準備 將 firmware 刷為 Tomato DualWan, 請參考官方教程 把 SIM 卡的 pin code 給 disable 設定步驟 設定比 CDMA@wifi 簡單許多, 如下圖, 先把 USB 給 enable 起來 (紅框部份). 把這幾個都打開, 要確定 USB 網卡有抓到(如藍框部份). 然後設定的部份, 可能不見得需要把這些全部 enable, 有興趣的朋友或許可以測試一下哪些是可以 disable 的. Tomato DualWan 3G 再來就只要一個設定就可以了. 請參考下圖, 將連線類型選為\u0026quot;GPRS/EDGE/UMTS/EVDO\u0026quot; 並設定撥號號碼為 *99# 就可以了, APN 不用設定 (也沒找到地方可以設定?) 要注意的是, 斷線重連時間, 官方是建議 60 秒以上. Tomato DualWan 3G 接下來就會開始自動撥號了(官方文件是說要手動去按連線, 不過我發現是不需要).\n觀察 /tmp/var/log/message, 首先會看到下列這一段 1Jan 1 08:00:13 user.info kernel: usbserial.c: Option GSM modem converter now attached to ttyUSB2 (or usb/tts/2 for devfs) 2Jan 1 08:00:14 user.warn kernel: Vendor: HUAWEI Model: Mass Storage Rev: 2.31 3Jan 1 08:00:14 user.warn kernel: Type: CD-ROM ANSI SCSI revision: 02 4Jan 1 08:00:17 user.info hotplug\\[293\\]: device 12d1/1001/0 switch to modem mode 以上代表偵測到 USB 網卡了\n因為是設定 60 秒重新連線, 因此在上面 log 出來後, 會停下來, 60 秒之後會再看到下列這一段, 這樣就代表成功了.\n1Jan 1 08:01:17 user.info redial\\[92\\]: ALL WAN down. Reconnecting... 2Jan 1 08:01:17 user.info redial\\[312\\]: Started. Time: 60 3Jan 1 08:01:19 daemon.info pppd\\[311\\]: Serial connection established. 4Jan 1 08:01:19 daemon.info pppd\\[311\\]: Using interface ppp0 5Jan 1 08:01:19 daemon.notice pppd\\[311\\]: Connect: ppp0 \u0026lt;--\u0026gt; /dev/usb/tts/0 6Jan 1 08:01:23 daemon.warn pppd\\[311\\]: Could not determine remote IP address: defaulting to 10.64.64.64 7Jan 1 08:01:23 daemon.notice pppd\\[311\\]: local IP address 114.136.\\*\\*\\*.\\*\\*\\* 8Jan 1 08:01:23 daemon.notice pppd\\[311\\]: remote IP address 10.64.64.64 9Jan 1 08:01:23 daemon.notice pppd\\[311\\]: primary DNS address 168.95.1.1 10Jan 1 08:01:23 daemon.notice pppd\\[311\\]: secondary DNS address 168.95.192. 測試結果 有試著連續開好幾天, 基本上連線是 ok 的, 但是有幾個地方很困擾.\nkeventd 的 loading 很高, 開個 ftp (100KB/ 左右) 就可以接近 100%. 原因不知, 已向官網反應, 但似乎沒有別人碰到類似的問題... 我覺得應該是 3G 的問題, 因為有在內部網路傳檔 (1.5MB/s), 那時候的 loading 都滿低的... 下面是用 Firefox 開 GMail 時的 top 結果. 1Mem: 52020K used, 10944K free, 0K shrd, 2216K buff, 34944K cached 2CPU: 15% usr 84% sys 0% nic 0% idle 0% io 0% irq 0% sirq 3Load average: 1.34 0.46 0.17 5/35 671 4 PID PPID USER STAT VSZ %MEM %CPU COMMAND 5 2 1 root RW 0 0% 67% \\[keventd\\] 6 238 1 root R 1224 2% 21% klogd 7 230 1 root R 1228 2% 10% syslogd -L -s 50 8 657 633 root R 1236 2% 0% top 在 3G 連線成功後, /tmp/var/log/message 會一直固定有同樣的重複錯誤訊息 log 如下, 量多到非常驚人, 基本上其他的訊息都被蓋掉了, 所以會很不方便. 其實是這個問題造成前面的問題也說不定, 也向官網反應了. 1Jan 17 23:01:31 unknown user.err kernel: usb-uhci.c: ENXIO c0010400, flags 0, urb 877ad920, burb 877ad620 2Jan 17 23:01:31 unknown user.err kernel: usb-uhci.c: ENXIO c0010400, flags 0, urb 877ad820, burb 877ad620 3Jan 17 23:01:31 unknown user.err kernel: usb-uhci.c: ENXIO c0010400, flags 0, urb 877ad8a0, burb 877ad620 4Jan 17 23:01:31 unknown user.err kernel: usb-uhci.c: ENXIO c0010400, flags 0, urb 877ad920, burb 877ad620 連線是穩定的, 但是重新插拔網卡之後, 重新連線時不夠穩定, 常常會連不上線, 得插插拔拔重開好幾次... 這部份 CDMA@wifi 就很棒了, 隨便怎麼弄, 大概都是 10 幾秒就重新連線成功.\n官方說法是 \u0026quot;需要手動點擊網頁上的連接按鈕才能撥號\u0026quot;, 不過我實測時發現他幾乎都會自動連線, 只是問題在於, 常常連線失敗.\n官方說法是 \u0026quot;已知問題：重啟路由器後有些上網卡需要重新插拔才能被認到，有些上網卡斷開連接後需要重新插拔才可以再次撥號。另外，由於上網卡撥號過程相對較長，所以請將斷線重撥的時間由30秒改為60秒或者更高，以免撥號時間過長系統誤判為撥號沒成功\u0026quot; 結論 在 CPU, log 以及重新連線問題解決之前, 看來還需要再觀望一段時間... 可是我總覺得, 好像只有我碰到這個問題啊 ...\n","link":"https://dennys.github.io/tw/doc/router/tomato-dualwan-3g/","section":"doc","tags":["改機","Router"],"title":"Tomato DualWan 之 3G 上網"},{"body":"今天是 2009 年的最後一天.\n中午十二點 看著一些同事下午都請假準備回家或去玩了, 想到下午還有會議, 時間竟然還排到六點半 (而且想也知道不會準時結束), 實在是...\n晚上六點 外面天色漸沉, 台上講者口沫橫飛, 台下聽眾的心早已跑到九霄雲...... 內, 現在這麼流行雲, 當然是要在雲端裡面專心聆聽, 熱烈討論啦...\n晚上七點 下班了, 依照往例, 從介壽路警察局旁邊的小路超捷徑... 一般來說, 走這條路, 即使星期五, 最多也只是從家扶中心那邊才開始塞車. 沒想到, 今天才走一半路程, 就卡住了, 看著旁邊的墓仔埔, 真的是 ...\n終於, 到家把車停好了. 本來預計上樓拿個東西就可以出門了, 預計 10 分鐘後回到車上.\nX 的 進了電梯之後, 看著數字從 B 變成 1. 突然間, 電梯震了一下, 我還想說該不會又地震吧. 結果呢, 電梯就停下來了, 我想應該等幾秒鐘就會繼續了, 也不以為意. 沒想到完全沒有動靜, 我才注意到電梯按鈕的燈號都熄了, 怎麼按都沒有反應, 這時候, 我才意識到一件事.\n我 被 困 在 電 梯 裡 面 了\n當然, 第一件事就是按下 emergency 按鈕, 警衛室馬上就有人接聽了, 聽到是電梯出問題, 就說馬上 call vendor 來 (喔, 原來我們這裡全沒有任何電梯故障的應變能力啊).\n等啊, 等啊, 等啊, 等了 5 分鐘吧, 再打去問問, 他說在塞車... 什麼時間不好挑, 偏偏在跨年晚會前幾個小時搞這種飛機... 不過呢, 我這時候想的竟然是, 值班不是應該會有規定人不能跑太遠, 然後在多久多久內的時間內必須要回到公司報到嗎. (好吧, 我職業病又犯了)\n再繼續等啊, 等啊, 等啊, 不知道等了多久 (其實沒多久啦, 只是在這種情況下, 會感覺時間過得很慢). 看著天花板, 果然是好萊塢電影看太多, 還在想說可以把上面推開, 不然就是把門打開, 然後從夾縫中穿出去. 當然, 只是想想而已, 沒想到後來竟然...\n又繼續等啊, 等啊, 等啊. 在裡面真的滿無聊的, 什麼都沒帶, 身上只有鑰匙, 錢包和手機. 想著想著, 就打電話給長輩, 和長輩報告說, 晚輩活了三十幾年, 終於, 第一次被困在電梯裡面了... 只有我一個人在裡面, 連個說話的對象都沒有, 只好巴著長輩聊天. 報告說今天訂了一隻 iPhone, 也申請了一個免費一個月的 mPro 950 來玩玩, 剛好可以接上我下星期到期的免費 WiMax, 繼續我的免費網路計畫...\n還是只能一直等啊, 等啊, 等啊. 突然有人敲門, 問說裡面有人嗎? 我那時的第一個反應真是 OOXX ... 都被困這麼久了, 還來問這種問題是怎樣... 不過後來我才知道我錯怪他了, 我被卡在地下室和一樓的中間, 大部分人都在一樓, 而這是一位剛下班的住戶, 在地下室看到電梯故障, 還會很積極地詢問是否有人被困.. (想想要是我, 應該看到故障, 就直接走樓梯了吧, 哪會想到裡面有沒有人啊)\n終於, 門開了... XXXXXXX 的, 看來電梯只上升了不到一公尺就停了, 也就是說我從一樓的出口只有約 50 公分高的洞吧. (前面好萊塢的幻想竟然成真了), 該不會要我爬出去吧, 萬一爬到一半電梯動了, 不就...\n只是看著 廠商在那邊弄了許久, 看來是搞不定, 最後還是說要我爬出去... 我連忙說, 我可以再等一下... 不過到後來我看他們是放棄了, 弄來一把樓梯, 要我趕快上去. 我猶豫了一下, 還是爬上梯子了, 要出去時, 兩個人在上面拉我出去, 其實時間很短, 幾秒鐘而已, 不過我感覺得出來他們動作也很快, 看來也是有點擔心電梯會動...\n之後就簡單了, 上樓, 下樓, 開車出門. 走著走了, 經過慈雲路時, 已經不塞車了... 晚上九點多, 終於吃到晚餐了!!\n最後, 大家新年快樂啊\n","link":"https://dennys.github.io/tw/posts/201001/2010-elevator/","section":"posts","tags":null,"title":"在電梯裡跨年"},{"body":" 注意 這篇文章是基於 第一代的 XBox, 這機器都已停產超過 10 年以上了 這篇是寫給自己看的, 這樣以後才知道 upgrade 時要作些什麼...\nXBMC 現在的安袝比以前簡單多了, download, 解開, 就可以執行了, 鄀要設定的地方很少了, 只做了幾個動作.\n把喜歡的字型放到 media\\Fonts, 戁是直接把 arial.ttf 蓋掉. 把 language 目錄下用不到的語言檔刪除. 把 skin\\PM3.HD\\language 目錄裡面用不到的語言檔都刪除. 修改 skhn\\Project Mayhem III\\NTSC\\Font.pml 或是 skin\\PM3.HD\\720p (看你用哪個 skin), 把字型放大, 因為懶得研究哪個設定是對應到那個項目的, 所以我把所有小於 24 的全部都改成 24. 不過說實在的, 覺得還是有點小. 如果是全新安裝, 到這裡就可以了. 如果是升級, 把之前的 UserData 目錄拿來用, 就所有的設定和資料都回來 幾個比較重要的設定檔如下:\nUserData\\guisettings.xmd: 所有的 GUI 設定都在這裡, 萬一設定搞爛掉了 (設定錯誤的字型或 skin, 會讓整個畫面的字都亂掉), 可以備份這個檔案回來即可 UserData\\sources.xml: 這檔案放的是外部資源的設定, 譬如設定把家裏其他電腦用網路芳鄰分享出來的目錄, 就會存在這個檔案裡面 最後, 關於 XBMC 9.04 Babylon 的新功能可參考下列文章.\nXBMC Babylon Alpha 1 中文影片資料庫模式 XBMC Babylon Beta 1 and ESPN Video Plugin ","link":"https://dennys.github.io/tw/doc/software/xbmc-babylon-904/","section":"doc","tags":["XBMC","Software"],"title":"XBMC Babylon 9.04 安裝筆記"},{"body":"又是一篇筆記, 又是一個吃虧兩次的問題...\nWebLogic\n先講 WebLogic, 免費的 developer license, 可以用一年, 但是只能有 5 個 IP 連上來, 而且我覺得他 server 本身應該就已經算上一個 IP 了. 如果超過了, 第 6 個以後的 IP 會看到錯誤訊息\n錯誤訊息如下:\n\u0026lt;BEA-000211\u0026gt; \u0026lt;Connection rejected, the server license allows connections from only 5 unique IP addresses.\u0026gt;\n聽說 Bea 在被 Oracle 買下之後, 這些 license 檔案都開放自由下載了(當然, 該給錢的還是要給), 不過我是沒有找到就是了. (有人如果知道, 麻煩提供一下, 謝謝.\n解法:\n重開機就會重新計算 當然, 放上 license 就可以了. 參考: WebLogic Overview\nhttp://edocs.bea.com/platform/docs81/install/license.html\nNetWeaver\nNetWeaver 安裝完之後, 會有一個 temporary license, 可以使用 28 天, 過了時間之後, 每 25 分鐘會給你自動停機. 但是如果直接 restart 是無法啟動的, 得先 stop 再 start, 而且重點是, 畫面上是看不到的, 因此得去 log 裡面翻箱倒櫃找...\n檔案位置: /usr/sap///j2ee/cluster/server0/log/defaultTrace/*\n錯誤訊息:\nThe installed license for software product \u0026quot;{0}\u0026quot; is NOT valid.\n參考:\nhttp://help.sap.com/saphelp_nw04s/helpdata/en/14/5e533e5ff4d064e10000000a114084/frameset.htm How to check the default trace ","link":"https://dennys.github.io/tw/doc/java/weblogic-netweaver-license/","section":"doc","tags":["Java"],"title":"WebLogic 和 NetWeaver 的 License"},{"body":"","link":"https://dennys.github.io/tw/tags/database/","section":"tags","tags":null,"title":"Database"},{"body":" 注意 這篇文章是 WebLogic 10 的時代寫的, 並沒有在後續版本測試過. 前言 最近發現某個 WebLogic 的 JDBC connection 只會增加, 不會減少, 意思是說, 程式和 WebLogic 拿了很多 JDBC connection, 但是都沒有還給系統. 在程式執行一段時間之後, 就會拿不到 JDBC connection 了, 然後就掛了. WebLogic 的 console 可以看到, connection 的數字一直增加.\njdbc_monitor 解決方法 WebLogic 的 log 如下, 整個 stack trace 就不全列出來了, 重點在於, 當 WebLogic 的 JDBC connection pool 的 connection 都被要光之後, 後面的程式就無法和 database 連線了.\n1java.sql.SQLException: Internal error: Cannot obtain XAConnection 2weblogic.common.resourcepool.ResourceDeadException 因為在上圖中的 WebLogic 的 console 看到的 \u0026quot;leaked connection count\u0026quot; 一直都是 0, 所以我也沒有往這個方向思考過. 不過後來才發現需要做一些設定才能偵測 leaked connection, 如下\n設定 WebLogic 的 \u0026quot;Inactive Connection Timeout\u0026quot;, 這個參數的意義是, 如果有個 JDBC connection 被拿走之後, 超過一段時間沒有使用 (如下圖, 代表 10 分鐘), 則系統就會自動收回. (其實設定這個之後, 這個問題基本上就已經暫時解決了)\njdbc_connection_pool 打開偵測的工具, 如下圖, 系統就會在 log 顯示 leaked connection 的資訊\njdbc_diagnostics 設定好之後 (不用重開 WebLogic) , 觀察系統一段時間, 結果如下, 看到 \u0026quot;leaked connection count\u0026quot; 的值不再是 0 了, 而 active connection 在沒人使用時, 也會降到 0 了.\njdbc_monitor_leaked 之後 WebLogic 的 log (放在 user_projects/domains/%domainname%/%servername%/logs, 而不是自己 AP 的 log) 如下, 整個 stack trace 滿大的, 重點在第 28 行, 問題發生在 \u0026quot;com.test.dao.getStatus\u0026quot; 這個 method, 意思就是說, 有某個 JDBC connection 在這個程式被拿走之後, 一直沒有還給系統, 於是就找到兇手了.\n11. ####\u0026lt;Mar 11, 2009 11:14:36 PM CST\u0026gt; \u0026lt;Warning\u0026gt; \u0026lt;JDBC\u0026gt; \u0026lt;testserver1\u0026gt; \u0026lt;Server1\u0026gt; \u0026lt;\\[ACTIVE\\] ExecuteThread: \u0026#39;4\u0026#39; for queue: \u0026#39;weblogic.kernel.Default (self-tuning)\u0026#39;\u0026gt; \u0026lt;\u0026lt;WLS Kernel\u0026gt;\u0026gt; \u0026lt;\u0026gt; \u0026lt;\u0026gt; \u0026lt;1236748476017\u0026gt; \u0026lt;BEA-001153\u0026gt; \u0026lt;Forcibly releasing inactive connection \u0026#34;\\[weblogic.jdbc.wrapper.JTAConnection\\_weblogic\\_jdbc\\_wrapper\\_XAConnection\\_oracle\\_jdbc\\_driver\\_LogicalConnection-TEST\\_DS-311, oracle.jdbc.driver.LogicalConnection@42a794\\]\u0026#34; back into the connection pool \u0026#34;TEST\\_DS\u0026#34;, currently reserved by: java.lang.Exception 22. at weblogic.jdbc.common.internal.ConnectionEnv.setup(ConnectionEnv.java:291) 33. at weblogic.common.resourcepool.ResourcePoolImpl.reserveResource(ResourcePoolImpl.java:314) 44. at weblogic.common.resourcepool.ResourcePoolImpl.reserveResource(ResourcePoolImpl.java:292) 55. at weblogic.jdbc.common.internal.ConnectionPool.reserve(ConnectionPool.java:425) 66. at weblogic.jdbc.common.internal.ConnectionPool.reserve(ConnectionPool.java:316) 77. at weblogic.jdbc.common.internal.ConnectionPoolManager.reserve(ConnectionPoolManager.java:93) 88. at weblogic.jdbc.common.internal.ConnectionPoolManager.reserve(ConnectionPoolManager.java:61) 99. at weblogic.jdbc.jta.DataSource.getXAConnectionFromPool(DataSource.java:1474) 1010. at weblogic.jdbc.jta.DataSource.refreshXAConnAndEnlist(DataSource.java:1303) 1111. at weblogic.jdbc.jta.DataSource.getConnection(DataSource.java:426) 1212. at weblogic.jdbc.jta.DataSource.connect(DataSource.java:383) 1313. at weblogic.jdbc.common.internal.RmiDataSource.getConnection(RmiDataSource.java:339) 1414. at org.springframework.orm.hibernate3.LocalDataSourceConnectionProvider.getConnection(LocalDataSourceConnectionProvider.java:81) 1515. at org.hibernate.jdbc.ConnectionManager.openConnection(ConnectionManager.java:423) 1616. at org.hibernate.jdbc.ConnectionManager.getConnection(ConnectionManager.java:144) 1717. at org.hibernate.jdbc.AbstractBatcher.prepareQueryStatement(AbstractBatcher.java:139) 1818. at org.hibernate.loader.Loader.prepareQueryStatement(Loader.java:1547) 1919. at org.hibernate.loader.Loader.doQuery(Loader.java:673) 2020. at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:236) 2121. at org.hibernate.loader.Loader.doList(Loader.java:2220) 2222. at org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2104) 2323. at org.hibernate.loader.Loader.list(Loader.java:2099) 2424. at org.hibernate.loader.custom.CustomLoader.list(CustomLoader.java:289) 2525. at org.hibernate.impl.SessionImpl.listCustomQuery(SessionImpl.java:1695) 2626. at org.hibernate.impl.AbstractSessionImpl.list(AbstractSessionImpl.java:142) 2727. at org.hibernate.impl.SQLQueryImpl.list(SQLQueryImpl.java:152) 2828. at com.test.dao.getStatus(dao.java:194) 2929. at sun.reflect.GeneratedMethodAccessor755.invoke(Unknown Source) 3030. at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) 3131. at java.lang.reflect.Method.invoke(Method.java:585) 3232. at org.apache.axis2.rpc.receivers.RPCUtil.invokeServiceClass(RPCUtil.java:194) 3333. at org.apache.axis2.rpc.receivers.RPCMessageReceiver.invokeBusinessLogic(RPCMessageReceiver.java:102) 3434. at org.apache.axis2.receivers.AbstractInOutMessageReceiver.invokeBusinessLogic(AbstractInOutMessageReceiver.java:40) 3535. at org.apache.axis2.receivers.AbstractMessageReceiver.receive(AbstractMessageReceiver.java:100) 3636. at org.apache.axis2.engine.AxisEngine.receive(AxisEngine.java:176) 3737. at org.apache.axis2.transport.http.HTTPTransportUtils.processHTTPPostRequest(HTTPTransportUtils.java:275) 3838. at org.apache.axis2.transport.http.AxisServlet.doPost(AxisServlet.java:133) 3939. at javax.servlet.http.HttpServlet.service(HttpServlet.java:727) 4040. at javax.servlet.http.HttpServlet.service(HttpServlet.java:820) 4141. at weblogic.servlet.internal.StubSecurityHelper$ServletServiceAction.run(StubSecurityHelper.java:226) 4242. at weblogic.servlet.internal.StubSecurityHelper.invokeServlet(StubSecurityHelper.java:124) 4343. at weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:283) 4444. at weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:175) 4545. at weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.run(WebAppServletContext.java:3395) 4646. at weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:321) 4747. at weblogic.security.service.SecurityManager.runAs(Unknown Source) 4848. at weblogic.servlet.internal.WebAppServletContext.securedExecute(WebAppServletContext.java:2140) 4949. at weblogic.servlet.internal.WebAppServletContext.execute(WebAppServletContext.java:2046) 5050. at weblogic.servlet.internal.ServletRequestImpl.run(ServletRequestImpl.java:1366) 5151. at weblogic.work.ExecuteThread.execute(ExecuteThread.java:200) 5252. at weblogic.work.ExecuteThread.run(ExecuteThread.java:172) 測試環境 WebLogic 10.0 MP1, JDBC driver 使用的是內建的 Oracle thin driver. 另外也發現一件事情, 如果改用 Bea 的 Oracle driver, 則 connection 成長的速度會放慢, 但最後還是一樣會爆掉的啦\n","link":"https://dennys.github.io/tw/doc/java/jdbc-leaked-connection-in-weblogic/","section":"doc","tags":["Java","Database"],"title":"JDBC Leaked Connection in WebLogic"},{"body":"","link":"https://dennys.github.io/tw/tags/drupal/","section":"tags","tags":null,"title":"Drupal"},{"body":" 注意 這篇文章是 Drupal 6 的時代寫的, 並沒有在後續版本測試過. Drupal's cron Drupal 的 cron 是個好用的東西, 但有時候出問題時也很難 debug, 當看到這幾個訊息時, 通常是上次的 cron 執行失敗了.\n1Attempting to re-run cron while it is already running. 2Cron run exceeded the time limit and was aborted. 3Cron has been running for more than an hour and is most likely stuck. Debug 方法 在 variable 裡面, 有兩個相關參數, cron_last 是上次執行的時間, cron_semaphore 是代表 cron 正在執行. 所以如果執行 cron 的途中系統掛了, 可能就得手動清掉 semaphore, 不然即使你手動執行 cron, 系統也會回應已經有一個 cron 在執行了. 可用下列指令:\n1DELETE FROM variable WHERE name=\u0026#34;cron_semaphore\u0026#34;; 另外如果要看 cron 是執行到哪裡出問題了, 可修改 includes/module.inc\n1 foreach (module\\_implements($hook) as $module) { 2 $function = $module .\u0026#39;\\_\u0026#39;. $hook; 3 if ($hook == \u0026#39;cron\u0026#39;) watchdog(\u0026#39;cron\u0026#39;, \u0026#34;hit $module cron\u0026#34;); // add this line 4 $result = call\\_user\\_func\\_array($function, $args); 5 if (isset($result) \u0026amp;\u0026amp; is\\_array($result)) { 6 $return = array\\_merge($return, $result); 7 } 8 else if (isset($result)) { 9 $return\\[\\] = $result; 10 } 11 } 執行結果 如下, 可以看出 cron 執行到哪裡了.\n","link":"https://dennys.github.io/tw/doc/drupal/drupal-cron-debug/","section":"doc","tags":["Drupal"],"title":"如何對 Drupal 的 cron 做 Debug"},{"body":"前言 要把 ear 檔給 deploy 到 NetWeaver, 標準的作法應該是使用 SDM Remote GUI Client , 使用上是不困難, 但有幾個缺點:\n雖然說是 Remote GUI, 但是基本上你的環境得有安裝 NetWeaver 才行, 也不知道能不能只單單安裝 SDM. 因此我都是用 VNC 連上去再做 deploy GUI 的好處是簡單, 缺點就是你如果常常要做這個動作, 然後一直在選檔案, 執行, 確認, ... 等等按來按去, 按久了也真的滿累的 這個 GUI 有個很怪的地方, 沒法 re-deploy, 也就是說, 如果要更新版本時, 得先把舊版 un-deploy, 然後再 deploy, 這樣真的滿不方便的 Command line deploy 的方法 因此呢, 需要研究如何在 NetWeaver 上使用 command line deploy. 研讀了一下使用手冊 (裝好 SDM 就有了, 放在 /program/doc/SDMCommandLineDoc***_en_final.pdf), 指令如下\n步驟1: 把 SDM 停下來 (*** 代表你 instance 的名字, 通常是三個大寫字元)\n1/usr/sap/\\*\\*\\*/JC00/SDM/program/StopServer.sh 步驟2: 把模式改成 standalone, 這樣才能做 command line deploy.\n1sdm jstartup sdmhome=/usr/sap/\\*\\*\\*/JC00/SDM/program mode=standalone 步驟3: 執行這個指令, 就可以 deploy 了. updateversions 這個參數的目的在於, 如果版本一樣, 還是可以 re-deploy.\n1cd /usr/sap/\\*\\*\\*/JC00/SDM/program java -jar bin/SDM.jar deploy file=/tmp/AP.ear updateversions=all 要注意的是, 上面步驟執行之後, Remote GUI 就不能使用了, 得使用下列指令把模式切回來才能使用 GUI.\n1sdm jstartup sdmhome=/usr/sap/\\*\\*\\*/JC00/SDM/program mode=standalone 2/usr/sap/\\*\\*\\*/JC00/SDM/program/StartServer.sh 至於 undeploy, 執行下列指令即可, compname/compvendor 請參考 ear 檔裡面的 SAP_MANIFEST.MF\n1java -jar bin/SDM.jar undeploy compname=Application\\_Name compvendor=test.com 以上是 NetWeaver 7.0 的作法, 7.1 不知道會不會有什麼不同.\n參考:\nNetWeaver Software Deployment Manager\n","link":"https://dennys.github.io/tw/doc/java/command-line-deploy-on-netweaver/","section":"doc","tags":["Java"],"title":"Command Line Deploy on NetWeaver"},{"body":" 注意 這篇文章是 WebLogic 10 的時代寫的, 並沒有在後續版本測試過. 前言 在 ear 檔愈長愈大之後 (30mb左右), deploy 程式變成一個有點累的動作, 因為 Ant 只能做到把 ear 檔給 build 好, 之後的動作 (開 browser, login, deploy, active, start ap, ...) 需要不少時間, 不但要按好幾個按鍵, 中間還得等待, 因此, 得找個方法讓 deploy 的動作自動化, 以便放進 Ant 或是批次檔. 翻了一下 WebLogic 的文件, 看來不難做到, 而且還滿方便的.\nCommand line deploy 的方法 如果 WebLogic 就裝在自己的電腦上, 假設程式放在 D:\\app_name.ear, 使用下列的指令就可以很方便的直接 deploy 上去.\n1java -cp D:\\\\bea\\\\wlserver\\_10.0\\\\server\\\\lib\\\\weblogic.jar weblogic.Deployer -adminurl t3://localhost:7001 -user weblogic -password weblogic -deploy \u0026#34;D:\\\\app\\_name.ear\u0026#34; 如果 WebLogic 是裝在遠端的電腦, 指令基本上還是一樣, 只要多加上 -upload 參數就可以了.\n1java -cp D:\\\\bea\\\\wlserver\\_10.0\\\\server\\\\lib\\\\weblogic.jar weblogic.Deployer -adminurl t3://remotehost:7001 -user weblogic -password weblogic -deploy -upload \u0026#34;D:\\\\app\\_name.ear\u0026#34; 需要注意的是, 如果之前已經有用 WebLogic 的 console 把程式給 deploy 上去, 請先刪除之前 upload 的檔案, 原因如下:\nA. 使用 WebLogic 的 console 來作本機 deploy, 程式最後會被放到下面這個位置\nuser\\_projects\\\\domains\\\\base\\_domain\\\\servers\\\\AdminServer\\\\upload\\\\app\\_name.ear\nB. 使用 WebLogic 的 deployer 來作遠端 deploy, 程式最後會被放到下面這個位置\nuser\\_projects\\\\domains\\\\base\\_domain\\\\servers\\\\AdminServer\\\\upload\\\\app\\_name.ear\\\\app\\\\app\\_name.ear\n使用 A 方法產生的檔案如果沒有刪除, 則 B 方法在建立目錄的時候就會失敗 (這是 Windows 環境測試的結果, UNIX 環境不太確定)\n另外就是如果有人正在使用 WebLogic 的 console 修改系統參數而把 console 給 lock 時, 一樣會 deploy 失敗. 錯誤訊息為: The domain edit lock is owned by another session in non-exclusive mode. 因為 WebLogic 10 在 console 的 lock 並不是 by session 的, 也就是說, user 1 把 WebLogic 改成 edit 模式時, 在 active 之前, 如果 user 2 從另一個地方連進來, 也會看到目前是 edit 模式. 而這時如果 user 2 直接給他 rollback 了, user 1 就會發現他的東西不見了... 有點怪的設計, 不知道是不是我不會用.\nTBD:\n-stage 參數是做什麼的?\n參考 http://edocs.bea.com/wls/docs100/deployment/deploy.html#wp1031460 ","link":"https://dennys.github.io/tw/doc/java/command-line-deploy-on-weblogic/","section":"doc","tags":["Java"],"title":"Command Line Deploy on WebLogic"},{"body":"1SELECT * FROM 2(SELECT DISTINCT rank() over(PARTITION BY a.username ORDER BY a.update_dt desc) rn, a.* 3 FROM table_name a 4 WHERE a.update_dt \u0026gt; p_cur_timestamp 5 AND a.update_dt \u0026lt;= p_cur_timestamp + C_PERIOD 6 ) 7WHERE rn = 1 ","link":"https://dennys.github.io/tw/doc/database/get-first-record-of-a-range-sql/","section":"doc","tags":["Database"],"title":"抓某個區間的第一筆資料"},{"body":"看 table 大小: SELECT * FROM all_tables WHERE table_name LIKE 'AB%' (記得檢查last_analyzed_date) 重新分析 table 大小: ANALYZE table TABLE_NAME estimate statisitics 看 index 相關資訊:(這裡不會有 block 資訊) SELECT * FROM all_indexes WHERE table_name LIKE'AB%' 重新分析 index: ANALYZE index INDEX_NAME validate structure; 看 index 大小: (這個一次只能看最近一次 analyze 過的 index) SELECT * FROM index_stats =\u0026gt; Index要rebuild後才準, delete/update record 通常不會free index block Block 的定義要請 DBA 查 ","link":"https://dennys.github.io/tw/doc/database/how-to-analyze-size-of-table-index/","section":"doc","tags":["Database"],"title":"How to analyze size of table, index in Oracle"},{"body":"開張大吉, 使用 Movable Type 2.64\n","link":"https://dennys.github.io/tw/posts/200308/blog-initial.zh-tw/","section":"posts","tags":null,"title":"Blog 開張 (Movable Type 2.64)"},{"body":"","link":"https://dennys.github.io/tw/tags/ci/cd/","section":"tags","tags":null,"title":"CI/CD"}]